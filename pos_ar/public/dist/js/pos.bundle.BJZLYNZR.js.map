{
  "version": 3,
  "sources": ["../../../../../apps/pos_ar/pos_ar/pos_ar/page/pos/posController.js", "../../../../../apps/pos_ar/pos_ar/pos_ar/page/pos/pos_item_selector.js", "../../../../../apps/pos_ar/pos_ar/pos_ar/page/pos/pos_customer_box.js", "../../../../../apps/pos_ar/pos_ar/pos_ar/page/pos/pos_selected_item_cart.js", "../../../../../apps/pos_ar/pos_ar/pos_ar/page/pos/pos_item_details.js", "../../../../../apps/pos_ar/pos_ar/pos_ar/page/pos/pos_payment_cart.js", "../../../../../apps/pos_ar/pos_ar/pos_ar/page/pos/pos_history.js", "../../../../../apps/pos_ar/pos_ar/pos_ar/page/pos/sw.js"],
  "sourcesContent": ["\n\npos_ar.PointOfSale.Controller = class {\n        constructor(wrapper) {\n\t\t//principales variable\n                this.wrapper = $(wrapper).find(\".layout-main-section\");\n                this.page    = wrapper.page ;\n\n\t\t//logic variable\n                this.customersList     = []\n                this.itemGroupList     = []\n                this.itemList          = []\n                this.itemPrices        = []\n                this.priceLists        = []\n                this.selectedItemMaps  = new Map([\n\t\t\t\t\t\t\t[\"C1\" , new Map()]\n\t\t\t\t\t\t])\n                this.warehouseList     = []\n                this.PosProfileList    = []\n                this.binList           = []\n\n                this.selectedItem          = {}\n                this.selectedField         = {}\n                this.selectedTab           = {\"tabName\" : \"C1\"}\n\t\tthis.selectedPaymentMethod = {\"methodName\" : \"\"}\n\n\t\t//sell invoice\n\t\tthis.sellInvoices    = new Map();\n\t\tthis.POSOpeningEntry = {}\n\n                this.start_app();\n        }\n\n\t async start_app(){\n\t\tthis.prepare_container();\n\t\tawait  this.prepare_app_defaults();\n\t\tawait  this.checkForPOSEntry()\n                await  this.prepare_components();\n\t\tthis.setListeners();\n\t}\n\n\n\tasync refreshApp(){\n\t\tconsole.log(\"refresh\")\n\t\tthis.$components_wrapper.text('');\n\t\tawait  this.checkForPOSEntry()\n                await  this.prepare_components();\n\t\tthis.setListeners();\n\t}\n\n\tasync prepare_app_defaults(){\n                this.customersList  = await this.fetchCustomers()\n                this.itemGroupList  = await this.fetchItemGroups()\n                this.itemList       = await this.fetchItems()\n                this.itemPrices     = await this.fetchItemPrice()\n                this.priceLists     = await this.fetchPriceList()\n                this.warehouseList  = await this.fetchWarehouseList()\n                this.PosProfileList = await this.fetchPosProfileList()\n                this.binList        = await this.fetchBinList()\n\n                console.log(\"customersList => \" , this.customersList )\n                console.log(\"itemGroupList => \" , this.itemGroupList )\n                console.log(\"itemList      => \" , this.itemList      )\n                console.log(\"itemPrices    => \" , this.itemPrices    )\n                console.log(\"priceLists    => \" , this.priceLists    )\n                console.log(\"warehouseList => \" , this.warehouseList )\n                console.log(\"POSProfileList => \", this.PosProfileList)\n                console.log(\"bin list       => \", this.binList       )\n        }\n\n\n        /***********************  ui ******************************************/\n\n        prepare_container(){\n                //append css styles\n                this.wrapper.append('<link rel=\"stylesheet\" type=\"text/css\" href=\"/assets/pos_ar/css/selectorBox.css\">')\n                this.wrapper.append('<link rel=\"stylesheet\" type=\"text/css\" href=\"/assets/pos_ar/css/itemDetailsCart.css\">')\n                this.wrapper.append('<link rel=\"stylesheet\" type=\"text/css\" href=\"/assets/pos_ar/css/paymentMethodCart.css\">')\n                this.wrapper.append('<link rel=\"stylesheet\" type=\"text/css\" href=\"/assets/pos_ar/css/customerBox.css\">')\n                this.wrapper.append('<link rel=\"stylesheet\" type=\"text/css\" href=\"/assets/pos_ar/css/cartBox.css\">')\n\n                this.wrapper.append('<div id=\"MainContainer\" class=\"rowBox\"></div>');\n                this.$components_wrapper = this.wrapper.find(\"#MainContainer\");\n        }\n\n\tprepare_components(){\n\t\tthis.set_right_and_left_sections();\n\t\tthis.init_item_selector();\n\t\tthis.init_customer_box();\n\t\tthis.init_selected_item();\n\t\tthis.init_item_details();\n\t\tthis.init_paymentCart();\n\t\tthis.init_historyCart();\n\t}\n\n\tasync checkForPOSEntry(){\n\n\t\ttry{\n\t\t\tconst r = await frappe.db.get_list('POS Opening Entry' , {\n\t\t\t\t\tfilters :{\n\t\t\t\t\t\t'pos_profile' : this.PosProfileList[0].name,\n\t\t\t\t\t\t'status'      : 'Open',\n\t\t\t\t\t\t'user'        : frappe.session.user\n\t\t\t\t\t},\n\t\t\t\t\tfields  : ['name' , 'pos_profile' ,'period_start_date' , 'company'],\n\t\t\t\t\tlimit   : 1 // we only need the most recent one\n\t\t\t\t});\n\t\t\tif(r.length === 0){\n\t\t\t\tthis.create_opening_voucher();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t//copy data\n\t\t\tObject.assign(this.POSOpeningEntry ,  r[0])\n\t\t\tconsole.log(\"==> \" , this.POSOpeningEntry)\n\n\t\t\treturn true;\n\n\t\t}catch(error){\n\t\t\tconsole.error('error occured : ' , error);\n\t\t\tfrappe.throw('Error checking for POS Opening Entry.')\n\t\t\treturn false;\n\t\t}\n\n\t}\n\n\n\n\n\tcreate_opening_voucher() {\n\t\tconst me = this;\n\t\tconst table_fields = [\n\t\t\t{\n\t\t\t\tfieldname: \"mode_of_payment\",\n\t\t\t\tfieldtype: \"Link\",\n\t\t\t\tin_list_view: 1,\n\t\t\t\tlabel: \"Mode of Payment\",\n\t\t\t\toptions: \"Mode of Payment\",\n\t\t\t\treqd: 1,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"opening_amount\",\n\t\t\t\tfieldtype: \"Currency\",\n\t\t\t\tin_list_view: 1,\n\t\t\t\tlabel: \"Opening Amount\",\n\t\t\t\toptions: \"company:company_currency\",\n\t\t\t\tchange: function () {\n\t\t\t\t\tdialog.fields_dict.balance_details.df.data.some((d) => {\n\t\t\t\t\t\tif (d.idx == this.doc.idx) {\n\t\t\t\t\t\t\td.opening_amount = this.value;\n\t\t\t\t\t\t\tdialog.fields_dict.balance_details.grid.refresh();\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\tconst fetch_pos_payment_methods = () => {\n\t\t\tconst pos_profile = dialog.fields_dict.pos_profile.get_value();\n\t\t\tif (!pos_profile) return;\n\t\t\tfrappe.db.get_doc(\"POS Profile\", pos_profile).then(({ payments }) => {\n\t\t\t\tdialog.fields_dict.balance_details.df.data = [];\n\t\t\t\tpayments.forEach((pay) => {\n\t\t\t\t\tconst { mode_of_payment } = pay;\n\t\t\t\t\tdialog.fields_dict.balance_details.df.data.push({ mode_of_payment, opening_amount: \"0\" });\n\t\t\t\t});\n\t\t\t\tdialog.fields_dict.balance_details.grid.refresh();\n\t\t\t});\n\t\t};\n\t\tconst dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __(\"Create POS Opening Entry\"),\n\t\t\tstatic: true,\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\tfieldtype: \"Link\",\n\t\t\t\t\tlabel: __(\"Company\"),\n\t\t\t\t\tdefault: frappe.defaults.get_default(\"company\"),\n\t\t\t\t\toptions: \"Company\",\n\t\t\t\t\tfieldname: \"company\",\n\t\t\t\t\treqd: 1,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldtype: \"Link\",\n\t\t\t\t\tlabel: __(\"POS Profile\"),\n\t\t\t\t\toptions: \"POS Profile\",\n\t\t\t\t\tfieldname: \"pos_profile\",\n\t\t\t\t\treqd: 1,\n\t\t\t\t\tget_query: () => pos_profile_query(),\n\t\t\t\t\tonchange: () => fetch_pos_payment_methods(),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: \"balance_details\",\n\t\t\t\t\tfieldtype: \"Table\",\n\t\t\t\t\tlabel: \"Opening Balance Details\",\n\t\t\t\t\tcannot_add_rows: false,\n\t\t\t\t\tin_place_edit: true,\n\t\t\t\t\treqd: 1,\n\t\t\t\t\tdata: [],\n\t\t\t\t\tfields: table_fields,\n\t\t\t\t},\n\t\t\t],\n\t\t\tprimary_action: async function ({ company, pos_profile, balance_details }) {\n\t\t\t\tif (!balance_details.length) {\n\t\t\t\t\tfrappe.show_alert({\n\t\t\t\t\t\tmessage: __(\"Please add Mode of payments and opening balance details.\"),\n\t\t\t\t\t\tindicator: \"red\",\n\t\t\t\t\t});\n\t\t\t\t\treturn frappe.utils.play_sound(\"error\");\n\t\t\t\t}\n\n\t\t\t\t// filter balance details for empty rows\n\t\t\t\tbalance_details = balance_details.filter((d) => d.mode_of_payment);\n\n\t\t\t\tconst method = \"erpnext.selling.page.point_of_sale.point_of_sale.create_opening_voucher\";\n\t\t\t\tconst res = await frappe.call({\n\t\t\t\t\tmethod,\n\t\t\t\t\targs: { pos_profile, company, balance_details },\n\t\t\t\t\tfreeze: true,\n\t\t\t\t});\n\t\t\t\t!res.exc && me.prepare_app_defaults(res.message);\n\n\t\t\t\tObject.assign(me.POSOpeningEntry    ,  {'name' : res.message.name , 'pos_profile' : res.message.pos_profile ,  'period_start_date' : res.message.period_start_date , 'company' : res.message.company } )\n\n\t\t\t\tdialog.hide();\n\n\t\t\t},\n\t\t\tprimary_action_label: __(\"Submit\"),\n\t\t});\n\t\tdialog.show();\n\t\tconst pos_profile_query = () => {\n\t\t\treturn {\n\t\t\t\tquery: \"erpnext.accounts.doctype.pos_profile.pos_profile.pos_profile_query\",\n\t\t\t\tfilters: { company: dialog.fields_dict.company.get_value() },\n\t\t\t};\n\t\t};\n\t}\n\n\n\n        set_right_and_left_sections(){\n                this.$components_wrapper.append('<div id=\"LeftSection\" class=\"columnBox\"></div>')\n                this.$components_wrapper.append('<div id=\"RightSection\" class=\"columnBox\"></div>')\n\n\t\tthis.$rightSection = this.$components_wrapper.find(\"#RightSection\")\n\t\tthis.$leftSection  = this.$components_wrapper.find(\"#LeftSection\")\n\n        }\n\n        init_item_selector(){\n\t\tconsole.log(\"item list from controller : \" , this.itemList)\n                this.item_selector = new pos_ar.PointOfSale.pos_item_selector(\n\t\t\t\t\t\tthis.$leftSection  ,\n\t\t\t\t\t\tthis.itemList      ,\n\t\t\t\t\t\tthis.itemGroupList ,\n\t\t\t\t\t\tthis.itemPrices    ,\n\t\t\t\t\t\titem => { this.itemClick_selector(item)  }\n\t\t\t\t\t)\n\t}\n\n\tinit_customer_box(){\n\t\tthis.customer_box  = new pos_ar.PointOfSale.pos_customer_box(\n\t\t\t\t\t\t\t\t\tthis.$rightSection ,\n\t\t\t\t\t\t\t\t\tthis.customersList ,\n\t\t\t\t\t\t\t\t\tthis.onSync.bind(this),\n\t\t\t\t\t\t\t\t\tthis.onClosePOS.bind(this)\n\t\t\t\t\t\t\t\t\t)\n\t}\n        init_selected_item(){\n\t\tthis.selected_item_cart  = new pos_ar.PointOfSale.pos_selected_item_cart(\n\t\t\t\t\t\t\t\t\tthis.$rightSection ,\n\t\t\t\t\t\t\t\t\tthis.selectedItemMaps,\n\t\t\t\t\t\t\t\t\tthis.selectedTab  ,\n\t\t\t\t\t\t\t\t\tthis.selectedItem ,\n\t\t\t\t\t\t\t\t\tthis.selectedField,\n\t\t\t\t\t\t\t\t\titem => {\n\t\t\t\t\t\t\t\t\t\tthis.onSelectedItemClick(item)\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\ttab =>{\n\t\t\t\t\t\t\t\t\t\tthis.onClose_details();\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t(action , key) =>{\n\t\t\t\t\t\t\t\t\t\tthis.onKeyPressed(action , key)\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tthis.onCheckout.bind(this)\n\t\t\t\t\t\t\t\t\t)\n\t}\n\n\tinit_item_details(){\n\t\tconsole.log(\"warehouse ==> \" , this.PosProfileList[0].warehouse)\n\t\tthis.item_details = new pos_ar.PointOfSale.pos_item_details(\n\t\t\t\t\t\t\t\t\tthis.$leftSection,\n\t\t\t\t\t\t\t\t\tthis.PosProfileList[0].warehouse,\n\t\t\t\t\t\t\t\t\tthis.priceLists,\n\t\t\t\t\t\t\t\t\tthis.itemPrices,\n\t\t\t\t\t\t\t\t\tthis.binList,\n\t\t\t\t\t\t\t\t\tthis.selectedItem,\n\t\t\t\t\t\t\t\t\tthis.selectedField,\n\t\t\t\t\t\t\t\t\t(event , field , value) =>{\n\t\t\t\t\t\t\t\t\t\tthis.onInput(event , field , value);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tthis.onClose_details.bind(this)\n\t\t\t\t\t\t\t\t)\n\t}\n\n        init_paymentCart(){\n\t\tconsole.log(\"im heeeeeeeeeeeeer @#$%^&*(*&^%$##$%^&*()^%$#@\")\n\t\tthis.payment_cart = new pos_ar.PointOfSale.pos_payment_cart(\n\t\t\t\t\t\t\t\t\tthis.$leftSection,\n\t\t\t\t\t\t\t\t\tthis.selectedItemMaps,\n\t\t\t\t\t\t\t\t\tthis.selectedTab,\n\t\t\t\t\t\t\t\t\tthis.selectedPaymentMethod,\n\t\t\t\t\t\t\t\t\tthis.onClose_payment_cart.bind(this),\n\t\t\t\t\t\t\t\t\tthis.onCompleteOrder.bind(this)\n\t\t\t\t\t\t\t\t)\n        }\n\n        init_historyCart(){\n\t\tconsole.log(\"im heeeeeeeeeeeeer @#$%^&*(*&^%$##$%^&*()^%$#@\")\n\t\tthis.history_cart = new pos_ar.PointOfSale.pos_history(\n\t\t\t\t\t\t\t\t)\n        }\n\n\n\n        /*********************  callbacks functions ******************************/discount_percentage\n\n\n\tshowHistory(){\n\n\n\t\t//hide\n\t\tthis.item_selector.hideCart();\n\t\tthis.payment_cart.hideCart();\n\t\tthis.item_details.hide_cart();\n\n\n\t}\n\n\n\titemClick_selector(item){\n\n\t\tconst itemCloned = { ...item }\n\n\t\tconsole.log(\"old ===> \" , this.selectedItemMaps )\n\n\t\tconsole.log(\"updated ===> \" , this.selectedItemMaps.get(this.selectedTab.tabName).has(itemCloned.name) )\n\n\n\t\tif(!this.selectedItemMaps.get(this.selectedTab.tabName).has(itemCloned.name)){\n\t\t\titemCloned.quantity = 1 ;\n\t\t\titemCloned.amount   = this.getItemPrice(itemCloned.name);\n\t\t\tthis.selectedItemMaps.get(this.selectedTab.tabName).set( itemCloned.name , itemCloned )\n\t\t}\n\t\telse{\n\t\t\tconst existingItem = this.selectedItemMaps.get(this.selectedTab.tabName).get(itemCloned.name);\n\t\t\tconsole.log(\"quantity ===> \" , existingItem.quantity);\n\t\t\texistingItem.quantity += 1 ;\n\t\t\tthis.selectedItemMaps.get(this.selectedTab.tabName).set( itemCloned.name , existingItem);\n\t\t}\n\n\n\t\tconsole.log(\"updated ===> \" , this.selectedItemMaps )\n\n\n\t\tthis.selected_item_cart.calculateNetTotal();\n\t\tthis.selected_item_cart.calculateQnatity();\n\t\tthis.selected_item_cart.calculateGrandTotal();\n\t\tthis.selected_item_cart.refreshSelectedItem();\n\n\n\t}\n\n\tonSelectedItemClick(item){\n\n\t\tObject.assign(this.selectedItem , item)\n\n\n\t\t//show\n\t\tthis.item_details.show_cart();\n\t\tthis.selected_item_cart.showKeyboard();\n\n\t\t//close\n\t\tthis.item_selector.hideCart();\n\t\tthis.payment_cart.hideCart();\n\n\t\t//change display\n\t\tthis.selected_item_cart.setKeyboardOrientation(\"landscape\");\n\n\n\t\t//refresh data\n\t\tthis.item_details.refreshDate(item);\n\n\t}\n\n\tonCheckout(){\n\t\tconsole.log(\"here we are on callback 02 \" , this.item_details)\n\n\t\t//show\n\t\tthis.payment_cart.showCart();\n\n\t\t//hide\n\t\tthis.item_selector.hideCart();\n\t\tthis.item_details.hide_cart();\n\n\t\t//change displayk\n\t\tthis.payment_cart.calculateGrandTotal()\n\t\tthis.selected_item_cart.setKeyboardOrientation(\"landscape\");\n\t\tthis.selected_item_cart.cleanHeighlight();\n\t\tthis.selected_item_cart.showKeyboard();\n\n\t}\n\n\tonClose_details(){\n\t\tconsole.log(\"onClose callback 002\")\n\n\t\t//show\n\t\tthis.item_selector.showCart();\n\n\t\t//hide\n\t\tthis.payment_cart.hideCart();\n\t\tthis.item_details.hide_cart();\n\t\tthis.selected_item_cart.hideKeyboard();\n\n\t\t//change display\n\t\tthis.selected_item_cart.setKeyboardOrientation(\"portrait\");\n\t\tthis.selected_item_cart.cleanHeighlight();\n\n\t}\n\n\tonClose_payment_cart(){\n\n\t\t//show\n\t\tthis.item_selector.showCart();\n\n\t\t//hide\n\t\tthis.item_details.hide_cart();\n\t\tthis.payment_cart.hideCart();\n\n\t\t//update ui\n\t\tthis.selected_item_cart.setKeyboardOrientation(\"portrait\");\n\t\tthis.selected_item_cart.cleanHeighlight();\n\t\tthis.selected_item_cart.hideKeyboard()\n\n\t}\n\n\n\tonInput( event , field , value){\n\t\tconsole.log(\"field : \" , field)\n\t\t//console.log(\"item \" , this.selectedItem )\n\t\tif(event == \"focus\" || event == \"blur\"){\n\t\t\tif(event == \"focus\")\n\t\t\t\tObject.assign(this.selectedField , {field_name : field})\n\t\t\tif(event == \"blur\")\n\t\t\t\tObject.assign(this.selectedField , {field_name : null})\n\n\t\t\tthis.item_details.makeSelectedFieldHighlighted()\n\t\t\tthis.selected_item_cart.makeSelectedButtonHighlighted();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif( field ==  \"quantity\" ){\n\t\t\tthis.selectedItem.quantity = value;\n\t\t\tthis.selectedItemMaps.get(this.selectedTab.tabName).set( this.selectedItem.name , Object.assign({},this.selectedItem) )\n\t\t\t//redrawing\n\t\t\tthis.selected_item_cart.refreshSelectedItem();\n\t\t}\n\t\telse if( field ==  \"rate\" ){\n\t\t\tthis.selectedItem.amount = value;\n\t\t\tthis.selectedItemMaps.get(this.selectedTab.tabName).set( this.selectedItem.name , Object.assign({},this.selectedItem)  )\n\t\t\t//redrawing\n\t\t\tthis.selected_item_cart.refreshSelectedItem();\n\t\t}\n\t\telse if( field == \"discount_percentage\"){\n\n\t\t\t//recalculate the rate\n\t\t\tlet oldRate = this.getItemPrice(this.selectedItem.name);\n\t\t\tlet montant = oldRate * (value / 100)\n\t\t\tlet newRate = oldRate - montant\n\n\t\t\tconsole.log(\"old price : \" , oldRate , \"discount % : \" , value , \"discount montant : \"  , montant , \" new Price \" , newRate )\n\t\t\tthis.selectedItem.discount_percentage = value;\n\t\t\tthis.selectedItem.discount_amount     = montant;\n\t\t\tthis.selectedItem.amount              = newRate;\n\n\t\t\tthis.selectedItemMaps.get(this.selectedTab.tabName).set( this.selectedItem.name , Object.assign({},this.selectedItem)  )\n\t\t\t//redrawing\n\t\t\tthis.selected_item_cart.refreshSelectedItem();\n\t\t\tthis.item_details.refreshDate(this.selectedItem);\n\t\t}\n\t\telse if( field == \"discount_amount\"){\n\n\t\t\t//recalculate the rate\n\t\t\tlet oldRate = this.getItemPrice(this.selectedItem.name);\n\t\t\tlet persent = ((value * 100) / oldRate).toFixed(2);\n\t\t\tlet montant = value;\n\n\t\t\t//prevent negatif result\n\t\t\tif(persent > 100){\n\t\t\t\tpersent = 100 ;\n\t\t\t}\n\t\t\tif(value > oldRate){\n\t\t\t\tmontant = oldRate;\n\t\t\t}\n\t\t\tlet newRate = oldRate - montant\n\n\t\t\tconsole.log(\"old price : \" , oldRate , \"discount % : \" , persent , \"discount montant : \"  , montant , \" new Price \" , newRate )\n\t\t\tthis.selectedItem.discount_percentage = persent;\n\t\t\tthis.selectedItem.discount_amount     = montant;\n\t\t\tthis.selectedItem.amount              = newRate;\n\n\t\t\tthis.selectedItemMaps.get(this.selectedTab.tabName).set( this.selectedItem.name , Object.assign({},this.selectedItem)  )\n\t\t\t//redrawing\n\t\t\tthis.selected_item_cart.refreshSelectedItem();\n\t\t\tthis.item_details.refreshDate(this.selectedItem);\n\n\t\t}\n\t}\n\n\n\tonKeyPressed( action  , key){\n\t\tif(action == \"quantity\"){\n\t\t\tthis.item_details.requestFocus(\"quantity\")\n\t\t}\n\t\telse if(action == \"rate\"){\n\t\t\tthis.item_details.requestFocus(\"rate\")\n\t\t}\n\t\telse if(action == \"discount\"){\n\t\t\tthis.item_details.requestFocus(\"discount\")\n\t\t}\n\t\telse if(action == \"remove\"){\n\t\t\tthis.selectedItemMaps.get(this.selectedTab.tabName).delete(this.selectedItem.name)\n\t\t\tthis.selected_item_cart.refreshSelectedItem();\n\t\t}\n\t\telse if(action == \"addToField\"){\n\t\t\tthis.item_details.addToField(this.selectedField.field_name , key)\n\t\t}\n\t}\n\n\n\tonCompleteOrder(){\n\n\n\t\tlet items = []\n\n\t\tthis.selectedItemMaps.get(this.selectedTab.tabName).forEach((value,key) =>{\n\t\t\tconsole.log(\"the key ==> \" , key , \" value ==> \" , value)\n\t\t\t// we still didnt implement the price_list_rate and base_price_list_rate\n\t\t\t// same thing with actual_qty refering to the stock quantity\n\t\t\tlet newItem = {\n\t\t\t\t'item_name'               : value.name,\n\t\t\t\t'item_code'               : value.name,\n\t\t\t\t'rate'                    : value.amount,\n\t\t\t\t'qty'                     : value.quantity,\n\t\t\t\t'description'             : value.name,\n\t\t\t\t'image'                   : value.image,\n\t\t\t\t'expense_account'         : 'Cost of Goods Sold - MS',\n\t\t\t\t'use_serial_batch_fields' : 1,\n\t\t\t\t'discount_percentage'     : value.discount_percentage,\n\t\t\t\t'discount_amount'         : value.discount_amount,\n\t\t\t\t'warehouse'               : this.PosProfileList[0].warehouse,\n\t\t\t\t'income_account'          : this.PosProfileList[0].income_account,\n\t\t\t\t'item_tax_rate'           : {}\n\t\t\t}\n\n\t\t\titems.push(newItem)\n\t\t})\n\n\t\tif(items.length ==0)\n\t\t\treturn\n\n\t\tthis.sellInvoices.set(\n\t\t\t\tthis.selectedTab.tabName , {\n\t\t\t\t\"customer\"   : this.customersList[0].name,\n\t\t\t\t\"pos_profile\": this.PosProfileList[0].name,\n\t\t\t\t\"items\"      : items,\n\t\t\t\t\"creation_time\": frappe.datetime.now_datetime()\n\t\t});\n\n\t\tthis.selectedItemMaps.delete(this.selectedTab.tabName)\n\n\t\t//tabs\n\t\tlet tabs = Array.from(this.selectedItemMaps.keys())\n\n\t\t//if there are still tabs it will just set the first as selected\n\t\t//otherwise it will create one using the selected_item_cart class and set it as selected\n\t\tif(tabs.length > 0){\n\t\t\tthis.selectedTab.tabName = tabs[0]\n\t\t\tthis.selected_item_cart.refreshTabs();\n\t\t\tthis.selected_item_cart.refreshSelectedItem();\n\t\t}\n\t\telse{\n\t\t\tthis.selected_item_cart.createNewTab();\n\t\t}\n\n\t\tthis.onClose_payment_cart()\n\n\t\tconsole.log(\"posInvoice ==> \" , this.sellInvoices);\n\t}\n\n\n\tonSync(){\n\n\t\tif(this.POSOpeningEntry.name == '' ){\n\t\t\tthis.checkForPOSEntry();\n\t\t\treturn;\n\t\t}\n\n\n\t\t//calculate amount\n\t\tlet all_tabs = Array.from(this.sellInvoices.keys())\n\n\t\tif(all_tabs.length == 0){\n\t\t\t// with options\n\t\t\tfrappe.msgprint({\n\t\t\t\ttitle: __('Sync Complete'),\n\t\t\t\tindicator: 'green',\n\t\t\t\tmessage: __('All data is already synchronized.')\n\t\t\t});\n\t\t\treturn;\n\n\t\t}\n\t\ttry{\n\t\t\t//progress\n\t\t\tfrappe.show_progress('Syncing Invoices...' , 0 , all_tabs.length , 'syncing')\n\n\t\t\tlet counter     = 0  ;\n\t\t\tlet failure     = 0  ;\n\t\t\tlet seccess     = 0  ;\n\t\t\tlet invoicesRef = [] ;\n\n\t\t\tall_tabs.forEach(tab =>{\n\t\t\t\t//calculate the paid_amount\n\t\t\t\tlet paid_amount = 0 ;\n\t\t\t\tlet totalQty    = 0 ;\n\t\t\t\tthis.sellInvoices.get(tab).items.forEach(item =>{\n\t\t\t\t\ttotalQty    += item.qty\n\t\t\t\t\tpaid_amount += item.rate * item.qty\n\t\t\t\t})\n\n\t\t\t\tconsole.log(\"paid\" , paid_amount)\n\t\t\t\t// we still didnt implement the  base_paid_amount and amount_eligible_for_commission\n\t\t\t\t//_seen  value in deafault pos ==>  [\"Administrator\"]. i think it is an array.\n\t\t\t\tfrappe.db.insert({\n\t\t\t\t\t'doctype'      : \"POS Invoice\",\n\t\t\t\t\t'customer'     : this.sellInvoices.get(tab).customer    ,\n\t\t\t\t\t'pos_profile'  : this.sellInvoices.get(tab).pos_profile ,\n\t\t\t\t\t'items'        : this.sellInvoices.get(tab).items       ,\n\t\t\t\t\t'creation_time': this.sellInvoices.get(tab).creation_time,\n\t\t\t\t\t'paid_amount'  : paid_amount,\n\t\t\t\t\t'amount_eligible_for_commission' : paid_amount,\n\t\t\t\t\t'write_off_account': this.PosProfileList[0].write_off_account,\n\t\t\t\t\t'write_off_cost_center': this.PosProfileList[0].write_off_cost_center,\n\t\t\t\t\t'outstanding_amount' : 0 ,\n\t\t\t\t\t'is_pos'       : 1       ,\n\t\t\t\t\t'payments'     :[{\n\t\t\t\t\t\t'mode_of_payment' : 'Cash',\n\t\t\t\t\t\t'amount'          : paid_amount\n\t\t\t\t\t}],\n\t\t\t\t\t'update_stock' : 1       ,\n\t\t\t\t\t'docstatus'    : 1\n\t\t\t\t}).then(r => {\n\n\n\t\t\t\t\tinvoicesRef.push({'pos_invoice' : r.name , 'customer' : r.customer } )\n\t\t\t\t\tthis.sellInvoices.delete(tab)\n\n\t\t\t\t\tcounter += 1 ;\n\t\t\t\t\tseccess += 1 ;\n\n\t\t\t\t\tfrappe.show_progress('Syncing Invoices...' , counter , all_tabs.length , 'syncing')\n\n\t\t\t\t\tif(counter == all_tabs.length){\n\t\t\t\t\t\tfrappe.hide_progress();\n\t\t\t\t\t}\n\n\t\t\t\t}).catch(err =>{\n\t\t\t\t\tcounter += 1 ;\n\t\t\t\t\tfailure += 1 ;\n\t\t\t\t\tconsole.log(err)\n\t\t\t\t})\n\n\t\t\t})\n\t\t}\n\t\tcatch(err){\n\t\t\tconsole.log(\"err ==> \" , err)\n\t\t}\n\n\t}\n\n\n\tonClosePOS(){\n\n\t\tlet all_tabs = Array.from(this.sellInvoices.keys())\n\t\t//check if you still have an invoice to sync\n\t\tif(all_tabs.length > 0){\n\t\t\tfrappe.throw(__(`you have ${all_tabs.length} invoice to sync first.`))\n\t\t}\n\n\t\t//otherwise you can close the voucher\n\t\tlet voucher               = frappe.model.get_new_doc(\"POS Closing Entry\");\n\t\tvoucher.pos_opening_entry = this.POSOpeningEntry.name;\n\t\tvoucher.pos_profile       = this.POSOpeningEntry.pos_profile;\n\t\tvoucher.company           = this.POSOpeningEntry.company ;\n\t\tvoucher.user              = frappe.session.user  ;\n\t\tvoucher.posting_date      = frappe.datetime.now_date();\n\t\tvoucher.posting_time      = frappe.datetime.now_time();\n\t\tfrappe.set_route(\"Form\", \"POS Closing Entry\", voucher.name);\n\n\t\t//delete the open entry because you create the closing entr,\n\t\t//that my the user submited it, so when the code find its name empty,\n\t\t//it will try to fetch an open pos entry if there is no one opening,\n\t\t//it will force the user to create one.\n\t\tthis.POSOpeningEntry.name = ''\n\n\n\n\n\t}\n\n\n\t/****************************  listeners *******************************/\n\n\tsetListeners(){\n\t\tconsole.log(\"test (window) ==> \" , window)\n\t\twindow.addEventListener('offline' , function(){\n\t\t\tfrappe.msgprint('you lose the connection (offline mode)')\n\t\t})\n\n\t\twindow.addEventListener('online' , function(){\n\t\t\tfrappe.msgprint('the connection is back (online mode)')\n\t\t})\n\t}\n\t/*****************************  tools  **********************************/\n\tgetItemPrice(itemId){\n\t\tconst price = this.itemPrices.find(itemPrice => itemPrice.item_code == itemId)\n\t\treturn price ? price.price_list_rate  : 0\n        }\n\n\tcheckServiceWorker(){\n\n\t\t// Check if service workers are supported\n\t\tif (!('serviceWorker' in navigator)) {\n\t\t\tconsole.log(\"Service Worker isn't supported!\");\n\t\t\treturn;\n\t\t}\n\n\t\tconsole.log(\"Service Worker supported\");\n\n\t\t// Register the service worker on window load\n \t\twindow.addEventListener('DOMContentLoaded', () => {\n\t\tconsole.log(\"Window loaded!\");\n\t\tnavigator.serviceWorker\n\t\t\t.register('./sw.js')\n\t\t\t.then(reg => console.log(\"Service Worker registered successfully.\"))\n\t\t\t.catch(err => console.log(`Service Worker registration failed: ${err}`));\n\t\t});\n\n\n\t\tthis.sw = new pos_ar.PointOfSale.Sw()\n\n\t\t// Additionally, check if DOM is already loaded\n\t\tif (document.readyState === 'complete') {\n\t\t\tconsole.log(\"DOM was already loaded\");\n\t\t\tnavigator.serviceWorker\n\t\t\t\t.register('../assets/pos_ar/public/js/sw.js')\n\t\t\t\t.then(reg => console.log(\"Service Worker registered successfully.\"))\n\t\t\t\t.catch(err => console.log(`Service Worker registration failed: ${err}`));\n\t\t}\n\n\n\t}\n\n        /*********************  get data functions ******************************/\n\n\n        async  fetchCustomers() {\n                try {\n                        return await frappe.db.get_list('Customer', {\n                                fields: ['name', 'customer_name' ],\n                                filters: {}\n                        })\n                } catch (error) {\n                        console.error('Error fetching customers:', error);\n                        return []\n                }\n        }\n\n        async fetchItemGroups() {\n                try {\n                        return await frappe.db.get_list('Item Group', {\n                                fields: ['name', 'item_group_name' , 'parent_item_group' , 'is_group' ],\n                                filters: {}\n                        })\n                } catch (error) {\n                        console.error('Error fetching Item Group :', error);\n                        return []\n                }\n        }\n\n        async fetchItems() {\n                try {\n                        return await frappe.db.get_list('Item', {\n                                fields: ['name', 'item_name' , 'image' , 'item_group' , 'stock_uom' ],\n                                filters: { disabled : 0 }\n                        })\n                } catch (error) {\n                        console.error('Error fetching Item Group :', error);\n                        return []\n                }\n        }\n\n        async fetchItemPrice() {\n                try {\n                        return await frappe.db.get_list('Item Price', {\n                                fields: ['name', 'item_code' , 'item_name' , 'price_list', 'price_list_rate' ],\n                                filters: { price_list : \"Standard Selling\"}\n                        })\n                } catch (error) {\n                        console.error('Error fetching Item Group :', error);\n                        return []\n                }\n        }\n\n        async fetchPriceList() {\n                try {\n                        return await frappe.db.get_list('Price List', {\n                                fields: ['name', 'price_list_name' , 'currency' ],\n                                filters: {selling : 1 }\n                       })\n                } catch (error) {\n                        console.error('Error fetching Item Group :', error);\n                        return []\n                }\n        }\n\n\n        async fetchWarehouseList(){\n                try{\n                        return await frappe.db.get_list('Warehouse' , {\n                                fields  : ['name' , 'warehouse_name'],\n                                filters : {}\n                        })\n                }\n                catch(error){\n                        console.error('Error fetching Warehouse list : ' , error)\n                        return [];\n                }\n        }\n\n        async fetchPosProfileList(){\n                try{\n                        return await frappe.db.get_list('POS Profile' , {\n                                fields  : ['name' , 'warehouse' , 'income_account' , 'write_off_account' , 'write_off_cost_center'],\n                                filters : {}\n                        })\n                }\n                catch(error){\n                        console.error('Error fetching Warehouse list : ' , error)\n                        return [];\n                }\n        }\n\n\n        async fetchBinList(){\n                try{\n                        return await frappe.db.get_list('Bin' , {\n                                fields  : ['actual_qty' , 'item_code' , 'warehouse'],\n                                filters : {}\n                        })\n                }\n                catch(error){\n                        console.error('Error fetching Bin list : ' , error)\n                        return [];\n                }\n        }\n\n};\n", "\n\npos_ar.PointOfSale.pos_item_selector = class {\n\n\tconstructor(\n\t\twrapper ,\n\t\titem_list ,\n\t\titem_group_list ,\n\t\titem_prices,\n\t\tonItemClick\n\t){\n\t\tthis.wrapper     = wrapper;\n\t\tthis.item_list   = item_list;\n\t\tthis.item_group_list = item_group_list;\n\t\tthis.item_prices = item_prices;\n\t\tthis.on_item_click = onItemClick;\n\n\n\t\t//class functions invocation\n\t\tthis.start_item_selector();\n        }\n\n\n\tstart_item_selector(){\n\t\tthis.prepare_select_box();\n\t\tthis.setItemGroupsInList();\n\t\tthis.setItemInFlow(this.getItemByItemGroup(\"\"))\n\t\tthis.setListeners();\n\t}\n\n\n\n\t/***********************  ui  functions  ***************************************/\n\tprepare_select_box(){\n\t\tthis.wrapper.append('<div id=\"SelectorBox\" class=\"columnBox\"></div>')\n\n\t\tthis.selectorBox  = this.wrapper.find(\"#SelectorBox\");\n\t\tthis.selectorBox.append('<div id=\"selectorBoxHeader\" class=\"rowBox header\"></div>')\n\n\t\tthis.header       = this.selectorBox.find(\"#selectorBoxHeader\");\n\t\tthis.header.append('<h4 class=\"CartTitle\">Items</h4>')\n\t\tthis.header.append('<div id=\"inputsBox\" class=\"rowBox align_center\"></div>')\n\n\t\tthis.inputBox     = this.header.find(\"#inputsBox\");\n\t\tthis.inputBox.append('<input type=\"text\" autocomplete=\"off\"  maxlength=\"140\" placeholder=\"Search by item code, serial number or barcode\" id=\"ItemInput\" name=\"item\" placeHolder=\"Enter the customer\">')\n\t\tthis.inputBox.append('<input list=\"ItemGroupList\"  id=\"ItemGroupInput\" name=\"ItemGroup\" placeHolder=\"Item Group\">')\n\t\tthis.inputBox.append('<datalist id=\"ItemGroupList\"></datalist>')\n\n\t\tthis.itemGroupList = this.inputBox.find(\"#ItemGroupList\");\n\t\tthis.itemGroupList.append('<option>fetching Item Groups ...</option>')\n\n\t\tthis.selectorBox.append('<div id=\"itemsContainer\" class=\"rowBox row_wrap\"></div>')\n\t\tthis.itemsContainer = this.selectorBox.find('#itemsContainer')\n\t}\n\n\n\tsetItemGroupsInList(){\n\t\tconst groupItemList_html = document.getElementById(\"ItemGroupList\");\n\t\tgroupItemList_html.innerHTML = \"\" ;\n\t\tthis.item_group_list.forEach(group_item =>{\n\t\t\tconst option = document.createElement(\"option\");\n\t\t\toption.value = group_item.name;\n\t\t\toption.textContent = group_item.customer_name;\n\t\t\tgroupItemList_html.appendChild(option);\n\t\t})\n\t}\n\n\tsetItemInFlow(filtered_item_list){\n        \tconst itemsContainer_html = document.getElementById(\"itemsContainer\");\n        \titemsContainer_html.innerHTML = \"\";\n        \tfiltered_item_list.forEach(item =>{\n                \tconst itemBox = document.createElement(\"div\");\n                \titemBox.classList.add(\"itemBox\");\n                \titemBox.classList.add(\"columnBox\");\n                \titemBox.classList.add(\"C_A_Center\");\n\n                \titemBox.addEventListener('click' , event => {\n\t\t\t\tthis.on_item_click(item);\n                \t});\n\n\n                \tif(item.image){\n                        \tconst itemImage = document.createElement(\"img\");\n                        \titemImage.classList.add(\"itemImage\");\n                        \titemImage.src = item.image\n                        \titemBox.appendChild(itemImage);\n                \t}\n                \telse{\n                        \tconst itemImageHolder = document.createElement(\"div\");\n                        \titemImageHolder.classList.add(\"itemImage\");\n                        \titemImageHolder.classList.add(\"rowBox\");\n                        \titemImageHolder.classList.add(\"centerItem\");\n                        \tconst firstLatter = document.createElement(\"h1\");\n                        \tfirstLatter.textContent = item.name[0];\n                        \tfirstLatter.style.color = \"#707070\";\n                        \titemImageHolder.appendChild(firstLatter);\n                        \titemBox.appendChild(itemImageHolder);\n                \t}\n                \tconst itemName = document.createElement(\"div\");\n                \titemName.textContent = item.name ;\n                \titemName.classList.add(\"itemTitle\");\n                \titemBox.appendChild(itemName);\n\n\n                \tconst price = document.createElement(\"div\");\n                \tprice.classList.add(\"itemPrice\");\n                \tprice.textContent = this.getItemPrice(item.name) + \" DA\";\n                \titemBox.appendChild(price);\n\n\n                \titemsContainer_html.appendChild(itemBox);\n        \t});\n\n\t}\n\n\t//show and hide\n\tshowCart(){\n\t\tthis.selectorBox.css(\"display\" , \"flex\")\n\t}\n\n\thideCart(){\n\t\tthis.selectorBox.css(\"display\" , \"none\")\n\t}\n\n\t//**************** set listeners method ****************************//\n\tsetListeners(){\n\t\tconst groupItemListInput = document.getElementById(\"ItemGroupInput\");\n                groupItemListInput.addEventListener('input' , (even)=>{\n\t\t\tthis.setItemInFlow(this.getItemByItemGroup(event.target.value))\n\t\t})\n\t}\n\n\t//**************** tools method ****************************//\n\tgetItemByItemGroup(item_group){\n\n\n\t\tlet groups = [];\n\n\t\tlet getChild = (grp)=>{\n\t\t\tgroups.push(grp);\n\t\t\tthis.item_group_list.forEach(g=>{\n\t\t\t\tif(g.parent_item_group == grp){\n\t\t\t\t\tgroups.push(g.name)\n\t\t\t\t\tif(g.is_group){\n\t\t\t\t\t\tgetChild(g.name)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t};\n\n\n\t\tgetChild(item_group);\n\n\n\t\tlet filtredItemList = [];\n\n\t\tlet getFiltredItems = (group)=>{\n\t\t\tthis.item_list.forEach(item =>{\n\t\t\t\tif(item.item_group == group){\n\t\t\t\t\tfiltredItemList.push(item);\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\n\t\tgroups.forEach(group =>{\n\t\t\tgetFiltredItems(group);\n\t\t})\n\n\n\t\treturn filtredItemList;\n\t}\n\n\n\tgetItemPrice(itemId){\n\t\tconst price = this.item_prices.find(itemPrice => itemPrice.item_code == itemId)\n\t\treturn price ? price.price_list_rate  : 0\n\t}\n\n}\n", "\npos_ar.PointOfSale.pos_customer_box = class{\n\n\tconstructor(\n\t\twrapper,\n\t\tcustomersList,\n\t\tonSync,\n\t\tonClosePOS\n\t){\n\t\tthis.wrapper        = wrapper ;\n\t\tthis.customers_list = customersList ;\n\t\tthis.on_sync        = onSync ;\n\t\tthis.on_close_pos   = onClosePOS;\n\n\t\t//local\n\t\tthis.online  = true    ;\n\t\tthis.show_menu = false ;\n\t\tthis.start_work();\n\t}\n\n\n\n\tstart_work(){\n\t\tthis.prepare_customer_box();\n\t\tthis.setCustomersInList();\n\t\tthis.setListeners();\n\t}\n\n\tprepare_customer_box(){\n\n\t\tthis.wrapper.append('<div id=\"ActionsContainerBox\" class=\"rowBox align_center\">');\n\t\tthis.actionContainer = this.wrapper.find('#ActionsContainerBox');\n\n\t\tthis.actionContainer.append('<div id=\"CustomerBox\" class=\"rowBox align_center\">');\n\t\tthis.actionContainer.append('<div id=\"MenuBox\"     class=\"rowBox centerItem\">');\n\n\n\t\tthis.menu = this.actionContainer.find('#MenuBox')\n\t\tthis.menu.append('<img src=\"/assets/pos_ar/images/menu.png\" alt=\"Menu\" id=\"MenuBtn\" >')\n\t\tthis.menu.append('<div id=\"menuItemsContainer\"     class=\"columnBox\">');\n\n\t\tthis.menuItemsContainer = this.actionContainer.find('#menuItemsContainer')\n\t\tthis.menuItemsContainer.append('<div id=\"posInvoiceMenuItem\" class=\"menuItem\">Recent POS Invoices</div>')\n\t\tthis.menuItemsContainer.append('<div id=\"closePosMenuItem\"   class=\"menuItem\">Close the POS</div>')\n\t\tthis.menuItemsContainer.append('<div id=\"settingMenuItem\"    class=\"menuItem\">Setting</div>')\n\n\t\tthis.pos_invoices = this.menuItemsContainer.find('#posInvoiceMenuItem')\n\t\tthis.close_pos    = this.menuItemsContainer.find('#closePosMenuItem')\n\t\tthis.setting      = this.menuItemsContainer.find('#settingMenuItem')\n\n\t\tthis.customerBox = this.actionContainer.find('#CustomerBox');\n\t\tthis.customerBox.append('<input list=\"CustomerList\"  id=\"CustomerInput\" name=\"Customer\" placeHolder=\"Enter the customer\">')\n\t\tthis.customerBox.append('<datalist id=\"CustomerList\"></datalist>')\n\t\tthis.customerBox.append('<div id=\"syncBtn\">Sync</div>')\n\n\t}\n\n\n\tsetCustomersInList(){\n\n\t\tconst customerList_html = document.getElementById(\"CustomerList\");\n\t\tcustomerList_html.innerHTML = \"\" ;\n\n\t\tthis.customers_list.forEach(customer =>{\n\t\t\tconst option = document.createElement(\"option\");\n\t\t\toption.value = customer.name;\n\t\t\toption.textContent = customer.customer_name;\n\t\t\tcustomerList_html.appendChild(option);\n\t\t})\n\t}\n\n\tsetListeners(){\n\n\t\tthis.customerBox.find('#syncBtn').on('click' , (event)=>{\n\t\t\tthis.on_sync();\n\t\t})\n\n\t\tthis.close_pos.on('click' , (event)=>{\n\t\t\tthis.on_close_pos();\n\t\t})\n\n\t\tthis.menu.on('click' , (event)=>{\n\n\t\t\tif(this.show_menu){\n\t\t\t\tthis.show_menu = !this.show_menu\n\t\t\t\tthis.menuItemsContainer.css('visibility' , 'hidden')\n\t\t\t\tthis.menuItemsContainer.css('opacity' , '0')\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.show_menu = !this.show_menu\n\t\t\t\tthis.menuItemsContainer.css('visibility' , 'visible')\n\t\t\t\tthis.menuItemsContainer.css('opacity' , '1')\n\t\t\t}\n\n\t\t})\n\n\t}\n\n}\n", "\npos_ar.PointOfSale.pos_selected_item_cart = class{\n\n\n\tconstructor(\n\t\twrapper          ,\n\t\tselectedItemMaps ,\n\t\tselectedTab      ,\n\t\tselectedItem     ,\n\t\tselectedField    ,\n\t\tonSelectedItemClick,\n\t\tonTabClick       ,\n\t\tonKeyPressed     ,\n\t\tonCheckoutClick  ,\n\t){\n\t\tthis.wrapper                 = wrapper;\n\t\tthis.selected_item_maps      = selectedItemMaps;\n\t\tthis.selected_tab            = selectedTab     ;\n\t\tthis.selected_item           = selectedItem    ;\n\t\tthis.selected_field          = selectedField   ;\n\t\tthis.on_key_pressed          = onKeyPressed    ;\n\t\tthis.on_checkout_click       = onCheckoutClick ;\n\t\tthis.on_selected_item_click  = onSelectedItemClick;\n\t\tthis.on_tab_click            = onTabClick      ;\n\n\n\t\tthis.counter = 1 ;\n\n\t\tthis.start_work();\n\t}\n\n\n\n\t// start the class function\n\tstart_work(){\n\t\tthis.prepare_selected_item_cart();\n\t\tthis.setButtonsListeners();\n\t\tthis.setListener()\n\t}\n\n\t/********************************* ui *****************************************/\n\n\tprepare_selected_item_cart(){\n\n\t\tthis.wrapper.append('<div id=\"tabs\"    class=\"rowBox\"><div id=\"tabs_container\" class=\"rowBox\"></div></div>')\n\t\tthis.wrapper.append('<div id=\"CartBox\" class=\"columnBox\"></div>')\n\n\n\t\tthis.tabs_bar       = this.wrapper.find(\"#tabs\")\n\t\tthis.tabs_container = this.tabs_bar.find('#tabs_container')\n\t\tthis.cartBox        = this.wrapper.find(\"#CartBox\")\n\n\n\t\tthis.tabs_container.append('<div class=\"tab selected\">C1</div>')\n\t\tthis.tabs_bar.append('<div id=\"addTabBtn\" class=\"tab unselected\">+</div>')\n\n\t\tthis.add_tab_button = this.tabs_bar.find('#addTabBtn')\n\n\t\tthis.cartBox.append('<div id=\"CartBoxTopBar\" class=\" rowBox align_center  row_sbtw\"><div>')\n\t\tthis.cartBox.append('<div id=\"cartHeader\" class=\"rowBox row_sbtw align_center\"></div>')\n\t\tthis.cartBox.append('<div id=\"selectedItemsContainer\" class=\"columnBox\"></div>')\n\t\tthis.cartBox.append('<div id=\"cartFooter\" class=\"columnBox\"></div>')\n\n\t\tthis.cartTopBar = this.cartBox.find('#CartBoxTopBar')\n\t\tthis.cartTopBar.append('<h4 class=\"CartTitle\">Item Cart</h4>')\n\t\tthis.cartTopBar.append('<div id=\"selectedItemsPriceListInput\"></div>')\n\n\t\tthis.priceListInput = this.cartTopBar.find(\"#selectedItemsPriceListInput\")\n\t\tthis.priceListInput.append('<input list=\"PriceList\"  id=\"PriceListInput\" name=\"PriceList\" placeHolder=\"Choice a Price list\">')\n\t\tthis.priceListInput.append(' <datalist id=\"PriceList\"></datalist>')\n\n\t\tthis.cartHeader = this.cartBox.find('#cartHeader')\n\t\tthis.cartHeader.append('<div><h6>Item</h6></div>')\n\t\tthis.cartHeader.append('<div id=\"cartHeaderTitles\" class=\"rowBox\"></div>')\n\n\t\tthis.cartHeaderTitles = this.cartHeader.find('#cartHeaderTitles')\n\t\tthis.cartHeaderTitles.append('<div id=\"quantityTitle\"><h6>Quantity</h6></div>')\n\t\tthis.cartHeaderTitles.append('<div id=\"amountTitle\">  <h6>Amount  </h6></div>')\n\n\t\tthis.selectedItemContainer = this.cartBox.find('#selectedItemsContainer')\n\n\n\n\n\t\tthis.cartFooter = this.cartBox.find('#cartFooter')\n\t\tthis.cartFooter.append('<div id=\"cartDetails\" class=\"columnBox\"></div>')\n\t\tthis.cartFooter.append('<div id=\"editSelectedItemCart\"></div>')\n\t\tthis.cartFooter.append('<button type=\"button\" id=\"checkoutBtn\"> Checkout </button>')\n\n\t\tthis.cartDetails = this.cartFooter.find('#cartDetails')\n\t\tthis.cartDetails.append('<div id=\"discount\" class=\"rowBox align_center row_sbtw\"></div>')\n\t\tthis.cartDetails.append('<div id=\"totalQuantity\" class=\"rowBox align_center row_sbtw\"></div>')\n\t\tthis.cartDetails.append('<div id=\"netTotal\" class=\"rowBox align_center row_sbtw\"></div>')\n\t\tthis.cartDetails.append('<div id=\"grandTotal\" class=\"rowBox align_center row_sbtw\"></div>')\n\n\t\tthis.discount      = this.cartDetails.find('#discount')\n\t\tthis.discount.append('<div id=\"addDiscountTitle\">Add Discount</div>')\n\t\tthis.discount.append('<div id=\"addDiscountValue\"></div>')\n\n\t\tthis.totalQuantity = this.cartDetails.find('#totalQuantity')\n\t\tthis.totalQuantity.append('<div id=\"totalQuantityTitle\">Total Quantity</div>')\n\t\tthis.totalQuantity.append('<div id=\"totalQuantityValue\">0</div>')\n\n\t\tthis.netTotal      = this.cartDetails.find('#netTotal')\n\t\tthis.netTotal.append('<div id=\"netTotalTitle\">Net Total</div>')\n\t\tthis.netTotal.append('<div id=\"netTotalValue\">0.00</div>')\n\n\t\tthis.grandTotal    = this.cartDetails.find('#grandTotal')\n\t\tthis.grandTotal.append('<div id=\"grandTotalTitle\">Grand Total</div>')\n\t\tthis.grandTotal.append('<div id=\"grandTotalValue\">0.00</div>')\n\n\t\tthis.editSelectedItem = this.cartFooter.find('#editSelectedItemCart')\n\t\tthis.editSelectedItem.append('<div class=\"grid-container\">')\n\n\t\tthis.buttonsContainer = this.editSelectedItem.find('.grid-container')\n\t\tthis.buttonsContainer.append('<button id=\"key_1\"        class=\"grid-item\">1</button>')\n\t\tthis.buttonsContainer.append('<button id=\"key_2\"        class=\"grid-item\">2</button>')\n\t\tthis.buttonsContainer.append('<button id=\"key_3\"        class=\"grid-item\">3</button>')\n\t\tthis.buttonsContainer.append('<button id=\"key_quantity\" class=\"grid-item\">Quantity</button>')\n\t\tthis.buttonsContainer.append('<button id=\"key_4\"        class=\"grid-item\">4</button>')\n\t\tthis.buttonsContainer.append('<button id=\"key_5\"        class=\"grid-item\">5</button>')\n\t\tthis.buttonsContainer.append('<button id=\"key_6\"        class=\"grid-item\">6</button>')\n\t\tthis.buttonsContainer.append('<button id=\"key_rate\"     class=\"grid-item\">Rate</button>')\n\t\tthis.buttonsContainer.append('<button id=\"key_7\"        class=\"grid-item\">7</button>')\n\t\tthis.buttonsContainer.append('<button id=\"key_8\"        class=\"grid-item\">8</button>')\n\t\tthis.buttonsContainer.append('<button id=\"key_9\"        class=\"grid-item\">9</button>')\n\t\tthis.buttonsContainer.append('<button id=\"key_discount\" class=\"grid-item\">Discount</button>')\n\t\tthis.buttonsContainer.append('<button id=\"key_point\"    class=\"grid-item\">.</button>')\n\t\tthis.buttonsContainer.append('<button id=\"key_0\"        class=\"grid-item\">0</button>')\n\t\tthis.buttonsContainer.append('<button id=\"key_delete\"   class=\"grid-item\">Delete</button>')\n\t\tthis.buttonsContainer.append('<button id=\"key_remove\"   class=\"grid-item\" style=\"color:red;font-weight:700;\">Remove</button>')\n\n\t\tthis.checkoutBtn = this.cartFooter.find('#checkoutBtn')\n\t\tthis.checkoutBtn.on('mousedown' , event =>{\n\t\t\tthis.on_checkout_click();\n\t\t})\n\t}\n\n\n\n\trefreshTabs(){\n\t\t//clear the tabs_container\n\t\tthis.tabs_container.empty()\n\n\t\tfor(let key of this.selected_item_maps.keys() ){\n\t\t\tif(key == this.selected_tab.tabName){\n\t\t\t\tthis.tabs_container.append(`<div class=\"tab selected\">${key}</div>`)\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.tabs_container.append(`<div class=\"tab\">${key}</div>`)\n\t\t\t}\n\t\t}\n\n\t\tthis.tabs_container.find(\".tab\").on('click' , (event)=>{\n\t\t\tconst clickedTab = $(event.target).text()\n\n\t\t\tthis.selected_tab.tabName = clickedTab\n\n\t\t\t//update UI\n\t\t\tthis.refreshTabs();\n\t\t\tthis.refreshSelectedItem();\n\t\t\tthis.calculateNetTotal();\n\t\t\tthis.calculateQnatity();\n\t\t\tthis.calculateGrandTotal();\n\n\t\t\tthis.on_tab_click(clickedTab);\n\n\t\t\tconsole.log(\"clicked tab ==> \" , clickedTab)\n\t\t})\n\t}\n\n\trefreshSelectedItem(){\n\n\n\t\tconst selectedItemsContainer = document.getElementById(\"selectedItemsContainer\");\n\t\tselectedItemsContainer.innerHTML = \"\";\n\n\t\tconsole.log(\"debuging \" , this.selected_tab)\n\t\tconsole.log(\"selected map \" , this.selected_item_maps)\n\n\t\tthis.selected_item_maps.get(this.selected_tab.tabName).forEach((item,itemId) =>{\n\t\t\tconst itemElement   = document.createElement(\"div\");\n\t\t\tconst leftGroup     = document.createElement(\"div\");\n\t\t\tconst rightGroup    = document.createElement(\"div\");\n\t\t\tconst itemName      = document.createElement(\"h5\") ;\n\t\t\tconst itemQuantity  = document.createElement(\"div\") ;\n\t\t\tconst itemPrice     = document.createElement(\"div\") ;\n\n\t\t\t//image\n\t\t\t//check if there is an image or not\n\t\t\tif(item.image){\n\t\t\t\tconst itemImage   = document.createElement(\"img\");\n\t                        itemImage.src = item.image ;\n        \t                itemImage.classList.add(\"selectedItemImage\");\n                \t        leftGroup.appendChild(itemImage);\n\t\t\t}else{\n\t\t\t\tconst itemImageHolder = document.createElement(\"div\");\n\t\t\t\tconst itemImageLatter = document.createElement(\"div\");\n\n\t\t\t\titemImageHolder.classList.add(\"selectedItemImage\" , \"rowBox\" , \"centerItem\");\n\n\t\t\t\titemImageLatter.textContent = item.name[0]\n\t\t\t\titemImageHolder.appendChild(itemImageLatter);\n\t\t\t\tleftGroup.appendChild(itemImageHolder);\n\t\t\t}\n\n\n\t\t\t//name\n\t\t\titemName.textContent = item.name;\n\t\t\titemName.classList.add(\"selectedItemName\");\n\t\t\tleftGroup.appendChild(itemName);\n\n\t\t\t//quantity\n\t\t\titemQuantity.textContent = item.quantity\n\t\t\titemQuantity.classList.add(\"itemQuantity\");\n\t\t\trightGroup.appendChild(itemQuantity);\n\t\t\t//price\n\t\t\titemPrice.textContent = item.amount + \" DA\"\n\t\t\titemPrice.classList.add(\"itemPrice\");\n\t\t\trightGroup.appendChild(itemPrice);\n\n\t\t\t//leftGroup\n\t\t\tleftGroup.classList.add(\"rowBox\" , \"align_center\" , \"leftGroup\")\n\t\t\titemElement.appendChild(leftGroup);\n\n\t\t\t//rightGroup\n\t\t\trightGroup.classList.add(\"rowBox\" , \"align_center\" , \"rightGroup\")\n\t\t\titemElement.appendChild(rightGroup);\n\n\n\t\t\t//item\n\t\t\titemElement.classList.add(\"rowBox\" , \"align_center\" , \"row_sbtw\" , \"ItemElement\" , \"pointer\")\n\t\t\tif(itemId == this.selected_item.name)\n\t\t\t\titemElement.classList.add(\"selected\")\n\t\t\titemElement.addEventListener(\"click\" , event =>{\n\t\t\t\tconsole.log(\"we are click\")\n\t\t\t\tthis.makeItemHighlight(itemElement)\n\t\t\t\tthis.on_selected_item_click(item);\n\t\t\t})\n\n\t\t\tselectedItemsContainer.appendChild(itemElement);\n\n\t\t})\n\n\t\tthis.calculateNetTotal();\n\t\tthis.calculateQnatity();\n\t\tthis.calculateGrandTotal();\n\t}\n\n\tcreateNewTab(){\n\t\t\tthis.counter += 1 ;\n\t\t\tthis.selected_item_maps.set(`C${this.counter}` , new Map())\n\t\t\tthis.selected_tab.tabName = `C${this.counter}`\n\n\t\t\t//update UI\n\t\t\tthis.refreshTabs()\n\t\t\tthis.refreshSelectedItem()\n\t}\n\n\tshowKeyboard(){\n\t\tthis.editSelectedItem.css('display','flex')\n\t}\n\n\thideKeyboard(){\n\t\tthis.editSelectedItem.css('display','none')\n\t}\n\n\tsetKeyboardOrientation( orientation ){\n\n\t\tconst discount   = this.cartDetails.find('#discount')\n\t\tconst quantity   = this.cartDetails.find('#totalQuantity')\n\t\tconst netTotal   = this.cartDetails.find('#netTotal')\n\t\tconst grandTotal = this.cartDetails.find('#grandTotal')\n\n\t\tif(orientation == \"landscape\"){\n\t\t\tthis.cartDetails.css('display' , 'flex')\n\t\t\tthis.cartDetails.addClass('rowBox align_center')\n\t\t\tthis.cartDetails.removeClass('columnBox')\n\t\t\tdiscount.css('display' , 'none')\n\n\t\t\t//make the text smaller\n\t\t\tquantity.css('font-size' , 'smaller')\n\t\t\tnetTotal.css('font-size' , 'smaller')\n\t\t\tgrandTotal.css('font-size' , 'small')\n\t\t\tgrandTotal.css('font-weight' , '500')\n\t\t}\n\t\telse{\n\t\t\tthis.cartDetails.addClass('columnBox')\n\t\t\tthis.cartDetails.removeClass('rowBox')\n\t\t\tdiscount.css('display','flex')\n\n\t\t\t//reset\n\t\t\tquantity.css('font-size'   , 'small' )\n\t\t\tnetTotal.css('font-size'   , 'small' )\n\t\t\tgrandTotal.css('font-size' , 'larger')\n\t\t\tgrandTotal.css('font-weight' , '700' )\n\t\t}\n\t}\n\n\tmakeSelectedButtonHighlighted(){\n\t\tconst quantityButton = this.buttonsContainer.find('#key_quantity')\n\t\tconst rateButton     = this.buttonsContainer.find('#key_rate')\n\t\tconst discountButton = this.buttonsContainer.find('#key_discount')\n\n\t\tif(this.selected_field.field_name == \"quantity\"){\n\t\t\tquantityButton.addClass('selected')\n\t\t\trateButton.removeClass('selected')\n\t\t\tdiscountButton.removeClass('selected')\n\t\t}\n\t\telse if(this.selected_field.field_name == \"rate\"){\n\t\t\tquantityButton.removeClass('selected')\n\t\t\trateButton.addClass('selected')\n\t\t\tdiscountButton.removeClass('selected')\n\t\t}\n\t\telse if(this.selected_field.field_name == \"discount\"){\n\t\t\tquantityButton.removeClass('selected')\n\t\t\trateButton.removeClass('selected')\n\t\t\tdiscountButton.addClass('selected')\n\t\t}\n\t\telse{\n\t\t\tquantityButton.removeClass('selected')\n\t\t\trateButton.removeClass('selected')\n\t\t\tdiscountButton.removeClass('selected')\n\t\t}\n\n\t}\n\n\t/************************  set listeners  ***************************/\n\n\tsetButtonsListeners(){\n\t\tconst key_0        = this.buttonsContainer.find('#key_0')\n\t\tconst key_1        = this.buttonsContainer.find('#key_1')\n\t\tconst key_2        = this.buttonsContainer.find('#key_2')\n\t\tconst key_3        = this.buttonsContainer.find('#key_3')\n\t\tconst key_4        = this.buttonsContainer.find('#key_4')\n\t\tconst key_5        = this.buttonsContainer.find('#key_5')\n\t\tconst key_6        = this.buttonsContainer.find('#key_6')\n\t\tconst key_7        = this.buttonsContainer.find('#key_7')\n\t\tconst key_8        = this.buttonsContainer.find('#key_8')\n\t\tconst key_9        = this.buttonsContainer.find('#key_9')\n\t\tconst key_quantity = this.buttonsContainer.find('#key_quantity')\n\t\tconst key_discount = this.buttonsContainer.find('#key_discount')\n\t\tconst key_rate     = this.buttonsContainer.find('#key_rate')\n\t\tconst key_remove   = this.buttonsContainer.find('#key_remove')\n\t\tconst key_delete   = this.buttonsContainer.find('#key_delete')\n\t\tconst key_point    = this.buttonsContainer.find('#key_point')\n\n\t\tlet keys = [key_0 , key_1 , key_2 , key_3 , key_4 , key_5 , key_6 , key_7 , key_8 , key_9 , key_quantity , key_discount , key_rate , key_remove , key_delete , key_point]\n\n\n\t\tkeys.forEach(key =>{\n\t\t\tkey.on('mousedown' , (event)=>{\n\t\t\t\tevent.preventDefault();\n\t\t\t\tconst keyContent = key.text();\n\n\t\t\t\tif(!isNaN(keyContent)){\n\t\t\t\t\tthis.on_key_pressed( \"addToField\" , key.text())\n\t\t\t\t}\n\t\t\t\telse if(keyContent == \".\"){\n\t\t\t\t\tthis.on_key_pressed( \"addToField\" , key.text())\n\t\t\t\t}\n\t\t\t\telse if(keyContent == \"Quantity\"){\n\t\t\t\t\tthis.on_key_pressed( \"quantity\" , null)\n\t\t\t\t}\n\t\t\t\telse if(keyContent == \"Rate\"){\n\t\t\t\t\tthis.on_key_pressed( \"rate\" , null)\n\t\t\t\t}\n\t\t\t\telse if(keyContent == \"Discount\"){\n\t\t\t\t\tthis.on_key_pressed( \"discount\" , null)\n\t\t\t\t}\n\t\t\t\telse if(keyContent == \"Remove\"){\n\t\t\t\t\tthis.on_key_pressed( \"remove\" , null)\n\t\t\t\t}\n\n\t\t\t})\n\t\t})\n\n\t}\n\n\tsetListener(){\n\n\t\tthis.add_tab_button.on('mousedown' , (event)=>{\n\t\t\tthis.counter += 1 ;\n\t\t\tthis.selected_item_maps.set(`C${this.counter}` , new Map())\n\t\t\tthis.selected_tab.tabName = `C${this.counter}`\n\n\t\t\t//update UI\n\t\t\tthis.refreshTabs()\n\t\t\tthis.refreshSelectedItem()\n\t\t\tthis.on_tab_click();\n\t\t\tconsole.log(\"add Tab new map ==> \" , this.selected_item_maps)\n\t\t})\n\n\t}\n\n\t/*************************  tools  **********************************/\n\n\n\tcalculateNetTotal(){\n\t\tlet netTotal = 0;\n\t\tthis.selected_item_maps.get(this.selected_tab.tabName).forEach((value,key) =>{\n\t\t\tnetTotal += value.quantity * value.amount\n\t\t})\n\n\t\tconst netTotal_HTML = document.getElementById(\"netTotalValue\");\n\t\tnetTotal_HTML.textContent = netTotal;\n\t}\n\n\tcalculateQnatity(){\n\t\tlet quantity = 0;\n\t\tthis.selected_item_maps.get(this.selected_tab.tabName).forEach((value,key) =>{\n\t\t\tquantity += value.quantity\n\t\t})\n\n\t\tconst totalQuantity_HTML = document.getElementById(\"totalQuantityValue\");\n\t\ttotalQuantity_HTML.textContent = quantity;\n\t}\n\n\tcalculateGrandTotal(){\n\t\tlet grandTotal = 0;\n\t\tthis.selected_item_maps.get(this.selected_tab.tabName).forEach((value,key) =>{\n\t\t\tgrandTotal += value.quantity * value.amount\n\t\t})\n\n\t\tconst grandTotal_HTML = document.getElementById(\"grandTotalValue\");\n\t\tgrandTotal_HTML.textContent = grandTotal;\n\t}\n\n\tmakeItemHighlight(itemElement){\n\t\tconst selectedItemsContainer = document.getElementById(\"selectedItemsContainer\");\n\t\tconst selectedItems = selectedItemsContainer.querySelectorAll(\".selected\")\n\t\tselectedItems.forEach(selectedItem=>{\n\t\t\tselectedItem.classList.remove(\"selected\");\n\t\t})\n\t\titemElement.classList.add(\"selected\")\n\t}\n\n\tcleanHeighlight(){\n\t\tconst selectedItemsContainer = document.getElementById(\"selectedItemsContainer\");\n\t\tconst selectedItems = selectedItemsContainer.querySelectorAll(\".selected\")\n\t\tselectedItems.forEach(selectedItem=>{\n\t\t\tselectedItem.classList.remove(\"selected\");\n\t\t})\n\n\t}\n\n\n\n}\n", "\npos_ar.PointOfSale.pos_item_details = class{\n\n\tconstructor(\n\t\twrapper,\n\t\twarehouse,\n\t\tpriceLists,\n\t\titemPrices,\n\t\tbinList,\n\t\tselectedItem,\n\t\tselectedField,\n\t\tonInput,\n\t\tonClose,\n\t){\n\t\tconsole.log(\"hello from item_details 0\")\n\t\tthis.wrapper        = wrapper   ;\n\t\tthis.warehouse      = warehouse ;\n\t\tthis.price_lists    = priceLists;\n\t\tthis.item_prices    = itemPrices;\n\t\tthis.selected_item  = selectedItem ;\n\t\tthis.selected_field = selectedField;\n\t\tthis.on_input       = onInput;\n\t\tthis.on_close_cart  = onClose;\n\t\tthis.bin_list       = binList;\n\n\t\tconsole.log(\"start with : \" , warehouse)\n\n\t\tthis.start_the_work();\n\t}\n\n\n\t// start function\n\n\tstart_the_work(){\n\t\tthis.prepare_item_details_cart();\n\t\tthis.setDetailsFieldsListeners();\n\t}\n\n\n\t/****************************    ui functions   **********************************/\n\n        prepare_item_details_cart(){\n                this.wrapper.append('<div id=\"itemDetailsCart\" class=\"columnBox align_center\"><div>')\n\n                this.item_details_cart = this.wrapper.find(\"#itemDetailsCart\")\n                this.item_details_cart.append('<div id=\"itemDetailsCartHeader\" class=\"rowBox header align_center row_sbtw\"></div>')\n\n                this.cart_header = this.item_details_cart.find('#itemDetailsCartHeader')\n                this.cart_header.append('<h4 class=\"CartTitle\">Item Details</h4>')\n                this.cart_header.append('<img src=\"/assets/pos_ar/images/cancel.png\" alt=\"Cancel Button\" id=\"itemDetailsCartXBtn\" class=\"xBtn\">')\n\n                this.close_btn = this.cart_header.find(\"#itemDetailsCartXBtn\").on(\"click\", (event) =>{\n                        this.on_close_cart();\n                })\n\n\t\tthis.item_details_cart.append('<div id=\"itemDetailsHeader\" class=\"rowBox\"></div>')\n\n\t\tthis.header_details = this.item_details_cart.find('#itemDetailsHeader')\n\t\tthis.header_details.append('<div id=\"detailsItemImage\" class=\"rowBox centerItem\"></div>')\n\t\tthis.header_details.append('<div id=\"price_and_name\" class=\"columnBox\"></div>')\n\n\t\tthis.price_and_name_details = this.header_details.find('#price_and_name')\n\t\tthis.price_and_name_details.append('<div id=\"detailsItemName\" class=\"rowBox align_center\"></div>')\n\t\tthis.price_and_name_details.append('<div id=\"detailsItemGroupWarhouseContainer\" class=\"rowBox align_center row_sa\"></divr>')\n\n\t\tthis.item_group_warehouse_details = this.price_and_name_details.find('#detailsItemGroupWarhouseContainer')\n\t\tthis.item_group_warehouse_details.append('<div id=\"detailsItemGroup\" class=\"rowBox align_center\">Group : ...</div>')\n\t\tthis.item_group_warehouse_details.append('<div id=\"detailsItemWarehouse\" class=\"rowBox align_center\">Warehouse : ...</div>')\n\n\t\tthis.item_details_cart.append('<div id=\"itemDetailsAll\"  class=\"rowBox\"></div>')\n\n\t\tthis.details_all = this.item_details_cart.find('#itemDetailsAll')\n\t\tthis.details_all.append('<div id=\"itemDetails_C1\" class=\"columnBox\"></div>')\n\n\t\tthis.c1 = this.details_all.find('#itemDetails_C1')\n\t\tthis.c1.append('<div class=\"columnBox\"><label for=\"itemDetailsQuantityInput\">Quantity</label><input type=\"float\" id=\"itemDetailsQuantityInput\" class=\"pointerCursor\"></div>')\n\t\tthis.c1.append('<div class=\"columnBox\"><label for=\"itemDetailsRateInput\">Rate</label><input type=\"float\" id=\"itemDetailsRateInput\" class=\"pointerCursor\"></div>')\n\t\tthis.c1.append('<div class=\"columnBox\"><label for=\"itemDetailsDiscountInput\">Discount (%)</label><input type=\"float\" id=\"itemDetailsDiscountInput\" class=\"pointerCursor\"></div>')\n\t\tthis.c1.append('<div class=\"columnBox\"><label for=\"itemDetailsAvailableInput\">Available Qty at Warehouse</label><input type=\"float\" id=\"itemDetailsAvailableInput\" disabled></div>')\n\n\n\t\tthis.details_all.append('<div id=\"itemDetails_C2\" class=\"columnBox\"></div>')\n\n\t\tthis.c2 = this.details_all.find('#itemDetails_C2')\n\t\tthis.c2.append('<div class=\"columnBox\"><label for=\"itemDetailsUomInput\">UOM *</label><input type=\"text\" id=\"itemDetailsUomInput\"  disabled></div>')\n\t\tthis.c2.append('<div class=\"columnBox\"><label for=\"detailsPriceList\">Price List *</label><input list=\"detailsPriceList\" id=\"detailsItemPriceListInput\" class =\"rowBox align_center pointerCursor\"><datalist id=\"detailsPriceList\"><option>fetching Price Lists ...</option></datalist></div>')\n\t\tthis.c2.append('<div class=\"columnBox\"><label for=\"itemDetailsDiscountMontantInput\">Discount (montant)</label><input type=\"float\" id=\"itemDetailsDiscountMontantInput\" class=\"pointerCursor\"></div>')\n\t\tthis.c2.append('<div class=\"columnBox\"><label for=\"itemDetailsPriceListRateInput\">Price List Rate</label><input type=\"text\" id=\"itemDetailsPriceListRateInput\" disabled></div>')\n\n\n\n\t}\n\n\trefreshDate(item){\n\n\t\tconsole.log(\"start ref\")\n\t\tconst imageContainer    = document.getElementById(\"detailsItemImage\") ;\n\t\tconst name  = document.getElementById(\"detailsItemName\");\n\t\tconst warehouse     = document.getElementById(\"detailsItemWarehouse\");\n\t\tconst itemGroup     = document.getElementById(\"detailsItemGroup\");\n\n\t\tconst quantity             = document.getElementById(\"itemDetailsQuantityInput\");\n\t\tconst rate                 = document.getElementById(\"itemDetailsRateInput\");\n\t\tconst discount_percentage  = document.getElementById(\"itemDetailsDiscountInput\");\n\t\tconst discount_amount      = document.getElementById(\"itemDetailsDiscountMontantInput\");\n\t\tconst available            = document.getElementById(\"itemDetailsAvailableInput\");\n\n\t\tconst uom           = document.getElementById(\"itemDetailsUomInput\");\n\t\tconst priceList     = document.getElementById(\"detailsItemPriceListInput\");\n\t\tconst priceListRate = document.getElementById(\"itemDetailsPriceListRateInput\");\n\n\t\t//populate\n\t\tif(item.image){\n\t\t\tconst image = document.createElement(\"img\");\n\t\t\timage.src = item.image;\n\t\t\timageContainer.innerHTML = \"\";\n\t\t\timageContainer.appendChild(image);\n\t\t}\n\t\telse{\n\t\t\tconst image = document.createElement(\"div\");\n\t\t\timage.textContent = item.item_name[0];\n\t\t\timage.style.fontSize = \"xx-large\";\n\t\t\timage.style.fontWeight = \"700\";\n\t\t\timageContainer.innerHTML = \"\";\n\t\t\timageContainer.appendChild(image);\n\t\t}\n\n\t\t//name\n\t\tname.textContent  = item.item_name;\n\t\tname.classList.add(\"rowBox\" , \"align_center\");\n\n\n\t\t//quantity\n\t\tquantity.value = item.quantity\n\n\t\t//rate\n\t\trate.value = item.amount\n\n\t\t//discount\n\t\tdiscount_amount.value     = item.discount_amount ?? 0.00;\n\t\tdiscount_percentage.value = item.discount_percentage ?? 0.00;\n\n\n\t\t//available\n\t\tavailable.value = this.getQtyInWarehouse(item.name ,  this.warehouse)\n\n\n\t\t//uom\n\t\tuom.value = item.stock_uom\n\n\n\t\t//priceList\n\t\tpriceList.value = this.price_lists[0].price_list_name\n\t\t//warehouse\n\t\twarehouse.textContent = \"Warehouse : \" + this.warehouse\n\t\t//item group\n\t\titemGroup.textContent = \"Item Group : \" + item.item_group\n\n\t\t//priceListRate\n\t\tpriceListRate.value = this.getItemPrice(item.name) + \"DA\"\n\n\n\t\tconsole.log(\"end ref\")\n\n\n\t\t//hightlited fields\n\t\tthis.makeSelectedFieldHighlighted()\n\t\t//listeners\n\t\t//setItemDetailsFieldsListener()\n\t}\n\n\tshow_cart(){\n\t\tconsole.log('show 02')\n\t\tthis.item_details_cart.css(\"display\" , \"flex\");\n\t}\n\n\thide_cart(){\n\t\tconsole.log('hide 001')\n\t\tthis.item_details_cart.css(\"display\" , \"none\");\n\t}\n\n\tmakeSelectedFieldHighlighted(){\n\n\n\t\tif(this.selected_field.field_name == \"quantity\"){\n\t\t\tthis.c1.find('#itemDetailsQuantityInput').addClass('selected')\n\t\t\tthis.c1.find('#itemDetailsRateInput').removeClass('selected')\n\t\t\tthis.c1.find('#itemDetailsDiscountInput').removeClass('selected')\n\t\t}\n\t\telse if(this.selected_field.field_name == \"rate\"){\n\t\t\tthis.c1.find('#itemDetailsQuantityInput').removeClass('selected')\n\t\t\tthis.c1.find('#itemDetailsRateInput').addClass('selected')\n\t\t\tthis.c1.find('#itemDetailsDiscountInput').removeClass('selected')\n\t\t}\n\t\telse if(this.selected_field.field_name == \"discount_percentage\"){\n\t\t\tthis.c1.find('#itemDetailsQuantityInput').removeClass('selected')\n\t\t\tthis.c1.find('#itemDetailsRateInput').removeClass('selected')\n\t\t\tthis.c1.find('#itemDetailsDiscountInput').addClass('selected')\n\t\t}\n\t\telse{\n\t\t\tthis.c1.find('#itemDetailsQuantityInput').removeClass('selected')\n\t\t\tthis.c1.find('#itemDetailsRateInput').removeClass('selected')\n\t\t\tthis.c1.find('#itemDetailsDiscountInput').removeClass('selected')\n\t\t}\n\n\t}\n\n\n\trequestFocus(field){\n\t\tif(field == \"quantity\"){\n\t\t\tthis.c1.find('#itemDetailsQuantityInput').focus();\n\t\t}\n\t\telse if(field == \"rate\"){\n\t\t\tthis.c1.find('#itemDetailsRateInput').focus();\n\t\t}\n\t\telse if(field == \"discount_percentage\"){\n\t\t\tthis.c1.find('#itemDetailsDiscountInput').focus();\n\t\t}\n\t\telse if(field == \"discount_amount\"){\n\t\t\tthis.c1.find('#itemDetailsDiscountMontantInput').focus();\n\t\t}\n\t}\n\n\n/*\n\nelse if(keyContent == \".\" && !selectedField.value.includes(\".\")){\n                                        this.on_key_pressed( \"addToField\" , key.text())\n                                }\n\n*/\n\taddToField(field , value){\n\n\t\tconsole.log('field : ' , field , 'value : ' , value )\n\t\t\t\n\t\tif(field == \"quantity\"){\n\t\t\tthis.c1.find('#itemDetailsQuantityInput').val( (index,currentValue) =>{\n\t\t\t\tif(value == \".\" && currentValue.includes(\".\"))\n\t\t\t\t\treturn currentValue\n\t\t\t\telse\n\t\t\t\t\treturn currentValue + value\n\t\t\t})\n\t\t}\n\t\telse if(field == \"rate\"){\n\t\t\tthis.c1.find('#itemDetailsRateInput').val( (index,currentValue) =>{\n\t\t\t\tif(value == \".\" && currentValue.includes(\".\"))\n\t\t\t\t\treturn currentValue\n\t\t\t\telse\n\t\t\t\t\treturn currentValue + value\n\t\t\t})\n\t\t}\n\t\telse if(field == \"discount_percentage\"){\n\t\t\tthis.c1.find('#itemDetailsDiscountInput').val( (index,currentValue) =>{\n\t\t\t\tif(value == \".\" && currentValue.includes(\".\"))\n\t\t\t\t\treturn currentValue\n\t\t\t\telse\n\t\t\t\t\treturn currentValue + value\n\t\t\t})\n\n\t\t}\n\t\telse if(field == \"discount_amount\"){\n\t\t\tthis.c1.find('#itemDetailsDiscountInput').val( (index,currentValue) =>{\n\t\t\t\tif(value == \".\" && currentValue.includes(\".\"))\n\t\t\t\t\treturn currentValue\n\t\t\t\telse\n\t\t\t\t\treturn currentValue + value\n\t\t\t})\n\n\t\t}\n\n\t}\n\n\t/**************************  set listener  ****************************/\n\n\tsetDetailsFieldsListeners(){\n\n\t\tthis.quantityInput        = this.c1.find('#itemDetailsQuantityInput')\n\t\tthis.rateInput            = this.c1.find('#itemDetailsRateInput')\n\t\tthis.discountInput        = this.c1.find('#itemDetailsDiscountInput')\n\t\tthis.discountMontantInput = this.c2.find('#itemDetailsDiscountMontantInput')\n\n\t\t//quantity input\n\t\tthis.quantityInput.on('input' , (event)=>{\n\t\t\tconst value = event.target.value;\n\n\t\t\tif(value.length == 0){\n\t\t\t\tevent.target.value = 0\n\t\t\t}\n\t\t\telse if (!value.slice(0,-1).includes(\".\")  && value[value.length-1] == \".\"){\n\t\t\t\tevent.target.value = value\n\t\t\t}\n\t\t\telse if(value[value.length-1] == \".\"){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse if(value[value.length-1] == \" \"){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse if(isNaN(value[value.length-1])){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tevent.target.value = value\n\t\t\t}\n\n\t\t\t//new quantity\n\t\t\tlet newQuantity = parseFloat(this.quantityInput.val());\n\t\t\tif(isNaN(newQuantity)){\n\t\t\t\tconsole.warn(\"Invaide Quantity value =>\" , this.quantityInput.val())\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse if(newQuantity <= 0){\n\t\t\t\tnewQuantity = 0;\n\t\t\t}\n\n\t\t\tthis.on_input( \"input\" , \"quantity\" , newQuantity)\n\t\t})\n\n\t\tthis.quantityInput.on('focus' , (event)=>{\n\t\t\tthis.on_input( \"focus\" , \"quantity\" , null)\n\t\t})\n\n\t\tthis.quantityInput.on('blur' , (event)=>{\n\t\t\tthis.on_input( \"blur\" , \"quantity\" , null)\n\t\t})\n\n\t\t//rate field listeners\n\t\tthis.rateInput.on('input' , (event)=>{\n\t\t\tconst value = event.target.value ;\n\n\t\t\tif(value.length == 0){\n\t\t\t\tevent.target.value = 0\n\t\t\t}\n\t\t\telse if (!value.slice(0,-1).includes(\".\")  && value[value.length-1] == \".\"){\n\t\t\t\tevent.target.value = value\n\t\t\t}\n\t\t\telse if(value[value.length-1] == \".\"){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse if(isNaN(value[value.length-1])){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tevent.target.value = value;\n\t\t\t}\n\n\t\t\tlet newRate = parseFloat(this.rateInput.val());\n\n\t\t\tconsole.log(\"new rate : \" , newRate)\n\t\t\tif(isNaN(newRate)){\n\t\t\t\tconsole.warn(\"Invalide Rate value\")\n\t\t\t\treturn;\n\t\t\t}\n\n\n\t\t\tthis.on_input( \"input\" , \"rate\" , newRate)\n\t\t})\n\t\tthis.rateInput.on('focus' , (event)=>{\n\t\t\tthis.on_input( \"focus\" , \"rate\" , null)\n\t\t})\n\t\tthis.rateInput.on('blur' , (event)=>{\n\t\t\tthis.on_input( \"blur\" , \"rate\" , null)\n\t\t})\n\n\n\n\n\t\t//discount field listener\n\t\tthis.discountInput.on('input' , (event)=>{\n\t\t\tconst value = event.target.value ;\n\n\t\t\tif(value.length == 0){\n\t\t\t\tevent.target.value = 0;\n\t\t\t}\n\t\t\telse if(!value.slice(0,-1).includes(\".\")  && value[value.length-1] == \".\"){\n\t\t\t\tevent.target.value = value;\n\t\t\t}\n\t\t\telse if(value[value.length-1] == \".\"){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse if(isNaN(value[value.length-1])){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tevent.target.value = value ;\n\t\t\t}\n\n\t\t\tlet newDiscount = this.discountInput.val();\n\n\t\t\tconsole.log(\"the new value \" , newDiscount)\n\n\t\t\tif(isNaN(newDiscount)){\n\t\t\t\tconsole.warn(\"Invalide discount value\")\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t//console.log(\"condition ==> \" , newDiscount<100 )\n\t\t\tif(newDiscount < 100){\n\t\t\t\tthis.on_input( \"input\" , \"discount_percentage\" , newDiscount)\n\t\t\t}\n\t\t\telse{\n\t\t\t\tevent.target.value = 100;\n\t\t\t\tthis.on_input( \"input\" , \"discount_percentage\" , 100)\n\t\t\t}\n\n\t\t})\n\n\t\tthis.discountInput.on('focus' , (event)=>{\n\t\t\tthis.on_input( \"focus\" , \"discount_percentage\" , null)\n\t\t})\n\n\t\tthis.discountInput.on('blur' , (event)=>{\n\t\t\tthis.on_input( \"blur\" , \"discount_percentage\" , null)\n\t\t})\n\n\n\t\t//discount field listener\n\t\tthis.discountMontantInput.on('input' , (event)=>{\n\t\t\tconst value = event.target.value ;\n\n\t\t\tif(value.length == 0){\n\t\t\t\tevent.target.value = 0;\n\t\t\t}\n\t\t\telse if(!value.slice(0,-1).includes(\".\")  && value[value.length-1] == \".\"){\n\t\t\t\tevent.target.value = value;\n\t\t\t}\n\t\t\telse if(value[value.length-1] == \".\"){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse if(isNaN(value[value.length-1])){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tevent.target.value = value ;\n\t\t\t}\n\n\t\t\tlet newDiscount = this.discountMontantInput.val();\n\n\t\t\tif(isNaN(newDiscount)){\n\t\t\t\tconsole.warn(\"Invalide discount value\")\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t//console.log(\"condition ==> \" , newDiscount<100 )\n\t\t\tthis.on_input( \"input\" , \"discount_amount\" , newDiscount)\n\n\t\t})\n\n\t\tthis.discountMontantInput.on('focus' , (event)=>{\n\t\t\tconsole.log(\"we are here\")\n\t\t\tthis.on_input( \"focus\" , \"discount_amount\" , null)\n\t\t})\n\n\t\tthis.discountMontantInput.on('blur' , (event)=>{\n\t\t\tthis.on_input( \"blur\" , \"discount_amount\" , null)\n\t\t})\n\n\t}\n\n\n\t/*************************** funs  ************************************/\n\n\tgetItemPrice(itemId){\n\t\tconst price = this.item_prices.find(itemPrice => itemPrice.item_code == itemId)\n\t\treturn price ? price.price_list_rate  : 0\n\t}\n\n\n\tgetQtyInWarehouse(itemId , warehouseId){\n\t\tconst bin = this.bin_list.find(bin => bin.item_code == itemId && bin.warehouse == warehouseId)\n\t\treturn bin ? bin.actual_qty : 0\n\t}\n\n\n}\n", "\n\npos_ar.PointOfSale.pos_payment_cart = class{\n\n\tconstructor(\n\t\twrapper,\n\t\tselectedItemMap,\n\t\tselectedTab,\n\t\tselectedPaymentMythod,\n\t\tonClose,\n\t\tonComplete\n\t){\n\t\tthis.wrapper                 = wrapper;\n\t\tthis.selected_item_map       = selectedItemMap;\n\t\tthis.selected_tab            = selectedTab;\n\t\tthis.selected_payment_method = selectedPaymentMythod;\n\t\tthis.on_close_cart           = onClose;\n\t\tthis.on_complete             = onComplete;\n\n\t\t//local\n\t\tthis.grand_total = 0 ;\n\t\tthis.paid_amount = 0 ;\n\t\tthis.to_change   = 0 ;\n\n\t\tthis.start_work();\n\t}\n\n\n\t/****************************************  UI ***********************************************/\n\n\tstart_work(){\n\n\t\tthis.prepare_payment_cart();\n\t\tthis.calculateGrandTotal()\n\t\tthis.setListeners()\n\t}\n\n\tprepare_payment_cart(){\n\t\tthis.wrapper.append('<div id=\"paymentMethodCart\" class=\"columnBox align_center\"></div>')\n\n\t\tthis.cart = this.wrapper.find('#paymentMethodCart')\n\t\tthis.cart.append('<div id=\"paymentMethodCartHeader\" class=\"rowBox header align_center row_sbtw\"></div>')\n\t\tthis.cart.append('<div id=\"paymentMethodContent\" class=\"columnBox align_center\"></div>')\n\t\tthis.cart.append('<div id=\"paymentMethodCartFooter\" class=\"columnBox align_center\"></div>')\n\n\t\tthis.cart_header  = this.cart.find('#paymentMethodCartHeader')\n\t\tthis.cart_content = this.cart.find('#paymentMethodContent')\n\t\tthis.cart_footer  = this.cart.find('#paymentMethodCartFooter')\n\n\t\tthis.cart_header.append('<h4 class=\"CartTitle\">Item Details</h4>')\n\t\tthis.cart_header.append('<img src=\"/assets/pos_ar/images/cancel.png\" alt=\"Cancel Button\" id=\"paymentMethodCartXBtn\" class=\"xBtn\">')\n\n\t\tthis.cart_header.find('#paymentMethodCartXBtn').on('click' , (event)=>{\n\t\t\tthis.on_close_cart();\n\t\t})\n\n\t\tthis.cart_content.append('<div id=\"paymentContentTopSection\" class=\"rowBox\"></div>')\n\t\tthis.cart_content.append('<div id=\"paymentContentBottomSection\" class=\"columnBox\"></div>')\n\n\t\tthis.cart_content_top_section    = this.cart_content.find('#paymentContentTopSection')\n\t\tthis.cart_content_bottom_section = this.cart_content.find('#paymentContentBottomSection')\n\n\t\tthis.cart_content_top_section.append('<div id=\"cashBox\" class=\"paymentMethodBox\"><div id=\"cashBoxTitle\" class=\"title\">Cash</div><input type=\"float\" id=\"cachInput\" value=\"0\"  ></div>')\n\t\tthis.cart_content_top_section.append('<div id=\"paymentOnTimeBox\" class=\"paymentMethodBox\"><div id=\"paymentOnTimeBoxTitle\" class=\"title\">On Time</div><input type=\"float\" id=\"paymentOnTimeInput\" value=\"0\" ></div>')\n\t\tthis.cart_content_top_section.append('<div id=\"redeemLoyaltyPoints\" class=\"paymentMethodBox\"><div id=\"redeemLoyaltyPointsTitle\" class=\"title\">Redeem Loyalty Points</div><input type=\"float\" id=\"RedeemLayoutPointsInput\" value=\"0\" disabled></div>')\n\n\t\tthis.cashBox          = this.cart_content_top_section.find(\"#cashBox\")\n\t\tthis.onTimeBox        = this.cart_content_top_section.find(\"#paymentOnTimeBox\")\n\t\tthis.redeemLoyaltyBox = this.cart_content_top_section.find(\"#redeemLoyaltyPoints\")\n\n\t\tthis.cart_content_bottom_section.append('<h4>Additional Information</h4>')\n\n\t\tthis.cart_footer.append('<div id=\"paymentDetailsContainer\" class=\"rowBox align_center\"></div>');\n\t\tthis.cart_footer.append('<button type=\"button\" id=\"completeOrderBtn\">Complete Order</button>');\n\n\t\tthis.payment_details = this.cart_footer.find('#paymentDetailsContainer')\n\t\tthis.payment_details.append('<div class=\"columnBox\"><div id=\"paymentGrandTotalTitle\" class=\"rowBox centerItem\">Grand Total</div><div id=\"paymentGrandTotalValue\" class=\"rowBox centerItem\"></div></div>')\n\t\tthis.payment_details.append('<hr>')\n\t\tthis.payment_details.append(`<div id=\"paymentPaidAmount\" class=\"columnBox\"><div id=\"paymentPaidAmountTitle\" class=\"rowBox centerItem\">Paid Amount</div><div id=\"paimentPaidAmountValue\"  class=\"rowBox centerItem\"> 0 DA </div></div>`)\n\t\tthis.payment_details.append('<hr>')\n\t\tthis.payment_details.append(`<div id=\"paymentToChange\" class=\"columnBox\"><div id=\"paimentToChangeTitle\" class=\"rowBox centerItem\">To Change</div><div id=\"paimentToChangeValue\"  class=\"rowBox centerItem\"> ${this.to_change}DA </div></div>`)\n\n\t}\n\n\n\tshowCart(){\n\t\tthis.cart.css('display' , 'flex');\n\t\tthis.clearData();\n\t}\n\n\thideCart(){\n\t\tthis.cart.css('display' , 'none');\n\t}\n\n\n\tclearData(){\n\t\tthis.grand_total = 0 ;\n\t\tthis.paid_amount = 0 ;\n\t\tthis.to_change   = 0 ;\n\n\t\tthis.cashBox.find('#cachInput').val(0)\n\n\t\tthis.calculateGrandTotal();\n\t\tthis.calculateToChange();\n\t\tthis.refreshPaidAmount();\n\n\t}\n\t/****************************************  listeners  ***********************************************/\n\n\tsetListeners(){\n\n\t\tthis.cashBox.on('click' , (event)=>{\n\t\t\tthis.selected_payment_method.methodName = \"cash\"\n\t\t\tthis.cashBox.addClass('selected')\n\t\t\tthis.onTimeBox.removeClass('selected')\n\t\t\tthis.redeemLoyaltyBox.removeClass('selected')\n\n\t\t\t//refresh UI\n\t\t\tthis.paid_amount = this.cashBox.find('#cachInput').val()\n\t\t\tthis.refreshPaidAmount();\n\t\t})\n\n\t\tthis.onTimeBox.on('click' , (event)=>{\n\t\t\tthis.selected_payment_method.methodName = \"onTime\"\n\t\t\tthis.cashBox.removeClass('selected')\n\t\t\tthis.onTimeBox.addClass('selected')\n\t\t\tthis.redeemLoyaltyBox.removeClass('selected')\n\n\t\t\t//refresh UI\n\t\t\tthis.paid_amount = this.onTimeBox.find('#paymentOnTimeInput').val()\n\t\t\tthis.refreshPaidAmount();\n\n\t\t})\n\n\t\tthis.redeemLoyaltyBox.on('click' , (event)=>{\n\t\t\tthis.selected_payment_method.methodName = \"redeemLoyalty\"\n\t\t\tthis.cashBox.removeClass('selected')\n\t\t\tthis.onTimeBox.removeClass('selected')\n\t\t\tthis.redeemLoyaltyBox.addClass('selected')\n\n\t\t\t//refresh UI\n\t\t\tthis.paid_amount = 0;\n\t\t\tthis.refreshPaidAmount();\n\n\t\t})\n\n\t\t//inputs\n\t\tthis.cashBox.find('#cachInput').on('input' , (event)=>{\n\t\t\tconst value = event.target.value;\n\t\t\tif(value.length == 0){\n\t\t\t\tevent.target.value = 0\n\t\t\t}\n\t\t\telse if (!value.slice(0,-1).includes(\".\")  && value[value.length-1] == \".\"){\n\t\t\t\tevent.target.value = value\n\t\t\t}\n\t\t\telse if(value[value.length-1] == \".\"){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse if(value[value.length-1] == \" \"){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse if(isNaN(value[value.length-1])){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tevent.target.value = value\n\t\t\t}\n\n\t\t\tthis.paid_amount = event.target.value;\n\t\t\tthis.refreshPaidAmount();\n\t\t\tthis.calculateToChange();\n\t\t\tconsole.log(\"input\" , event.target.value)\n\t\t})\n\n\t\tthis.onTimeBox.find('#paymentOnTimeInput').on('input' , (event)=>{\n\t\t\tconst value = event.target.value;\n\t\t\tif(value.length == 0){\n\t\t\t\tevent.target.value = 0\n\t\t\t}\n\t\t\telse if (!value.slice(0,-1).includes(\".\")  && value[value.length-1] == \".\"){\n\t\t\t\tevent.target.value = value\n\t\t\t}\n\t\t\telse if(value[value.length-1] == \".\"){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse if(value[value.length-1] == \" \"){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse if(isNaN(value[value.length-1])){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tevent.target.value = value\n\t\t\t}\n\n\t\t\tthis.paid_amount = event.target.value;\n\t\t\tthis.refreshPaidAmount();\n\t\t\tthis.calculateToChange();\n\t\t\tconsole.log(\"input\" , event.target.value)\n\t\t})\n\n\t\tthis.redeemLoyaltyBox.find('#RedeemLayoutPointsInput').on('input' , (event)=>{\n\t\t\tconst value = event.target.value;\n\t\t\tif(value.length == 0){\n\t\t\t\tevent.target.value = 0\n\t\t\t}\n\t\t\telse if (!value.slice(0,-1).includes(\".\")  && value[value.length-1] == \".\"){\n\t\t\t\tevent.target.value = value\n\t\t\t}\n\t\t\telse if(value[value.length-1] == \".\"){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse if(value[value.length-1] == \" \"){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse if(isNaN(value[value.length-1])){\n\t\t\t\tconsole.log(\"===}> \" , value[value.length-1])\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tevent.target.value = value\n\t\t\t}\n\t\t\tconsole.log(\"input\" , event.target.value)\n\t\t})\n\n\t\tthis.cart_footer.find(\"#completeOrderBtn\").on('click' , (event)=>{\n\t\t\tconsole.log(\"grand total ==> \" , this.grand_total , \"the paid amount ==> \" , this.paid_amount)\n\t\t\tif(this.grand_total > this.paid_amount ){\n\t\t\t\tconsole.log(\"here we go 1\")\n\t\t\t\tfrappe.warn(\n\t\t\t\t\t'Paid amount is less than the Total!',\n\t\t\t\t\t'Please set the correct paid amount value',\n\t\t\t\t\t()=>{\n\t\t\t\t\t},\n\t\t\t\t\t'Done',\n\t\t\t\t\tfalse\n\t\t\t\t)\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse if(this.grand_total == 0){\n\t\t\t\tconsole.log(\"here we go 2\")\n\t\t\t\tfrappe.warn(\n\t\t\t\t\t'No item',\n\t\t\t\t\t'Please select some items.',\n\t\t\t\t\t()=>{\n\t\t\t\t\t},\n\t\t\t\t\t'Done',\n\t\t\t\t\tfalse\n\t\t\t\t)\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tfrappe.confirm('Submit the invoice ?',\n\t\t\t()=>{/*yes*/\n\t\t\t\tthis.on_complete()\n\t\t\t},()=>{\n\n\t\t\t})\n\t\t})\n\n\n\t}\n\n\n\t/************************************ tools  ***************************************/\n\tcalculateGrandTotal(){\n\n\t\tthis.grand_total = 0 ;\n\n\t\tthis.selected_item_map.get(this.selected_tab.tabName).forEach((value,key)=>{\n\t\t\tthis.grand_total += value.quantity * value.amount\n\t\t})\n\n\t\tthis.payment_details.find('#paymentGrandTotalValue').text(`${this.grand_total} DA`)\n\n\t\tthis.generateProposedPaidAmount(this.grand_total);\n\t}\n\n\tcalculateToChange(){\n\t\tthis.to_change = (this.paid_amount - this.grand_total)\n\t\tconsole.log(\"paid  \" ,this.paid_amount , \" - \" , this.grand_total , \" = \"  ,   this.to_change)\n\t\tthis.payment_details.find('#paimentToChangeValue').text(`${this.to_change} DA`)\n\t}\n\n\trefreshPaidAmount(){\n\t\tthis.payment_details.find('#paimentPaidAmountValue').text(`${this.paid_amount} DA`)\n\t}\n\n\n\tgenerateProposedPaidAmount(total){\n\t\tconst money = [10,20,50,100,200,500,1000,2000];\n\t\tlet counter = 0;\n\t\tlet pointer = 7;\n\n\t\twhile( counter < total ){\n\t\t\tcounter += money[pointer]\n\t\t}\n\n\t\tconsole.log(\"counter : \" , counter)\n\t}\n\n}\n", "\n\npos_ar.PointOfSale.pos_history = class {\n\n\tconstructor(){\n\t\tconsole.log(\"im pos history\")\n\t}\n\n}\n", "pos_ar.PointOfSale.Sw = class {\n\n\tconstructor(){\n\t\tconsole.log(`Im SW I'm heeeeeeeeeeeeeeeeeeeere path: ${window.location.pathname}`);\n\t}\n\n}\n"],
  "mappings": "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",
  "names": ["wrapper", "__publicField", "r", "error", "me", "table_fields", "dialog", "d", "fetch_pos_payment_methods", "pos_profile", "payments", "pay", "mode_of_payment", "pos_profile_query", "company", "balance_details", "method", "res", "item", "tab", "action", "key", "event", "field", "value", "itemCloned", "__spreadValues", "existingItem", "oldRate", "montant", "newRate", "persent", "items", "newItem", "tabs", "all_tabs", "counter", "failure", "seccess", "invoicesRef", "paid_amount", "totalQty", "err", "voucher", "itemId", "price", "itemPrice", "reg", "wrapper", "item_list", "item_group_list", "item_prices", "onItemClick", "groupItemList_html", "group_item", "option", "filtered_item_list", "itemsContainer_html", "item", "itemBox", "event", "itemImage", "itemImageHolder", "firstLatter", "itemName", "price", "even", "item_group", "groups", "getChild", "grp", "g", "filtredItemList", "getFiltredItems", "group", "itemId", "itemPrice", "wrapper", "customersList", "onSync", "onClosePOS", "customerList_html", "customer", "option", "event", "wrapper", "selectedItemMaps", "selectedTab", "selectedItem", "selectedField", "onSelectedItemClick", "onTabClick", "onKeyPressed", "onCheckoutClick", "event", "key", "clickedTab", "selectedItemsContainer", "item", "itemId", "itemElement", "leftGroup", "rightGroup", "itemName", "itemQuantity", "itemPrice", "itemImage", "itemImageHolder", "itemImageLatter", "orientation", "discount", "quantity", "netTotal", "grandTotal", "quantityButton", "rateButton", "discountButton", "key_0", "key_1", "key_2", "key_3", "key_4", "key_5", "key_6", "key_7", "key_8", "key_9", "key_quantity", "key_discount", "key_rate", "key_remove", "key_delete", "key_point", "keyContent", "value", "netTotal_HTML", "totalQuantity_HTML", "grandTotal_HTML", "wrapper", "warehouse", "priceLists", "itemPrices", "binList", "selectedItem", "selectedField", "onInput", "onClose", "event", "item", "_a", "_b", "imageContainer", "name", "itemGroup", "quantity", "rate", "discount_percentage", "discount_amount", "available", "uom", "priceList", "priceListRate", "image", "field", "value", "index", "currentValue", "newQuantity", "newRate", "newDiscount", "itemId", "price", "itemPrice", "warehouseId", "bin", "wrapper", "selectedItemMap", "selectedTab", "selectedPaymentMythod", "onClose", "onComplete", "event", "value", "key", "total", "money", "counter", "pointer"]
}
