{
  "version": 3,
  "sources": ["../../../../../apps/pos_ar/pos_ar/pos_ar/page/pos/posController.js", "../../../../../apps/pos_ar/pos_ar/pos_ar/page/pos/pos_item_selector.js", "../../../../../apps/pos_ar/pos_ar/pos_ar/page/pos/pos_customer_box.js", "../../../../../apps/pos_ar/pos_ar/pos_ar/page/pos/pos_selected_item_cart.js", "../../../../../apps/pos_ar/pos_ar/pos_ar/page/pos/pos_item_details.js", "../../../../../apps/pos_ar/pos_ar/pos_ar/page/pos/pos_payment_cart.js", "../../../../../apps/pos_ar/pos_ar/pos_ar/page/pos/pos_history.js", "../../../../../apps/pos_ar/pos_ar/pos_ar/page/pos/pos_db.js", "../../../../../apps/pos_ar/pos_ar/pos_ar/page/pos/pos_settings.js"],
  "sourcesContent": ["pos_ar.PointOfSale.Controller = class {\n        constructor(wrapper) {\n\t\t//principales variable\n                this.wrapper = $(wrapper).find(\".layout-main-section\");\n                this.page    = wrapper.page ;\n\n\t\t//logic variable\n                this.customersList     = []\n                this.itemGroupList     = []\n                this.itemList          = []\n                this.itemPrices        = []\n                this.priceLists        = []\n\n\n\t\tlet initPos = frappe.model.get_new_doc('POS Invoice')\n\t\tinitPos.items = [];\n                this.selectedItemMaps  = new Map()\n                this.warehouseList     = []\n                this.PosProfileList    = []\n                this.binList           = []\n\n                this.selectedItem          = {}\n                this.selectedField         = {}\n                this.selectedTab           = {\"tabName\"    : \"\" }\n\t\tthis.selectedPaymentMethod = {\"methodName\" : \"\"   }\n\t\tthis.selectedCustomer      = {\"name\"       : \"\" , \"customer_name\" : \"\"}\n\t\tthis.selectedPosProfile    = {\"name\"       : \"\"   }\n\t\tthis.selectedPriceList     = {\"name\"       : \"\"   }\n\n\t\t//taxes\n\t\tthis.sales_taxes = [];\n\n\t\t//sell invoice\n\t\tthis.sellInvoices    = new Map();\n\t\tthis.POSOpeningEntry = {}\n\n\t\tthis.invoiceData = { netTotal : 0 , grandTotal : 0 , paidAmount : 0 , toChange : 0 , discount : 0}\n\t\tthis.db          = null;\n\n                this.start_app();\n        }\n\n\t async start_app(){\n\t\tthis.db = new pos_ar.PointOfSale.pos_db();\n\t\tthis.prepare_container();\n\t\tawait  this.prepare_app_defaults();\n\t\tawait  this.checkForPOSEntry()\n                await  this.prepare_components();\n\t\tthis.setListeners();\n\t}\n\n\n\tasync refreshApp(){\n\t\tthis.$components_wrapper.text('');\n\t\tawait  this.checkForPOSEntry()\n                await  this.prepare_components();\n\t\tthis.setListeners();\n\t}\n\n\tasync prepare_app_defaults(){\n                this.customersList    = await this.fetchCustomers()\n\t\tthis.itemGroupList    = await this.fetchItemGroups()\n                this.itemList         = await this.fetchItems()\n                this.itemPrices       = await this.fetchItemPrice()\n                this.priceLists       = await this.fetchPriceList()\n                this.warehouseList    = await this.fetchWarehouseList()\n                this.PosProfileList   = await this.fetchPosProfileList()\n                this.binList          = await this.fetchBinList()\n\n\n\t\tthis.sales_taxes_and_charges    = await this.fetchSalesTaxesAndCharges()\n\t\tthis.taxes_and_charges_template = await this.fetchSalesTaxesAndChargesTemplate()\n\n\n\t\tif(this.PosProfileList.length == 0){\n\t\t\tfrappe.set_route(\"Form\", \"POS Profile\");\n\t\t\treturn;\n\t\t}\n\n\t\tObject.assign(this.selectedPosProfile , this.PosProfileList[0])\n\n\n\t\tif(this.customersList.length > 0){\n\t\t\tthis.selectedCustomer = structuredClone(this.customersList[0])\n\t\t}else{\n\t\t\tfrappe.warn(\n\t\t\t\t\t'You dont have a customer',\n\t\t\t\t\t'please create a customer to continue',\n\t\t\t\t\t()=>{\n\t\t\t\t\t},\n\t\t\t\t\t'Done',\n\t\t\t\t\tfalse\n\t\t\t)\n\n\t\t}\n\n\t\tif(this.priceLists.length > 0){\n\t\t\tObject.assign(this.selectedPriceList , this.priceLists[0])\n\t\t}else{\n\t\t\tfrappe.warn(\n\t\t\t\t\t'You dont have a single price list',\n\t\t\t\t\t'please create a priceList to continue',\n\t\t\t\t\t()=>{\n\t\t\t\t\t},\n\t\t\t\t\t'Done',\n\t\t\t\t\tfalse\n\t\t\t)\n\n\t\t}\n\n\n\t\tlet new_pos_invoice = frappe.model.get_new_doc('POS Invoice');\n\t\tnew_pos_invoice.customer          = this.selectedCustomer.name\n\t\tnew_pos_invoice.pos_profile       = this.selectedPosProfile.name\n\t\tnew_pos_invoice.items             = [];\n\t\tnew_pos_invoice.taxes_and_charges = this.selectedPosProfile.taxes_and_charges\n\t\tnew_pos_invoice.additional_discount_percentage = this.invoiceData.discount\n\t\tnew_pos_invoice.paid_amount       = 0\n\t\tnew_pos_invoice.base_paid_amount  = 0\n\t\tnew_pos_invoice.creation_time     = frappe.datetime.now_datetime()\n\t\tnew_pos_invoice.payments          = [{'mode_of_payment' : 'Cash' , 'amount' : 0}]\n\t\tnew_pos_invoice.is_pos            = 1\n\t\tnew_pos_invoice.update_stock      = 1\n\t\tnew_pos_invoice.docstatus         = 0\n\t\tnew_pos_invoice.status            = 'Draft'\n\n\t\tthis.selectedItemMaps.set(\"C1\" , new_pos_invoice)\n\t\tthis.selectedTab.tabName = `C1`\n\n\n\t\t// calculate the tax after setting the default pos profile because it use it to get the tax\n\t\tthis.sales_taxes  = this.getSalesTaxes(this.selectedItemMaps.get(this.selectedTab.tabName))\n\n        }\n\n\n        /***********************  ui ******************************************/\n\n        prepare_container(){\n                //append css styles\n                this.wrapper.append('<link rel=\"stylesheet\" type=\"text/css\" href=\"/assets/pos_ar/css/selectorBox.css\">')\n                this.wrapper.append('<link rel=\"stylesheet\" type=\"text/css\" href=\"/assets/pos_ar/css/itemDetailsCart.css\">')\n                this.wrapper.append('<link rel=\"stylesheet\" type=\"text/css\" href=\"/assets/pos_ar/css/paymentMethodCart.css\">')\n                this.wrapper.append('<link rel=\"stylesheet\" type=\"text/css\" href=\"/assets/pos_ar/css/customerBox.css\">')\n                this.wrapper.append('<link rel=\"stylesheet\" type=\"text/css\" href=\"/assets/pos_ar/css/cartBox.css\">')\n                this.wrapper.append('<link rel=\"stylesheet\" type=\"text/css\" href=\"/assets/pos_ar/css/historyCarts.css\">')\n\n                this.wrapper.append('<div id=\"MainContainer\" class=\"rowBox\"></div>');\n                this.$components_wrapper = this.wrapper.find(\"#MainContainer\");\n        }\n\n\tprepare_components(){\n\n\t\tthis.set_right_and_left_sections();\n\t\tthis.init_item_selector();\n\t\tthis.init_customer_box();\n\t\tthis.init_selected_item();\n\t\tthis.init_item_details();\n\t\tthis.init_paymentCart();\n\t\tthis.init_historyCart();\n\t\tthis.init_settingsCart();\n\t}\n\n\tasync checkForPOSEntry(){\n\n\t\ttry{\n\t\t\tconst r = await frappe.db.get_list('POS Opening Entry' , {\n\t\t\t\t\tfilters :{\n\t\t\t\t\t\t'pos_profile' : this.selectedPosProfile.name,\n\t\t\t\t\t\t'status'      : 'Open',\n\t\t\t\t\t\t'user'        : frappe.session.user\n\t\t\t\t\t},\n\t\t\t\t\tfields  : ['name' , 'pos_profile' ,'period_start_date' , 'company'],\n\t\t\t\t\tlimit   : 1 // we only need the most recent one\n\t\t\t\t});\n\t\t\tif(r.length === 0){\n\t\t\t\tthis.create_opening_voucher();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t//copy data\n\t\t\tObject.assign(this.POSOpeningEntry ,  r[0])\n\n\t\t\treturn true;\n\n\t\t}catch(error){\n\t\t\tconsole.error('error occured : ' , error);\n\t\t\tfrappe.throw('Error checking for POS Opening Entry.')\n\t\t\treturn false;\n\t\t}\n\n\t}\n\n\n\n\n\tcreate_opening_voucher() {\n\t\tconst me = this;\n\t\tconst table_fields = [\n\t\t\t{\n\t\t\t\tfieldname: \"mode_of_payment\",\n\t\t\t\tfieldtype: \"Link\",\n\t\t\t\tin_list_view: 1,\n\t\t\t\tlabel: \"Mode of Payment\",\n\t\t\t\toptions: \"Mode of Payment\",\n\t\t\t\treqd: 1,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"opening_amount\",\n\t\t\t\tfieldtype: \"Currency\",\n\t\t\t\tin_list_view: 1,\n\t\t\t\tlabel: \"Opening Amount\",\n\t\t\t\toptions: \"company:company_currency\",\n\t\t\t\tchange: function () {\n\t\t\t\t\tdialog.fields_dict.balance_details.df.data.some((d) => {\n\t\t\t\t\t\tif (d.idx == this.doc.idx) {\n\t\t\t\t\t\t\td.opening_amount = this.value;\n\t\t\t\t\t\t\tdialog.fields_dict.balance_details.grid.refresh();\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\tconst fetch_pos_payment_methods = () => {\n\t\t\tconst pos_profile = dialog.fields_dict.pos_profile.get_value();\n\t\t\tif (!pos_profile) return;\n\t\t\tfrappe.db.get_doc(\"POS Profile\", pos_profile).then(({ payments }) => {\n\t\t\t\tdialog.fields_dict.balance_details.df.data = [];\n\t\t\t\tpayments.forEach((pay) => {\n\t\t\t\t\tconst { mode_of_payment } = pay;\n\t\t\t\t\tdialog.fields_dict.balance_details.df.data.push({ mode_of_payment, opening_amount: \"0\" });\n\t\t\t\t});\n\t\t\t\tdialog.fields_dict.balance_details.grid.refresh();\n\t\t\t});\n\t\t};\n\t\tconst dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __(\"Create POS Opening Entry\"),\n\t\t\tstatic: true,\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\tfieldtype: \"Link\",\n\t\t\t\t\tlabel: __(\"Company\"),\n\t\t\t\t\tdefault: frappe.defaults.get_default(\"company\"),\n\t\t\t\t\toptions: \"Company\",\n\t\t\t\t\tfieldname: \"company\",\n\t\t\t\t\treqd: 1,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldtype: \"Link\",\n\t\t\t\t\tlabel: __(\"POS Profile\"),\n\t\t\t\t\toptions: \"POS Profile\",\n\t\t\t\t\tfieldname: \"pos_profile\",\n\t\t\t\t\treqd: 1,\n\t\t\t\t\tget_query: () => pos_profile_query(),\n\t\t\t\t\tonchange: () => fetch_pos_payment_methods(),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: \"balance_details\",\n\t\t\t\t\tfieldtype: \"Table\",\n\t\t\t\t\tlabel: \"Opening Balance Details\",\n\t\t\t\t\tcannot_add_rows: false,\n\t\t\t\t\tin_place_edit: true,\n\t\t\t\t\treqd: 1,\n\t\t\t\t\tdata: [],\n\t\t\t\t\tfields: table_fields,\n\t\t\t\t},\n\t\t\t],\n\t\t\tprimary_action: async function ({ company, pos_profile, balance_details }) {\n\t\t\t\tif (!balance_details.length) {\n\t\t\t\t\tfrappe.show_alert({\n\t\t\t\t\t\tmessage: __(\"Please add Mode of payments and opening balance details.\"),\n\t\t\t\t\t\tindicator: \"red\",\n\t\t\t\t\t});\n\t\t\t\t\treturn frappe.utils.play_sound(\"error\");\n\t\t\t\t}\n\n\t\t\t\t// filter balance details for empty rows\n\t\t\t\tbalance_details = balance_details.filter((d) => d.mode_of_payment);\n\n\t\t\t\tconst method = \"erpnext.selling.page.point_of_sale.point_of_sale.create_opening_voucher\";\n\t\t\t\tconst res = await frappe.call({\n\t\t\t\t\tmethod,\n\t\t\t\t\targs: { pos_profile, company, balance_details },\n\t\t\t\t\tfreeze: true,\n\t\t\t\t});\n\t\t\t\t!res.exc && me.prepare_app_defaults(res.message);\n\n\t\t\t\tObject.assign(me.POSOpeningEntry    ,  {'name' : res.message.name , 'pos_profile' : res.message.pos_profile ,  'period_start_date' : res.message.period_start_date , 'company' : res.message.company } )\n\n\t\t\t\tdialog.hide();\n\n\t\t\t},\n\t\t\tprimary_action_label: __(\"Submit\"),\n\t\t});\n\t\tdialog.show();\n\t\tconst pos_profile_query = () => {\n\t\t\treturn {\n\t\t\t\tquery: \"erpnext.accounts.doctype.pos_profile.pos_profile.pos_profile_query\",\n\t\t\t\tfilters: { company: dialog.fields_dict.company.get_value() },\n\t\t\t};\n\t\t};\n\t}\n\n\n\n        set_right_and_left_sections(){\n                this.$components_wrapper.append('<div id=\"LeftSection\" class=\"columnBox\"></div>')\n                this.$components_wrapper.append('<div id=\"RightSection\" class=\"columnBox\"></div>')\n\n\t\tthis.$rightSection = this.$components_wrapper.find(\"#RightSection\")\n\t\tthis.$leftSection  = this.$components_wrapper.find(\"#LeftSection\")\n\n        }\n\n        init_item_selector(){\n\t\tconsole.log(\"item list from controller : \" , this.itemList)\n                this.item_selector = new pos_ar.PointOfSale.pos_item_selector(\n\t\t\t\t\t\tthis.$leftSection     ,\n\t\t\t\t\t\tthis.itemList         ,\n\t\t\t\t\t\tthis.itemGroupList    ,\n\t\t\t\t\t\tthis.itemPrices       ,\n\t\t\t\t\t\titem => { this.itemClick_selector(item)  }\n\t\t\t\t\t)\n\t}\n\n\tinit_customer_box(){\n\t\tthis.customer_box  = new pos_ar.PointOfSale.pos_customer_box(\n\t\t\t\t\t\t\t\t\tthis.$rightSection ,\n\t\t\t\t\t\t\t\t\tthis.customersList    ,\n\t\t\t\t\t\t\t\t\tthis.selectedCustomer ,\n\t\t\t\t\t\t\t\t\tthis.backHome.bind(this),\n\t\t\t\t\t\t\t\t\tthis.onSync.bind(this),\n\t\t\t\t\t\t\t\t\tthis.onMenuClick.bind(this)\n\t\t\t\t\t\t\t\t\t)\n\t}\n        init_selected_item(){\n\t\tthis.selected_item_cart  = new pos_ar.PointOfSale.pos_selected_item_cart(\n\t\t\t\t\t\t\t\t\tthis.$rightSection ,\n\t\t\t\t\t\t\t\t\tthis.selectedItemMaps,\n\t\t\t\t\t\t\t\t\tthis.priceLists   ,\n\t\t\t\t\t\t\t\t\tthis.selectedPriceList ,\n\t\t\t\t\t\t\t\t\tthis.sales_taxes  ,\n\t\t\t\t\t\t\t\t\tthis.invoiceData  ,\n\t\t\t\t\t\t\t\t\tthis.selectedTab  ,\n\t\t\t\t\t\t\t\t\tthis.selectedItem ,\n\t\t\t\t\t\t\t\t\tthis.selectedField,\n\t\t\t\t\t\t\t\t\titem => {\n\t\t\t\t\t\t\t\t\t\tthis.onSelectedItemClick(item)\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\ttab =>{\n\t\t\t\t\t\t\t\t\t\tthis.onClose_details();\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t(action , key) =>{\n\t\t\t\t\t\t\t\t\t\tthis.onKeyPressed(action , key)\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tthis.createNewTab.bind(this),\n\t\t\t\t\t\t\t\t\tthis.onCheckout.bind(this)\n\t\t\t\t\t\t\t\t\t)\n\t}\n\n\tinit_item_details(){\n\t\tconsole.log(\"warehouse ==> \" , this.selectedPosProfile.warehouse)\n\t\tthis.item_details = new pos_ar.PointOfSale.pos_item_details(\n\t\t\t\t\t\t\t\t\tthis.$leftSection,\n\t\t\t\t\t\t\t\t\tthis.selectedPosProfile.warehouse,\n\t\t\t\t\t\t\t\t\tthis.priceLists,\n\t\t\t\t\t\t\t\t\tthis.itemPrices,\n\t\t\t\t\t\t\t\t\tthis.binList,\n\t\t\t\t\t\t\t\t\tthis.selectedItem,\n\t\t\t\t\t\t\t\t\tthis.selectedField,\n\t\t\t\t\t\t\t\t\t(event , field , value) =>{\n\t\t\t\t\t\t\t\t\t\tthis.onInput(event , field , value);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tthis.onClose_details.bind(this)\n\t\t\t\t\t\t\t\t)\n\t}\n\n\n        init_paymentCart(){\n\t\tthis.payment_cart = new pos_ar.PointOfSale.pos_payment_cart(\n\t\t\t\t\t\t\t\t\tthis.$leftSection,\n\t\t\t\t\t\t\t\t\tthis.selectedItemMaps,\n\t\t\t\t\t\t\t\t\tthis.selectedTab,\n\t\t\t\t\t\t\t\t\tthis.selectedPaymentMethod,\n\t\t\t\t\t\t\t\t\tthis.invoiceData,\n\t\t\t\t\t\t\t\t\tthis.onClose_payment_cart.bind(this),\n\t\t\t\t\t\t\t\t\tthis.onCompleteOrder.bind(this),\n\t\t\t\t\t\t\t\t\t(event , field , value) =>{\n\t\t\t\t\t\t\t\t\t\tthis.onInput(event , field , value);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t)\n        }\n\n        init_historyCart(){\n\t\tthis.history_cart = new pos_ar.PointOfSale.pos_history(\n\t\t\t\t\t\t\t\t\tthis.wrapper,\n\t\t\t\t\t\t\t\t\tthis.db,\n\t\t\t\t\t\t\t\t\tthis.sales_taxes_and_charges,\n\t\t\t\t\t\t\t\t\tthis.historyCartClick.bind(this)\n\t\t\t\t\t\t\t\t)\n        }\n\n\n        init_settingsCart(){\n\t\tthis.settings_cart = new pos_ar.PointOfSale.pos_settings(\n\t\t\t\t\t\t\t\t\tthis.wrapper,\n\t\t\t\t\t\t\t\t)\n        }\n\n\n\n        /*********************  callbacks functions ******************************/\n\n\n\titemClick_selector(item){\n\n\t\tconst  itemCloned = structuredClone(item);\n\n\n\t\titemCloned.discount_amount     = 0;\n\t\titemCloned.discount_percentage = 0;\n\n\n\t\tthis.addItemToPosInvoice( item )\n\n\n\n\n\t\tconsole.log(\"updated ===> \" , this.selectedItemMaps )\n\n\n\t\tthis.selected_item_cart.calculateNetTotal();\n\t\tthis.selected_item_cart.calculateVAT();\n\t\tthis.selected_item_cart.calculateQnatity();\n\t\tthis.selected_item_cart.calculateGrandTotal();\n\t\tthis.selected_item_cart.refreshSelectedItem();\n\n\n\t}\n\n\tonSelectedItemClick(item){\n\n\n\t\tthis.selectedItem = structuredClone(item)\n\n\t\tconsole.log(\"selected item clicked ::: \" , this.selectedItem);\n\n\n\t\tconsole.log(\"item_details :: \" , this.item_details)\n\t\tconsole.log(\"item_selector :: \" , this.item_selector)\n\t\tconsole.log(\"payment_cart :: \" , this.payment_cart)\n\t\t//show\n\t\tthis.item_details.show_cart();\n\t\tthis.selected_item_cart.showKeyboard();\n\n\t\t//close\n\t\tthis.item_selector.hideCart();\n\t\tthis.payment_cart.hideCart();\n\n\t\t//change display\n\t\tthis.selected_item_cart.setKeyboardOrientation(\"landscape\");\n\n\n\t\t//refresh data\n\t\tthis.item_details.refreshDate(item);\n\n\t}\n\n\tonCheckout(){\n\n\t\tif(this.checkIfRateZero(this.selectedItemMaps.get(this.selectedTab.tabName))){\n\t\t\tfrappe.throw(\"Item with rate equal 0\")\n\t\t}\n\t\tconsole.log(\"result : \" , this.checkIfRateZero(this.selectedItemMaps.get(this.selectedTab.tabName)))\n\t\tconst pos_checkout = this.selectedItemMaps.get(this.selectedTab.tabName);\n\t\tconsole.log(\"pos on checkout : \" , pos_checkout);\n\n\t\tthis.db.savePosInvoice(\n\t\t\t\t\tpos_checkout ,\n\t\t\t\t\t(event) => {\n\t\t\t\t\t\tconsole.log(\"sucess => \" , event )\n\t\t\t\t\t},\n\t\t\t\t\t(event) => {\n\t\t\t\t\t\tconsole.log(\"failure => \" , event )\n\t\t\t\t\t}\n\t\t\t\t)\n\n\n\t\t//show\n\t\tthis.payment_cart.showCart();\n\n\t\t//hide\n\t\tthis.item_selector.hideCart();\n\t\tthis.item_details.hide_cart();\n\n\t\t//change displayk\n\t\tthis.payment_cart.calculateGrandTotal()\n\t\tthis.selected_item_cart.setKeyboardOrientation(\"landscape\");\n\t\tthis.selected_item_cart.cleanHeighlight();\n\t\tthis.selected_item_cart.showKeyboard();\n\n\t}\n\n\n\tonClose_details(){\n\n\t\t//show\n\t\tthis.item_selector.showCart();\n\n\t\t//hide\n\t\tthis.payment_cart.hideCart();\n\t\tthis.item_details.hide_cart();\n\t\tthis.selected_item_cart.hideKeyboard();\n\n\t\t//change display\n\t\tthis.selected_item_cart.setKeyboardOrientation(\"portrait\");\n\t\tthis.selected_item_cart.cleanHeighlight();\n\n\t}\n\n\tonClose_payment_cart(){\n\n\t\t//show\n\t\tthis.item_selector.showCart();\n\n\t\t//hide\n\t\tthis.item_details.hide_cart();\n\t\tthis.payment_cart.hideCart();\n\t\tthis.selected_item_cart.hideKeyboard();\n\n\t\t//update ui\n\t\tthis.selected_item_cart.setKeyboardOrientation(\"portrait\");\n\t\tthis.selected_item_cart.cleanHeighlight();\n\n\t}\n\n\tonHistoryClick(){\n\n\t\tconsole.log(\"selected pos profile 10 : \" , this.selectedPosProfile)\n\n\t\tconsole.log(\"history ::\" , this.history_cart)\n\t\t//show\n\t\tthis.history_cart.show_cart()\n\n\t\t//hide\n\t\tthis.payment_cart.hideCart();\n\t\tthis.item_details.hide_cart();\n\t\tthis.item_selector.hideCart();\n\t\tthis.selected_item_cart.hideCart();\n\t\tthis.customer_box.hideActionBar();\n\n\t}\n\n\tonMenuClick(menu){\n\t\tif(menu == 'recent_pos'){\n\t\t\tthis.onHistoryClick()\n\t\t}\n\t\telse if(menu == 'close_pos'){\n\t\t\tthis.onClosePOS()\n\t\t}\n\t\telse if(menu == 'settings'){\n\t\t\t//show settings\n\t\t\tthis.settings_cart.showCart()\n\t\t\tthis.customer_box.hideActionBar();\n\t\t\t//hide\n\t\t\tthis.item_selector.hideCart();\n\t\t\tthis.selected_item_cart.hideCart();\n\t\t\tthis.payment_cart.hideCart()  ;\n\t\t\tthis.item_details.hide_cart() ;\n\t\t\tthis.history_cart.hide_cart() ;\n\t\t}\n\t}\n\n\tbackHome(){\n\n\t\t//show\n\t\tthis.item_selector.showCart();\n\t\tthis.customer_box.showActionBar();\n\t\tthis.selected_item_cart.showCart()\n\n\t\t//hide\n\t\tthis.payment_cart.hideCart()  ;\n\t\tthis.item_details.hide_cart() ;\n\t\tthis.history_cart.hide_cart() ;\n\n\n\t}\n\n\tcreateNewTab(counter){\n\t\tlet new_pos_invoice = frappe.model.get_new_doc('POS Invoice');\n\t\tnew_pos_invoice.customer          = this.selectedCustomer.name\n\t\tnew_pos_invoice.pos_profile       = this.selectedPosProfile.name\n\t\tnew_pos_invoice.items             = [];\n\t\tnew_pos_invoice.taxes_and_charges = this.selectedPosProfile.taxes_and_charges\n\t\tnew_pos_invoice.additional_discount_percentage = this.invoiceData.discount\n\t\tnew_pos_invoice.paid_amount       = 0\n\t\tnew_pos_invoice.base_paid_amount  = 0\n\t\tnew_pos_invoice.creation_time     = frappe.datetime.now_datetime()\n\t\tnew_pos_invoice.payments          = [{'mode_of_payment' : 'Cash' , 'amount' : 0}]\n\t\tnew_pos_invoice.is_pos            = 1\n\t\tnew_pos_invoice.update_stock      = 1\n\t\tnew_pos_invoice.docstatus         = 0\n\t\tnew_pos_invoice.status            = 'Draft'\n\n\n\n\t\tthis.selectedItemMaps.set(`C${counter}` , new_pos_invoice)\n\t\tthis.selectedTab.tabName = `C${counter}`\n\n\t}\n\n\n\thistoryCartClick(event , message){\n\t\t//go back to edit pos draft\n\t\tif(event == 'edit'){\n\t\t\tconst tab = this.selected_item_cart.createTabForEditPOS()\n\n\t\t\tthis.selectedItemMaps.set(`C${tab}` , message)\n\t\t\tthis.selectedTab.tabName = `C${tab}`\n\n\n\t\t\tconsole.log(\"change ::: item map ==> \" , this.selectedItemMaps , \" selected tab ==> \" , this.selectedTab)\n\n\t\t\t//show\n\t\t\tthis.item_selector.showCart();\n\t\t\tthis.customer_box.showActionBar();\n\t\t\tthis.selected_item_cart.showCart()\n\n\t\t\t//hide\n\t\t\tthis.item_details.hide_cart() ;\n\t\t\tthis.payment_cart.hideCart()  ;\n\t\t\tthis.history_cart.hide_cart() ;\n\n\t\t\t//refresh the data :\n\t\t\tthis.selected_item_cart.refreshTabs()\n                        this.selected_item_cart.refreshSelectedItem()\n\t\t}\n\t\telse if(event == 'return'){\n\t\t\tthis.backHome();\n\t\t}\n\t}\n\n\tonInput( event , field , value){\n\n\n\t\tif(event == \"focus\" || event == \"blur\"){\n\t\t\tif(event == \"focus\")\n\t\t\t\tObject.assign(this.selectedField , {field_name : field})\n\t\t\tif(event == \"blur\")\n\t\t\t\tObject.assign(this.selectedField , {field_name : null})\n\n\t\t\tthis.item_details.makeSelectedFieldHighlighted()\n\t\t\tthis.selected_item_cart.makeSelectedButtonHighlighted();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif( field ==  \"quantity\" ){\n\t\t\tthis.selectedItem.qty = parseFloat(value);\n\t\t\tthis.editPosItemQty(this.selectedItem.name , this.selectedItem.qty);\n\n\t\t\t//redrawing\n\t\t\tthis.selected_item_cart.refreshSelectedItem();\n\t\t}\n\t\telse if( field ==  \"rate\" ){\n\t\t\tthis.selectedItem.rate = parseFloat(value);\n\n\t\t\t//recalculate the rate\n\t\t\tlet oldRate = this.selectedItem.rate;\n\t\t\tlet persont = this.selectedItem.discount_percentage\n\t\t\tlet montant = oldRate * (persont / 100)\n\n\t\t\tthis.selectedItem.discount_percentage = persont;\n\t\t\tthis.selectedItem.discount_amount     = montant;\n\n\t\t\tthis.editPosItemDiscountAmount(this.selectedItem.name , this.selectedItem.discount_amount);\n\t\t\tthis.editPosItemRate(this.selectedItem.name , this.selectedItem.rate);\n\n\t\t\t//redrawing\n\t\t\tthis.selected_item_cart.refreshSelectedItem();\n\t\t\tthis.item_details.refreshDate(this.selectedItem);\n\n\t\t}\n\t\telse if( field == \"discount_percentage\"){\n\n\t\t\t//recalculate the rate\n\t\t\tlet oldRate = this.selectedItem.rate;\n\t\t\tlet montant = oldRate * (parseFloat(value) / 100)\n\n\t\t\tthis.selectedItem.discount_percentage = parseFloat(value);\n\t\t\tthis.selectedItem.discount_amount     = montant;\n\n\t\t\tthis.editPosItemDiscountAmount(this.selectedItem.name , this.selectedItem.discount_amount);\n\t\t\tthis.editPosItemDiscountPercentage(this.selectedItem.name ,  this.selectedItem.discount_percentage);\n\n\n\t\t\t//redrawing\n\t\t\tthis.selected_item_cart.refreshSelectedItem();\n\t\t\tthis.item_details.refreshDate(this.selectedItem);\n\t\t}\n\t\telse if( field == \"discount_amount\"){\n\n\t\t\t//recalculate the rate\n\t\t\tlet oldRate = this.selectedItem.rate;\n\t\t\tlet persent = ((parseFloat(value) * 100) / oldRate).toFixed(2);\n\t\t\tlet montant = parseFloat(value);\n\n\t\t\t//prevent negatif result\n\t\t\tif(persent > 100){\n\t\t\t\tpersent = 100 ;\n\t\t\t}\n\t\t\tif(parseFloat(value) > oldRate){\n\t\t\t\tmontant = oldRate;\n\t\t\t}\n\n\t\t\tthis.selectedItem.discount_percentage = parseFloat(persent);\n\t\t\tthis.selectedItem.discount_amount     = montant;\n\n\n\t\t\tthis.editPosItemDiscountAmount(this.selectedItem.name , this.selectedItem.discount_amount);\n\t\t\tthis.editPosItemDiscountPercentage(this.selectedItem.name , this.selectedItem.discount_percentage);\n\n\t\t\tconsole.log(\"item ==>>> \" , this.selectedItem)\n\n\n\t\t\t//redrawing\n\t\t\tthis.selected_item_cart.refreshSelectedItem();\n\t\t\tthis.item_details.refreshDate(this.selectedItem);\n\n\t\t}\n\t}\n\n\n\tonKeyPressed( action  , key){\n\n\t\tconsole.log(\"<<we are in onKeyPressed function >>\")\n\t\tconsole.log(\"action ::: \" , action , \" key ::: \" , key)\n\n\t\tif(action == \"quantity\"){\n\t\t\tthis.item_details.requestFocus(\"quantity\")\n\t\t}\n\t\telse if(action == \"rate\"){\n\t\t\tthis.item_details.requestFocus(\"rate\")\n\t\t}\n\t\telse if(action == \"discount\"){\n\t\t\tthis.item_details.requestFocus(\"discount_percentage\")\n\t\t}\n\t\telse if(action == \"remove\"){\n\t\t\tthis.deleteItemFromPOsInvoice(this.selectedItem.name)\n\t\t\tthis.selected_item_cart.refreshSelectedItem();\n\t\t\tthis.onClose_details()\n\t\t}\n\t\telse if(action == \"delete\"){\n\n\t\t\tlet newValue =  parseFloat(this.item_details.deleteCharacter())\n\n\t\t\tif(this.selectedField.field_name == \"quantity\"){\n\t\t\t\tthis.selectedItem.qty = newValue;\n\t\t\t\tconst posItems = this.selectedItemMaps.get(this.selectedTab.tabName)\n\t\t\t}\n\t\t\telse if(this.selectedField.field_name == \"rate\"){\n\n\t\t\t\tthis.selectedItem.rate = newValue;\n\t\t\t\tconst posItems = this.selectedItemMaps.get(this.selectedTab.tabName)\n\n\t\t\t\t//recalculate the rate\n\t\t\t\tlet oldRate = this.selectedItem.rate;\n\t\t\t\tlet persont = this.selectedItem.discount_percentage\n\t\t\t\tlet montant = oldRate * (persont / 100)\n\n\t\t\t\tthis.selectedItem.discount_amount     = montant;\n\n\t\t\t}\n\t\t\telse if(this.selectedField.field_name == \"discount_percentage\"){\n\t\t\t\t//recalculate the rate\n\t\t\t\tlet oldRate = this.selectedItem.rate;\n\t\t\t\tlet montant = oldRate * (newValue / 100)\n\n\t\t\t\tthis.selectedItem.discount_percentage = newValue;\n\t\t\t\tthis.selectedItem.discount_amount     = montant;\n\n\t\t\t}\n\t\t\telse if(this.selectedField.field_name == \"discount_percentage\"){\n\t\t\t\t//recalculate the rate\n\t\t\t\tlet oldRate = this.selectedItem.rate;\n\t\t\t\tlet montant = oldRate * (newValue / 100)\n\n\t\t\t\t//asign the values to the selectedItem refrence\n\t\t\t\tthis.selectedItem.discount_percentage = newValue;\n\t\t\t\tthis.selectedItem.discount_rate     = montant;\n\n\t\t\t}\n\n\n\n\t\t}\n\t\telse if(action == \"addToField\"){\n\n\t\t\tif(this.selectedField.field_name == \"cash\"){\n\t\t\t\tthis.payment_cart.handleInput(key);\n\t\t\t}\n\t\t\telse{\n\n\t\t\t\tif( this.selectedField.field_name ==  \"quantity\" ){\n\t\t\t\t\tconst newVal = this.selectedItem.qty + key\n\t\t\t\t\tthis.selectedItem.qty = parseFloat(newVal);\n\t\t\t\t\tconsole.log(\"we are here, with : \" , this.selectedItem.qty)\n\n\t\t\t\t}\n\t\t\t\telse if( this.selectedField.field_name ==  \"rate\" ){\n\t\t\t\t\tconst newVal = this.selectedItem.rate + key\n\t\t\t\t\tthis.selectedItem.rate = parseFloat(newVal);\n\n\t\t\t\t}\n\t\t\t\telse if( this.selectedField.field_name ==  \"discount_percentage\" ){\n\t\t\t\t\t//recalculate the rate\n\t\t\t\t\tlet oldRate        = this.selectedItem.rate;\n\t\t\t\t\tlet old_percentage = this.selectedItem.discount_percentage ?? 0;\n\t\t\t\t\tlet input          = `${old_percentage}` + key ;\n\t\t\t\t\tlet discount_percentage = parseFloat(input);\n\t\t\t\t\tif(discount_percentage > 100){\n\t\t\t\t\t\tdiscount_percentage = 100;\n\t\t\t\t\t}\n\t\t\t\t\tlet montant = oldRate * ( discount_percentage / 100)\n\t\t\t\t\tlet newRate = oldRate - montant\n\n\n\t\t\t\t\tthis.selectedItem.discount_percentage = (discount_percentage);\n\t\t\t\t\tthis.selectedItem.discount_amount     = montant;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t}\n\n\t\t//update the posInvoice\n\t\tthis.editPosItemDiscountAmount(this.selectedItem.name , this.selectedItem.discount_amount);\n\t\tthis.editPosItemRate(this.selectedItem.name , this.selectedItem.rate);\n\t\tthis.editPosItemQty(this.selectedItem.name , this.selectedItem.qty);\n\n\t\t//update the ui\n\t\tthis.selected_item_cart.refreshSelectedItem()\n\t\tthis.item_details.refreshDate(this.selectedItem);\n\n\n\n\t}\n\n\n\tonCompleteOrder(){\n\n\n\n\n\t\t//check if they set a customer\n\t\tif(this.selectedCustomer.name == \"\"){\n\t\t\tfrappe.warn(\n\t\t\t\t\t'Customer didnt selected!',\n\t\t\t\t\t'you have to select a customer',\n\t\t\t\t\t()=>{\n\t\t\t\t\t},\n\t\t\t\t\t'Done',\n\t\t\t\t\tfalse\n\t\t\t)\n\t\t}\n\n\t\tlet items = []\n\n\n\t\tthis.selectedItemMaps.get(this.selectedTab.tabName).items.forEach(  item  =>{\n\t\t\t// we still didnt implement the price_list_rate and base_price_list_rate\n\t\t\t// same thing with actual_qty refering to the stock quantity\n\t\t\tlet newItem = {\n\t\t\t\t'item_name'               : item.name,\n\t\t\t\t'item_code'               : item.name,\n\t\t\t\t'rate'                    : item.rate,\n\t\t\t\t'qty'                     : item.qty,\n\t\t\t\t'description'             : item.name,\n\t\t\t\t'image'                   : item.image,\n\t\t\t\t'expense_account'         : 'Cost of Goods Sold - MS',\n\t\t\t\t'use_serial_batch_fields' : 1,\n\t\t\t\t'discount_percentage'     : item.discount_percentage,\n\t\t\t\t'discount_amount'         : item.discount_amount,\n\t\t\t\t'warehouse'               : this.selectedPosProfile.warehouse,\n\t\t\t\t'income_account'          : this.selectedPosProfile.income_account,\n\t\t\t\t'item_tax_rate'           : {}\n\t\t\t}\n\n\t\t\titems.push(newItem)\n\t\t})\n\n\n\n\t\tthis.selectedItemMaps.get(this.selectedTab.tabName).items = items\n\n\t\tif(items.length ==0)\n\t\t\treturn\n\n\n\t\tthis.selectedItemMaps.get(this.selectedTab.tabName).paid_amount       = this.invoiceData.paidAmount\n\t\tthis.selectedItemMaps.get(this.selectedTab.tabName).base_paid_amount  = this.invoiceData.paidAmount\n\t\tthis.selectedItemMaps.get(this.selectedTab.tabName).payments          = [{'mode_of_payment' : 'Cash' , 'amount' : this.invoiceData.paidAmount}]\n\t\tthis.selectedItemMaps.get(this.selectedTab.tabName).docstatus         = 1\n\t\tthis.selectedItemMaps.get(this.selectedTab.tabName).customer          = this.selectedCustomer.name\n\n\t\tthis.sellInvoices.set(this.selectedItemMaps.get(this.selectedTab.tabName).name , this.selectedItemMaps.get(this.selectedTab.tabName));\n\n\t\t//set status\n\t\tconst status = this.checkIfPaid(this.selectedItemMaps.get(this.selectedTab.tabName))\n\t\tthis.selectedItemMaps.get(this.selectedTab.tabName).status            = status\n\n\n\t\tthis.db.updatePosInvoice(\n\t\t\t\t\tthis.selectedItemMaps.get(this.selectedTab.tabName) ,\n\t\t\t\t\t(event) => {\n\t\t\t\t\t\tconsole.log(\"sucess => \" , event )\n\t\t\t\t\t},\n\t\t\t\t\t(event) => {\n\t\t\t\t\t\tconsole.log(\"failure => \" , event )\n\t\t\t\t\t}\n\t\t\t\t)\n\n\n\n\n\n\t\tthis.customer_box.setNotSynced();\n\n\t\tthis.selectedItemMaps.delete(this.selectedTab.tabName)\n\n\t\t//tabs\n\t\tlet tabs = Array.from(this.selectedItemMaps.keys())\n\n\t\t//if there are still tabs it will just set the first as selected\n\t\t//otherwise it will create one using the selected_item_cart class and set it as selected\n\t\tif(tabs.length > 0){\n\t\t\tthis.selectedTab.tabName = tabs[0]\n\t\t\tthis.selected_item_cart.refreshTabs();\n\t\t\tthis.selected_item_cart.refreshSelectedItem();\n\t\t}\n\t\telse{\n\t\t\tthis.selected_item_cart.createNewTab();\n\t\t}\n\n\t\tthis.onClose_payment_cart()\n\n\t}\n\n\n\tonSync(){\n\n\n\t\tif(this.POSOpeningEntry.name == '' ){\n\t\t\tthis.checkForPOSEntry();\n\t\t\treturn;\n\t\t}\n\n\t\t//calculate amount\n\t\tlet all_invoices = Array.from(this.sellInvoices.keys())\n\n\t\tif(all_invoices.length == 0){\n\n\t\t\t// with options\n\t\t\tfrappe.msgprint({\n\t\t\t\ttitle: __('Sync Complete'),\n\t\t\t\tindicator: 'green',\n\t\t\t\tmessage: __('All data is already synchronized.')\n\t\t\t});\n\t\t\treturn;\n\n\t\t}\n\n\t\t//progress\n\t\tfrappe.show_progress('Syncing Invoices...' , 0 , all_invoices.length , 'syncing')\n\n\t\tlet counter     = 0  ;\n\t\tlet failure     = 0  ;\n\t\tlet seccess     = 0  ;\n\t\tlet invoicesRef = [] ;\n\n\t\tall_invoices.forEach(invoiceName =>{\n\t\t\t// we still didnt implement the  base_paid_amount and amount_eligible_for_commissionseen\n\t\t\t// value in deafault pos ==>  [\"Administrator\"]. i think it is an array.\n\n\t\t\tfrappe.db.insert(\n\t\t\t\t\tthis.sellInvoices.get(invoiceName)\n\t\t\t).then(r =>{\n\n\t\t\t\tinvoicesRef.push({'pos_invoice' : r.name , 'customer' : r.customer } )\n\n\t\t\t\tconsole.log(\"the pos invoice :: \" , r)\n\n\t\t\t\t//this.checkIfPaid()\n\n\t\t\t\tthis.selectedItemMaps.get(this.selectedTab.tabName).status = 'Unpaid'\n\n\t\t\t\tthis.db.updatePosInvoice(\n\t\t\t\t\t\t\tthis.selectedItemMaps.get(this.selectedTab.tabName) ,\n\t\t\t\t\t\t\t(event) => {\n\t\t\t\t\t\t\t\tconsole.log(\"sucess => \" , event )\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t(event) => {\n\t\t\t\t\t\t\t\tconsole.log(\"failure => \" , event )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)\n\n\n\n\t\t\t\tthis.sellInvoices.delete(invoiceName)\n\n\t\t\t\tcounter += 1 ;\n\n\t\t\t\tfrappe.show_progress('Syncing Invoices...' , counter , all_invoices.length , 'syncing')\n\n\t\t\t\tif(counter == all_invoices.length){\n\t\t\t\t\tfrappe.hide_progress();\n\t\t\t\t\tthis.customer_box.setSynced();\n\t\t\t\t}\n\n\t\t\t}).catch(err=>{\n\t\t\t\tcounter += 1 ;\n\t\t\t\tfailure += 1 ;\n\t\t\t})\n\n\t\t})\n\n\t}\n\n\n\tcheckIfPaid(pos){\n\n\n\t\tconsole.log(\"checking the pos now : \" , pos  , \"and the paid amount\" , pos.paid_amount)\n\n\t\tlet netTotal   = 0 ;\n\t\tlet grandTotal = 0 ;\n\t\tlet allTaxes   = 0 ;\n\t\tlet discount   = 0 ;\n\n\t\t//net total\n\t\tpos.items.forEach( item => {\n\t\t\tnetTotal += item.qty * item.rate\n\t\t})\n\n\t\t//taxes\n\t\tconst taxTemplate = pos.taxes_and_charges\n\t\tconst taxes       = this.getSalesTaxes(pos)\n\t\ttaxes.forEach(tax =>{\n\t\t\tallTaxes += (tax.rate / 100) * netTotal\n\t\t})\n\n\t\t//discount\n\t\tdiscount = (pos.additional_discount_percentage / 100) * netTotal\n\n\n\t\tgrandTotal  = netTotal + allTaxes - discount\n\n\n\t\tif(pos.paid_amount == 0){\n\t\t\treturn \"Unpaid\"\n\t\t}\n\t\telse if(pos.paid_amount < grandTotal){\n\t\t\treturn \"Unpaid\"\n\t\t}\n\t\telse{\n\t\t\treturn \"Paid\"\n\t\t}\n\n\t}\n\n\n\tcheckIfRateZero(pos){\n\t\treturn pos.items.some(item => item.rate == 0)\n\t}\n\n\n\tonClosePOS(){\n\n\t\tlet all_tabs = Array.from(this.sellInvoices.keys())\n\t\t//check if you still have an invoice to sync\n\t\tif(all_tabs.length > 0){\n\t\t\tfrappe.throw(__(`you have ${all_tabs.length} invoice to sync first.`))\n\t\t}\n\n\t\t//otherwise you can close the voucher\n\t\tlet voucher               = frappe.model.get_new_doc(\"POS Closing Entry\");\n\t\tvoucher.pos_opening_entry = this.POSOpeningEntry.name;\n\t\tvoucher.pos_profile       = this.POSOpeningEntry.pos_profile;\n\t\tvoucher.company           = this.POSOpeningEntry.company ;\n\t\tvoucher.user              = frappe.session.user  ;\n\t\tvoucher.posting_date      = frappe.datetime.now_date();\n\t\tvoucher.posting_time      = frappe.datetime.now_time();\n\n\n\t\tfrappe.set_route(\"Form\", \"POS Closing Entry\", voucher.name);\n\n\t\t//delete the open entry because you create the closing entr,\n\t\t//that my the user submited it, so when the code find its name empty,\n\t\t//it will try to fetch an open pos entry if there is no one opening,\n\t\t//it will force the user to create one.\n\t\tthis.POSOpeningEntry.name = ''\n\n\n\t}\n\n\n\t/****************************  listeners *******************************/\n\n\tsetListeners(){\n\t\twindow.addEventListener('offline' , function(){\n\t\t\tfrappe.msgprint('you lose the connection (offline mode)')\n\t\t})\n\n\t\twindow.addEventListener('online' , function(){\n\t\t\tfrappe.msgprint('the connection is back (online mode)')\n\t\t})\n\t}\n\t/*****************************  tools  **********************************/\n\tgetItemPrice(itemId){\n\t\tconst price = this.itemPrices.find(itemPrice => itemPrice.item_code == itemId)\n\t\treturn price ? price.price_list_rate  : 0\n        }\n\n\tcheckServiceWorker(){\n\n\t\t// Check if service workers are supported\n\t\tif (!('serviceWorker' in navigator)) {\n\t\t\treturn;\n\t\t}\n\n\n\t\t// Register the service worker on window load\n \t\twindow.addEventListener('DOMContentLoaded', () => {\n\t\tnavigator.serviceWorker\n\t\t\t.register('./sw.js')\n\t\t\t.then(reg => console.log(\"Service Worker registered successfully.\"))\n\t\t\t.catch(err => console.log(`Service Worker registration failed: ${err}`));\n\t\t});\n\n\n\t\tthis.sw = new pos_ar.PointOfSale.Sw()\n\n\t\t// Additionally, check if DOM is already loaded\n\t\tif (document.readyState === 'complete') {\n\t\t\tconsole.log(\"DOM was already loaded\");\n\t\t\tnavigator.serviceWorker\n\t\t\t\t.register('../assets/pos_ar/public/js/sw.js')\n\t\t\t\t.then(reg => console.log(\"Service Worker registered successfully.\"))\n\t\t\t\t.catch(err => console.log(`Service Worker registration failed: ${err}`));\n\t\t}\n\n\n\t}\n\n\n\taddItemToPosInvoice( clickedItem ){\n\n\n\t\tlet clonedItem = {} ;\n\t\tObject.assign(clonedItem , clickedItem)\n\n\n\t\tconsole.log(\"clicked item ::: \" , clickedItem)\n\n\t\tconst posInvoice = this.selectedItemMaps.get(this.selectedTab.tabName);\n\t\tconst posItems   = posInvoice.items;\n\n\t\tlet exist = false ;\n\n\t\tposItems.forEach(item => {\n\t\t\tif(item.name == clickedItem.name){\n\t\t\t\texist = true;\n\t\t\t\titem.qty += 1 ;\n\t\t\t}\n\t\t})\n\n\t\tif(!exist){\n\t\t\tclonedItem.discount_amount     = 0 ;\n\t\t\tclonedItem.discount_percentage = 0 ;\n\t\t\tclonedItem.qty                 = 1 ;\n\t\t\tclonedItem.rate                = this.getItemPrice(clickedItem.name);\n\t\t\tposItems.push(clonedItem)\n\t\t}\n\n\n\t}\n\n\tdeleteItemFromPOsInvoice( itemId ){\n\t\tconst posInvoice = this.selectedItemMaps.get(this.selectedTab.tabName);\n\t\tconst posItems   = posInvoice.items ;\n\n\t\tposInvoice.items  = posItems.filter( item => item.name != itemId )\n\n\t\tthis.selectedItem = structuredClone({ name : \"\"})\n\t\tconsole.log(\"new pos invoice : \" , posInvoice.items)\n\t}\n\n\teditPosItemQty(itemName , qty){\n\t\tlet items = this.selectedItemMaps.get(this.selectedTab.tabName).items\n\t\titems.forEach(item => {\n\t\t\tif(item.name == itemName){\n\t\t\t\titem.qty = qty\n\t\t\t}\n\t\t})\n\t}\n\teditPosItemRate(itemName , rate){\n\t\tlet items = this.selectedItemMaps.get(this.selectedTab.tabName).items\n\t\titems.forEach(item => {\n\t\t\tif(item.name == itemName){\n\t\t\t\titem.rate = rate\n\t\t\t}\n\t\t})\n\t}\n\teditPosItemDiscountPercentage(itemName , discountPercentage){\n\t\tlet items = this.selectedItemMaps.get(this.selectedTab.tabName).items\n\t\titems.forEach(item => {\n\t\t\tif(item.name == itemName){\n\t\t\t\titem.discount_percentage = discountPercentage\n\t\t\t}\n\t\t})\n\t}\n\teditPosItemDiscountAmount(itemName , discountAmount){\n\t\tlet items = this.selectedItemMaps.get(this.selectedTab.tabName).items\n\t\titems.forEach(item => {\n\t\t\tif(item.name == itemName){\n\t\t\t\titem.discount_amount = discountAmount\n\t\t\t}\n\t\t})\n\t}\n\n\tgetSalesTaxes(pos){\n\n\t\tconst taxTemplateId = pos.taxes_and_charges\n\t\tlet   salesTax      = []\n\n\t\tthis.sales_taxes_and_charges.forEach( tax => {\n\t\t\tif(tax.parent == taxTemplateId){\n\t\t\t\tconsole.log(\"debuging ==> parent : \" , tax.parent , \" taxTemplateId : \" , taxTemplateId)\n\t\t\t\tsalesTax.push(tax)\n\t\t\t}\n\t\t})\n\t\treturn salesTax;\n\t}\n\n        /*********************  get data functions ******************************/\n\n\n        async  fetchCustomers() {\n                try {\n                        return await frappe.db.get_list('Customer', {\n                                fields: ['name', 'customer_name' ],\n                                filters: {},\n\t\t\t\tlimit : 100000\n                        })\n                } catch (error) {\n                        console.error('Error fetching customers:', error);\n                        return []\n                }\n        }\n\n        async fetchItemGroups() {\n                try {\n                        return await frappe.db.get_list('Item Group', {\n                                fields: ['name', 'item_group_name' , 'parent_item_group' , 'is_group' ],\n                                filters: {},\n\t\t\t\tlimit : 100000\n                        })\n                } catch (error) {\n                        console.error('Error fetching Item Group :', error);\n                        return []\n                }\n        }\n\n        async fetchItems() {\n                try {\n                        return await frappe.db.get_list('Item', {\n                                fields: ['name', 'item_name' , 'image' , 'item_group' , 'stock_uom' ],\n                                filters: { disabled : 0 },\n\t\t\t\tlimit : 100000\n                        })\n                } catch (error) {\n                        console.error('Error fetching Item Group :', error);\n                        return []\n                }\n        }\n\n        async fetchItemPrice() {\n                try {\n                        return await frappe.db.get_list('Item Price', {\n                                fields: ['name', 'item_code' , 'item_name' , 'price_list', 'price_list_rate' ],\n                                filters: { price_list : \"Standard Selling\"},\n\t\t\t\tlimit : 100000\n                        })\n                } catch (error) {\n                        console.error('Error fetching Item Group :', error);\n                        return []\n                }\n        }\n\n        async fetchPriceList() {\n                try {\n                        return await frappe.db.get_list('Price List', {\n                                fields: ['name', 'price_list_name' , 'currency' ],\n                                filters: {selling : 1 },\n\t\t\t\tlimit : 100000\n                       })\n                } catch (error) {\n                        console.error('Error fetching Item Group :', error);\n                        return []\n                }\n        }\n\n\n        async fetchWarehouseList(){\n                try{\n                        return await frappe.db.get_list('Warehouse' , {\n                                fields  : ['name' , 'warehouse_name'],\n                                filters : {},\n\t\t\t\tlimit : 100000\n                        })\n                }\n                catch(error){\n                        console.error('Error fetching Warehouse list : ' , error)\n                        return [];\n                }\n        }\n\n        async fetchPosProfileList(){\n                try{\n                        return await frappe.db.get_list('POS Profile' , {\n                                fields  : ['name' , 'warehouse' , 'income_account' , 'write_off_account' , 'write_off_cost_center' , 'taxes_and_charges' , 'tax_category'],\n                                filters : { disabled : 0},\n\t\t\t\tlimit : 100000\n                        })\n                }\n                catch(error){\n                        console.error('Error fetching Warehouse list : ' , error)\n                        return [];\n                }\n        }\n\n\n        async fetchSalesTaxesAndChargesTemplate(){\n                try{\n                        return await frappe.db.get_list('Sales Taxes and Charges Template' , {\n                                fields  : ['name' , 'title' , 'is_default' , 'company' , 'tax_category' , 'taxes' ],\n                                filters : { disabled : 0},\n\t\t\t\tlimit : 100000\n                        })\n                }\n                catch(error){\n                        console.error('Error fetching Warehouse list : ' , error)\n                        return [];\n                }\n        }\n\n\n        async fetchSalesTaxesAndCharges(){\n                try{\n                        return await frappe.db.get_list('Sales Taxes and Charges' , {\n\t\t\t\tfields  : ['name'  ,  'cost_center' , 'description' , 'included_in_print_rate' , 'rate' , 'included_in_paid_amount' , 'parent' ],\n                                filters : { parenttype : 'Sales Taxes and Charges Template'},\n\t\t\t\tlimit : 100000\n                        })\n                }\n                catch(error){\n                        console.error('Error fetching Warehouse list : ' , error)\n                        return [];\n                }\n        }\n\n\n        async fetchBinList(){\n                try{\n                        return await frappe.db.get_list('Bin' , {\n                                fields  : ['actual_qty' , 'item_code' , 'warehouse'],\n                                filters : { },\n\t\t\t\tlimit   : 1\n                        })\n                }\n                catch(error){\n                        console.error('Error fetching Bin list : ' , error)\n                        return [];\n                }\n        }\n\n};\n", "\n\npos_ar.PointOfSale.pos_item_selector = class {\n\n\tconstructor(\n\t\twrapper ,\n\t\titem_list ,\n\t\titem_group_list ,\n\t\titem_prices,\n\t\tonItemClick\n\t){\n\t\tthis.wrapper           = wrapper;\n\t\tthis.item_list         = item_list;\n\t\tthis.item_group_list   = item_group_list;\n\t\tthis.item_prices       = item_prices;\n\t\tthis.on_item_click     = onItemClick;\n\n\n\t\t//class functions invocation\n\t\tthis.start_item_selector();\n        }\n\n\n\tstart_item_selector(){\n\t\tthis.prepare_select_box();\n\t\tthis.setItemGroupsInList();\n\t\tthis.setItemInFlow(this.getItemByItemGroup(\"\"))\n\t\tthis.setListeners();\n\t}\n\n\n\n\t/***********************  ui  functions  ***************************************/\n\tprepare_select_box(){\n\t\tthis.wrapper.append('<div id=\"SelectorBox\" class=\"columnBox\"></div>')\n\n\t\tthis.selectorBox  = this.wrapper.find(\"#SelectorBox\");\n\t\tthis.selectorBox.append('<div id=\"selectorBoxHeader\" class=\"rowBox header\"></div>')\n\n\t\tthis.header       = this.selectorBox.find(\"#selectorBoxHeader\");\n\t\tthis.header.append('<h4 class=\"CartTitle\">Items</h4>')\n\t\tthis.header.append('<div id=\"inputsBox\" class=\"rowBox align_center\"></div>')\n\n\t\tthis.inputBox     = this.header.find(\"#inputsBox\");\n\t\tthis.inputBox.append('<input type=\"text\" autocomplete=\"off\"  maxlength=\"140\" placeholder=\"Search by item code, serial number or barcode\" id=\"ItemInput\" name=\"item\" placeHolder=\"Enter the customer\">')\n\t\tthis.inputBox.append('<input list=\"ItemGroupList\"  id=\"ItemGroupInput\" name=\"ItemGroup\" placeHolder=\"Item Group\">')\n\t\tthis.inputBox.append('<datalist id=\"ItemGroupList\"></datalist>')\n\n\t\tthis.itemGroupList = this.inputBox.find(\"#ItemGroupList\");\n\t\tthis.itemGroupList.append('<option>fetching Item Groups ...</option>')\n\n\t\tthis.selectorBox.append('<div id=\"itemsContainer\" class=\"rowBox row_wrap\"></div>')\n\t\tthis.itemsContainer = this.selectorBox.find('#itemsContainer')\n\t}\n\n\n\tsetItemGroupsInList(){\n\t\tconst groupItemList_html = document.getElementById(\"ItemGroupList\");\n\t\tgroupItemList_html.innerHTML = \"\" ;\n\t\tthis.item_group_list.forEach(group_item =>{\n\t\t\tconst option = document.createElement(\"option\");\n\t\t\toption.value = group_item.name;\n\t\t\toption.textContent = group_item.customer_name;\n\t\t\tgroupItemList_html.appendChild(option);\n\t\t})\n\t}\n\n\tsetItemInFlow(filtered_item_list){\n        \tconst itemsContainer_html = document.getElementById(\"itemsContainer\");\n        \titemsContainer_html.innerHTML = \"\";\n        \tfiltered_item_list.forEach(item =>{\n                \tconst itemBox = document.createElement(\"div\");\n                \titemBox.classList.add(\"itemBox\");\n                \titemBox.classList.add(\"columnBox\");\n                \titemBox.classList.add(\"C_A_Center\");\n\n                \titemBox.addEventListener('click' , event => {\n\t\t\t\tthis.on_item_click(item);\n                \t});\n\n\n                \tif(item.image){\n                        \tconst itemImage = document.createElement(\"img\");\n                        \titemImage.classList.add(\"itemImage\");\n                        \titemImage.src = item.image\n                        \titemBox.appendChild(itemImage);\n                \t}\n                \telse{\n                        \tconst itemImageHolder = document.createElement(\"div\");\n                        \titemImageHolder.classList.add(\"itemImage\");\n                        \titemImageHolder.classList.add(\"rowBox\");\n                        \titemImageHolder.classList.add(\"centerItem\");\n                        \tconst firstLatter = document.createElement(\"h1\");\n                        \tfirstLatter.textContent = item.item_name[0];\n                        \tfirstLatter.style.color = \"#707070\";\n                        \titemImageHolder.appendChild(firstLatter);\n                        \titemBox.appendChild(itemImageHolder);\n                \t}\n                \tconst itemName = document.createElement(\"div\");\n                \titemName.textContent = item.name ;\n                \titemName.classList.add(\"itemTitle\");\n                \titemBox.appendChild(itemName);\n\n\n                \tconst price = document.createElement(\"div\");\n                \tprice.classList.add(\"itemPrice\");\n                \tprice.textContent = this.getItemPrice(item.name) + \" DA\";\n                \titemBox.appendChild(price);\n\n\n                \titemsContainer_html.appendChild(itemBox);\n        \t});\n\n\t}\n\n\t//show and hide\n\tshowCart(){\n\t\tthis.selectorBox.css(\"display\" , \"flex\")\n\t}\n\n\thideCart(){\n\t\tthis.selectorBox.css(\"display\" , \"none\")\n\t}\n\n\t//**************** set listeners method ****************************//\n\tsetListeners(){\n\t\tconst groupItemListInput = document.getElementById(\"ItemGroupInput\");\n                groupItemListInput.addEventListener('input' , (even)=>{\n\t\t\tthis.setItemInFlow(this.getItemByItemGroup(event.target.value))\n\t\t})\n\n\t\tconst itemInput = document.getElementById(\"ItemInput\");\n\t\titemInput.addEventListener('input' , (event)=>{\n\t\t\tthis.setItemInFlow(this.filterListByItemData(event.target.value))\n\t\t})\n\t}\n\n\t//**************** tools method ****************************//\n\n\t//filter list by item code or barcode\n\tfilterListByItemData( value ){\n\t\treturn this.item_list.filter(item => item.name.toLowerCase().includes(value) || item.scan_barcode == value)\n\t}\n\n\n\tgetItemByItemGroup(item_group){\n\n\n\t\tlet groups = [];\n\n\t\tlet getChild = (grp)=>{\n\t\t\tgroups.push(grp);\n\t\t\tthis.item_group_list.forEach(g=>{\n\t\t\t\tif(g.parent_item_group == grp){\n\t\t\t\t\tgroups.push(g.name)\n\t\t\t\t\tif(g.is_group){\n\t\t\t\t\t\tgetChild(g.name)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t};\n\n\n\t\tgetChild(item_group);\n\n\n\t\tlet filtredItemList = [];\n\n\t\tlet getFiltredItems = (group)=>{\n\t\t\tthis.item_list.forEach(item =>{\n\t\t\t\tif(item.item_group == group){\n\t\t\t\t\tfiltredItemList.push(item);\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\n\t\tgroups.forEach(group =>{\n\t\t\tgetFiltredItems(group);\n\t\t})\n\n\n\t\treturn filtredItemList ;\n\t}\n\n\n\tgetItemPrice(itemId){\n\t\tconst price = this.item_prices.find(itemPrice => itemPrice.item_code == itemId)\n\t\treturn price ? price.price_list_rate  : 0\n\t}\n\n}\n", "\npos_ar.PointOfSale.pos_customer_box = class{\n\n\tconstructor(\n\t\twrapper          ,\n\t\tcustomersList    ,\n\t\tselectedCustomer ,\n\t\tbackHome         ,\n\t\tonSync           ,\n\t\tonMenuClick      ,\n\t){\n\t\tthis.wrapper           = wrapper          ;\n\t\tthis.customers_list    = customersList    ;\n\t\tthis.selected_customer = selectedCustomer ;\n\t\tthis.back_home         = backHome         ;\n\t\tthis.on_sync           = onSync           ;\n\t\tthis.on_menu_click     = onMenuClick      ;\n\n\n\t\tconsole.log(\"log =+=> \" , onMenuClick)\n\n\n\t\t//local\n\t\tthis.online  = true    ;\n\t\tthis.show_menu = false ;\n\t\tthis.start_work()      ;\n\t}\n\n\n\n\tstart_work(){\n\t\tthis.prepare_customer_box();\n\t\tthis.setCustomersInList();\n\t\tthis.setListeners();\n\t}\n\n\tprepare_customer_box(){\n\n\t\tthis.wrapper.append('<div id=\"ActionsContainerBox\" class=\"rowBox align_center\">');\n\t\tthis.actionContainer = this.wrapper.find('#ActionsContainerBox');\n\n\t\tthis.actionContainer.append('<div id=\"CustomerBox\" class=\"rowBox align_center\">');\n\t\tthis.actionContainer.append('<div id=\"MenuBox\"     class=\"rowBox centerItem\">');\n\t\tthis.actionContainer.append('<div id=\"HomeBox\"     class=\"rowBox centerItem\"  style=\"display:none;\">');\n\n\n\n\t\tthis.home = this.actionContainer.find('#HomeBox')\n\t\tthis.home.append('<img src=\"/assets/pos_ar/images/home.png\" alt=\"Home\" id=\"homeBoxIcon\" >')\n\n\t\tthis.menu = this.actionContainer.find('#MenuBox')\n\t\tthis.menu.append('<img src=\"/assets/pos_ar/images/menu.png\" alt=\"Menu\" id=\"MenuBtn\" >')\n\t\tthis.menu.append('<div id=\"menuItemsContainer\"     class=\"columnBox\">');\n\n\t\tthis.menuItemsContainer = this.actionContainer.find('#menuItemsContainer')\n\t\tthis.menuItemsContainer.append('<div id=\"posInvoiceMenuItem\" class=\"menuItem\">Recent POS Invoices</div>')\n\t\tthis.menuItemsContainer.append('<div id=\"closePosMenuItem\"   class=\"menuItem\">Close the POS</div>')\n\t\tthis.menuItemsContainer.append('<div id=\"settingMenuItem\"    class=\"menuItem\">Setting</div>')\n\n\t\tthis.pos_invoices = this.menuItemsContainer.find('#posInvoiceMenuItem')\n\t\tthis.close_pos    = this.menuItemsContainer.find('#closePosMenuItem')\n\t\tthis.setting      = this.menuItemsContainer.find('#settingMenuItem')\n\n\t\tthis.customerBox = this.actionContainer.find('#CustomerBox');\n\t\tthis.customerBox.append('<select  id=\"CustomerInput\" placeHolder=\"Enter the customer\"></select>')\n\n\t\tthis.customer_selecte = this.customerBox.find('#CustomerInput')\n\t\tthis.customerBox.append('<div id=\"syncBtn\" class=\"Synced\">Sync</div>')\n\n\t\tthis.sync_btn = this.customerBox.find('#syncBtn')\n\t}\n\n\n\tsetCustomersInList(){\n\n\t\tconst customerList_html = document.getElementById(\"CustomerInput\");\n\t\tcustomerList_html.innerHTML = \"\" ;\n\n\t\tthis.customers_list.forEach(customer =>{\n\t\t\tconst option = document.createElement(\"option\");\n\t\t\toption.value = customer.name;\n\t\t\toption.textContent = customer.customer_name;\n\t\t\tcustomerList_html.appendChild(option);\n\t\t})\n\t}\n\n\t//show and hide\n\thideActionBar(){\n\t\tthis.customerBox.css('display' , 'none');\n\t\tthis.home.css('display' , 'flex');\n\t\tthis.actionContainer.css('flex-direction' , 'row-reverse')\n\t}\n\n\tshowActionBar(){\n\t\tthis.customerBox.css('display' , 'flex');\n\t\tthis.home.css('display' , 'none');\n\t\tthis.actionContainer.css('flex-direction' , 'row')\n\t}\n\n\n\n\tsetListeners(){\n\n\t\tthis.customerBox.find('#syncBtn').on('click' , (event)=>{\n\t\t\tthis.on_sync();\n\t\t})\n\n\t\tthis.customerBox.find('#CustomerInput').on('input' , (event)=>{\n\t\t\tconst customer_value = event.target.value ;\n\n\t\t\tthis.customers_list.forEach( customer => {\n\t\t\t\tif( customer.name == customer_value){\n\t\t\t\t\tconsole.log(\"selected customer : \" , customer)\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\n\t\tthis.close_pos.on('click' , (event)=>{\n\t\t\tthis.on_menu_click('close_pos');\n\t\t})\n\n\t\tthis.pos_invoices.on('click' , (event)=>{\n\t\t\tthis.on_menu_click('recent_pos');\n\t\t})\n\n\t\tthis.setting.on('click' , (event)=>{\n\t\t\tthis.on_menu_click('settings');\n\t\t})\n\n\n\t\tthis.menu.on('click' , (event)=>{\n\n\t\t\tif(this.show_menu){\n\t\t\t\tthis.show_menu = !this.show_menu\n\t\t\t\tthis.menuItemsContainer.css('visibility' , 'hidden')\n\t\t\t\tthis.menuItemsContainer.css('opacity' , '0')\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.show_menu = !this.show_menu\n\t\t\t\tthis.menuItemsContainer.css('visibility' , 'visible')\n\t\t\t\tthis.menuItemsContainer.css('opacity' , '1')\n\t\t\t}\n\n\t\t})\n\n\t\tthis.home.on('click' , (event)=>{\n\t\t\tthis.back_home()\n\t\t})\n\n\t}\n\n\tsetSynced(){\n\t\tthis.sync_btn.addClass('Synced')\n\t\tthis.sync_btn.removeClass('NotSynced')\n\t}\n\n\tsetNotSynced(){\n\t\tthis.sync_btn.addClass('NotSynced')\n\t\tthis.sync_btn.removeClass('Synced')\n\t}\n\n\n\n\n\n}\n", "\npos_ar.PointOfSale.pos_selected_item_cart = class{\n\n\tconstructor(\n\t\twrapper           ,\n\t\tselectedItemMaps  ,\n\t\tpriceLists        ,\n\t\tselectedPriceList ,\n\t\tsalesTaxes        ,\n\t\tinvoiceData       ,\n\t\tselectedTab       ,\n\t\tselectedItem      ,\n\t\tselectedField     ,\n\t\tonSelectedItemClick,\n\t\tonTabClick        ,\n\t\tonKeyPressed      ,\n\t\tcreateNewTab      ,\n\t\tonCheckoutClick   ,\n\t){\n\t\tthis.wrapper                 = wrapper;\n\t\tthis.selected_item_maps      = selectedItemMaps;\n\t\tthis.price_lists             = priceLists      ;\n\t\tthis.selected_price_list     = selectedPriceList ;\n\t\tthis.sales_taxes             = salesTaxes      ;\n\t\tthis.invoice_data            = invoiceData     ;\n\t\tthis.selected_tab            = selectedTab     ;\n\t\tthis.selected_item           = selectedItem    ;\n\t\tthis.selected_field          = selectedField   ;\n\t\tthis.on_key_pressed          = onKeyPressed    ;\n\t\tthis.on_checkout_click       = onCheckoutClick ;\n\t\tthis.on_selected_item_click  = onSelectedItemClick;\n\t\tthis.on_tab_click            = onTabClick      ;\n\t\tthis.create_new_tab          = createNewTab    ;\n\n\t\t//local\n\t\tthis.taxes_map   = new Map();\n\t\tthis.total_tax_amout = 0 ;\n\t\tthis.counter    = 1 ;\n\t\tthis.show_discount = false ;\n\n\t\tthis.start_work();\n\t}\n\n\n\n\t// start the class function\n\tstart_work(){\n\t\tthis.prepare_selected_item_cart();\n\t\tthis.fullfillPriceList();\n\t\tthis.setButtonsListeners();\n\t\tthis.setListener()\n\t}\n\n\t/********************************* ui *****************************************/\n\n\tprepare_selected_item_cart(){\n\n\t\tthis.wrapper.append('<div id=\"tabs\"    class=\"rowBox\"><div id=\"tabs_container\" class=\"rowBox\"></div></div>')\n\t\tthis.wrapper.append('<div id=\"CartBox\" class=\"columnBox\"></div>')\n\n\n\t\tthis.tabs_bar       = this.wrapper.find(\"#tabs\")\n\t\tthis.tabs_container = this.tabs_bar.find('#tabs_container')\n\t\tthis.cartBox        = this.wrapper.find(\"#CartBox\")\n\n\n\t\tthis.tabs_container.append('<div class=\"tab selected rowBox align_center\"><div class=\"tabName\">C1</div><img src=\"/assets/pos_ar/images/cancel.png\" width=\"10px\" height=\"10px\" class=\"tabDeleteBtn\"></div>')\n\t\tthis.tabs_bar.append('<div id=\"addTabBtn\" class=\"tab unselected\">+</div>')\n\n\n\t\tthis.add_tab_button = this.tabs_bar.find('#addTabBtn')\n\n\t\tthis.cartBox.append('<div id=\"CartBoxTopBar\" class=\" rowBox align_center  row_sbtw\"><div>')\n\t\tthis.cartBox.append('<div id=\"cartHeader\" class=\"rowBox row_sbtw align_center\"></div>')\n\t\tthis.cartBox.append('<div id=\"selectedItemsContainer\" class=\"columnBox\"></div>')\n\t\tthis.cartBox.append('<div id=\"cartFooter\" class=\"columnBox\"></div>')\n\n\t\tthis.cartTopBar = this.cartBox.find('#CartBoxTopBar')\n\t\tthis.cartTopBar.append('<h4 class=\"CartTitle\">Item Cart</h4>')\n\t\tthis.cartTopBar.append('<div id=\"selectedItemsPriceListInput\"></div>')\n\n\t\tthis.priceListInputContainer = this.cartTopBar.find(\"#selectedItemsPriceListInput\")\n\t\tthis.priceListInputContainer.append('<select  id=\"PriceListInput\" name=\"PriceList\" placeHolder=\"Choice a Price list\">')\n\t\tthis.priceListInput = this.priceListInputContainer.find('#PriceListInput')\n\n\t\tthis.cartHeader = this.cartBox.find('#cartHeader')\n\t\tthis.cartHeader.append('<div><h6>Item</h6></div>')\n\t\tthis.cartHeader.append('<div id=\"cartHeaderTitles\" class=\"rowBox\"></div>')\n\n\t\tthis.cartHeaderTitles = this.cartHeader.find('#cartHeaderTitles')\n\t\tthis.cartHeaderTitles.append('<div id=\"quantityTitle\"><h6>Quantity</h6></div>')\n\t\tthis.cartHeaderTitles.append('<div id=\"amountTitle\">  <h6>Amount  </h6></div>')\n\n\t\tthis.selectedItemContainer = this.cartBox.find('#selectedItemsContainer')\n\n\n\n\n\t\tthis.cartFooter = this.cartBox.find('#cartFooter')\n\t\tthis.cartFooter.append('<div id=\"cartDetails\" class=\"columnBox\"></div>')\n\t\tthis.cartFooter.append('<div id=\"editSelectedItemCart\"></div>')\n\t\tthis.cartFooter.append('<button type=\"button\" id=\"checkoutBtn\"> Checkout </button>')\n\n\t\tthis.cartDetails = this.cartFooter.find('#cartDetails')\n\t\tthis.cartDetails.append('<div id=\"discount\" class=\"rowBox align_center row_sbtw\"></div>')\n\t\tthis.cartDetails.append('<div id=\"totalQuantity\" class=\"rowBox align_center row_sbtw\"></div>')\n\t\tthis.cartDetails.append('<div id=\"netTotal\" class=\"rowBox align_center row_sbtw\"></div>')\n\t\tthis.cartDetails.append('<div id=\"VAT\" class=\"columnBox\"></div>')\n\t\tthis.cartDetails.append('<div id=\"grandTotal\" class=\"rowBox align_center row_sbtw\"></div>')\n\n\t\tthis.discount      = this.cartDetails.find('#discount')\n\t\tthis.discount.append('<div id=\"addDiscountTitle\">Add Discount % </div>')\n\t\tthis.discount.append('<input type=\"number\" id=\"addGlobalDiscountInput\" value=\"0\" step=\"1\" min=\"0\" max=\"100\" >')\n\t\tthis.discountInput = this.discount.find('#addGlobalDiscountInput')\n\t\tthis.discountTitle = this.discount.find('#addDiscountTitle')\n\n\t\tthis.totalQuantity = this.cartDetails.find('#totalQuantity')\n\t\tthis.totalQuantity.append('<div id=\"totalQuantityTitle\">Total Quantity</div>')\n\t\tthis.totalQuantity.append('<div id=\"totalQuantityValue\">0</div>')\n\n\t\tthis.netTotal      = this.cartDetails.find('#netTotal')\n\t\tthis.netTotal.append('<div id=\"netTotalTitle\">Net Total</div>')\n\t\tthis.netTotal.append('<div id=\"netTotalValue\">0.00</div>')\n\n\t\tthis.vat           = this.cartDetails.find('#VAT')\n\t\tthis.sales_taxes.forEach( tax =>{\n\t\t\tthis.vat.append(`<div id=\"taxConatiner_${tax.name}\" class=\"rowBox align_center row_sbtw\"></div>`)\n\t\t\tconst taxContainer = this.vat.find(`#taxConatiner_${tax.name}`)\n\t\t\ttaxContainer.append(`<div id=\"tax_${tax.name}_Title\">${tax.description}</div>`)\n\t\t\ttaxContainer.append(`<div id=\"tax_${tax.name}_Value\">0.00</div>`)\n\t\t})\n\n\t\tthis.grandTotal    = this.cartDetails.find('#grandTotal')\n\t\tthis.grandTotal.append('<div id=\"grandTotalTitle\">Grand Total</div>')\n\t\tthis.grandTotal.append('<div id=\"grandTotalValue\">0.00</div>')\n\n\t\tthis.editSelectedItem = this.cartFooter.find('#editSelectedItemCart')\n\t\tthis.editSelectedItem.append('<div class=\"grid-container\">')\n\n\t\tthis.buttonsContainer = this.editSelectedItem.find('.grid-container')\n\t\tthis.buttonsContainer.append('<button id=\"key_1\"        class=\"grid-item\">1</button>')\n\t\tthis.buttonsContainer.append('<button id=\"key_2\"        class=\"grid-item\">2</button>')\n\t\tthis.buttonsContainer.append('<button id=\"key_3\"        class=\"grid-item\">3</button>')\n\t\tthis.buttonsContainer.append('<button id=\"key_quantity\" class=\"grid-item\">Quantity</button>')\n\t\tthis.buttonsContainer.append('<button id=\"key_4\"        class=\"grid-item\">4</button>')\n\t\tthis.buttonsContainer.append('<button id=\"key_5\"        class=\"grid-item\">5</button>')\n\t\tthis.buttonsContainer.append('<button id=\"key_6\"        class=\"grid-item\">6</button>')\n\t\tthis.buttonsContainer.append('<button id=\"key_rate\"     class=\"grid-item\">Rate</button>')\n\t\tthis.buttonsContainer.append('<button id=\"key_7\"        class=\"grid-item\">7</button>')\n\t\tthis.buttonsContainer.append('<button id=\"key_8\"        class=\"grid-item\">8</button>')\n\t\tthis.buttonsContainer.append('<button id=\"key_9\"        class=\"grid-item\">9</button>')\n\t\tthis.buttonsContainer.append('<button id=\"key_discount\" class=\"grid-item\">Discount</button>')\n\t\tthis.buttonsContainer.append('<button id=\"key_point\"    class=\"grid-item\">.</button>')\n\t\tthis.buttonsContainer.append('<button id=\"key_0\"        class=\"grid-item\">0</button>')\n\t\tthis.buttonsContainer.append('<button id=\"key_delete\"   class=\"grid-item\">Delete</button>')\n\t\tthis.buttonsContainer.append('<button id=\"key_remove\"   class=\"grid-item\" style=\"color:red;font-weight:700;\">Remove</button>')\n\n\t\tthis.checkoutBtn = this.cartFooter.find('#checkoutBtn')\n\t\tthis.checkoutBtn.on('mousedown' , event =>{\n\t\t\tthis.on_checkout_click();\n\t\t})\n\t}\n\n\tfullfillPriceList(){\n\t\tthis.price_lists.forEach(priceList =>{\n\t\t\tthis.priceListInput.append(`<option value=\"${priceList.name}\">${priceList.price_list_name}</option>`)\n\t\t})\n\t}\n\n\n\trefreshTabs(){\n\t\t//clear the tabs_container\n\t\tthis.tabs_container.empty()\n\n\t\tfor(let key of this.selected_item_maps.keys() ){\n\t\t\tif(key == this.selected_tab.tabName){\n\t\t\t\tthis.tabs_container.append(`<div class=\"tab selected rowBox align_center\"><div class=\"tabName\">${key}</div>  <img src=\"/assets/pos_ar/images/cancel.png\" width=\"10px\" height=\"10px\"  class=\"tabDeleteBtn\"  >  </div>`)\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.tabs_container.append(`<div class=\"tab\">  <div class=\"tabName\">${key}</div>  </div>`)\n\t\t\t\t//this.tabs_container.append(`<div class=\"tab rowBox\"><div class=\"tabName\">${key}</div> <img src=\"/assets/pos_ar/images/cancel.png\">  </div>`)\n\t\t\t}\n\t\t}\n\n\t\tthis.tabs_container.find(\".tab\").on('click' , (event)=>{\n\n\t\t\tconst clickedTab = $(event.target).closest('.tab').find('.tabName').text();\n\n\n\t\t\t//console.log(\"\")\n\n\n\t\t\tthis.selected_tab.tabName = clickedTab\n\t\t\tconsole.log(\"clicked tab : \" , clickedTab , \"selected one : \" , this.selected_tab , \" clicked element : \" , event.target)\n\n\t\t\t//update UI\n\t\t\tthis.refreshTabs();\n\t\t\tthis.refreshSelectedItem();\n\t\t\tthis.calculateNetTotal();\n\t\t\tthis.calculateQnatity();\n\t\t\tthis.calculateGrandTotal();\n\n\t\t\tthis.on_tab_click(clickedTab);\n\n\t\t})\n\n\t\tthis.tabs_container.find(\".tabDeleteBtn\").on('click' , (event) => {\n\n\t\t\t//Stop the click event from propagating to the parent .tab\n\t\t        event.stopPropagation();\n\n\t\t\tconst clickedTab = $(event.target).closest('.tab').find('.tabName').text();\n\n\t\t\tthis.selected_item_maps.delete(clickedTab)\n\n\t\t\tif(this.selected_item_maps.size > 0  ){\n\t\t\t\tthis.selected_tab.tabName = Array.from(this.selected_item_maps.keys())[0]\n\t\t\t\tconsole.log(\"this.selected_tab.tabName : \" , this.selected_tab)\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.createNewTab()\n\t\t\t}\n\n\n\t\t\tthis.refreshTabs()\n\t\t\tthis.refreshSelectedItem()\n\n\n\t\t})\n\t}\n\n\n\trefreshSelectedItem(){\n\n\n\n\t\tconst selectedItemsContainer = document.getElementById(\"selectedItemsContainer\");\n\t\tselectedItemsContainer.innerHTML = \"\";\n\n\t\tthis.selected_item_maps.get(this.selected_tab.tabName).items.forEach( item  =>{\n\n\t\t\t//console.log(\"item >==>>>> \" , item)\n\n\t\t\tconst itemElement   = document.createElement(\"div\");\n\t\t\tconst leftGroup     = document.createElement(\"div\");\n\t\t\tconst rightGroup    = document.createElement(\"div\");\n\t\t\tconst itemName      = document.createElement(\"h5\") ;\n\t\t\tconst itemQuantity  = document.createElement(\"div\") ;\n\t\t\tconst itemPrice     = document.createElement(\"div\") ;\n\n\t\t\t//image\n\t\t\t//check if there is an image or not\n\t\t\tif(item.image){\n\t\t\t\tconst itemImage   = document.createElement(\"img\");\n\t                        itemImage.src = item.image ;\n        \t                itemImage.classList.add(\"selectedItemImage\");\n                \t        leftGroup.appendChild(itemImage);\n\t\t\t}else{\n\t\t\t\tconst itemImageHolder = document.createElement(\"div\");\n\t\t\t\tconst itemImageLatter = document.createElement(\"div\");\n\n\t\t\t\titemImageHolder.classList.add(\"selectedItemImage\" , \"rowBox\" , \"centerItem\");\n\n\t\t\t\titemImageLatter.textContent = item.name[0]\n\t\t\t\titemImageHolder.appendChild(itemImageLatter);\n\t\t\t\tleftGroup.appendChild(itemImageHolder);\n\t\t\t}\n\n\n\t\t\t//name\n\t\t\titemName.textContent = item.name;\n\t\t\titemName.classList.add(\"selectedItemName\");\n\t\t\tleftGroup.appendChild(itemName);\n\n\t\t\t//quantity\n\t\t\titemQuantity.textContent = item.qty\n\t\t\titemQuantity.classList.add(\"itemQuantity\");\n\t\t\trightGroup.appendChild(itemQuantity);\n\t\t\t//price\n\t\t\titemPrice.textContent = (item.rate - item.discount_amount) + \" DA\"\n\t\t\titemPrice.classList.add(\"itemPrice\");\n\t\t\trightGroup.appendChild(itemPrice);\n\n\t\t\t//leftGroup\n\t\t\tleftGroup.classList.add(\"rowBox\" , \"align_center\" , \"leftGroup\")\n\t\t\titemElement.appendChild(leftGroup);\n\n\t\t\t//rightGroup\n\t\t\trightGroup.classList.add(\"rowBox\" , \"align_center\" , \"rightGroup\")\n\t\t\titemElement.appendChild(rightGroup);\n\n\n\t\t\t//item\n\t\t\titemElement.classList.add(\"rowBox\" , \"align_center\" , \"row_sbtw\" , \"ItemElement\" , \"pointer\")\n\t\t\tif(item.name == this.selected_item.name)\n\t\t\t\titemElement.classList.add(\"selected\")\n\t\t\titemElement.addEventListener(\"click\" , event =>{\n\t\t\t\tconsole.log(\"we are click\")\n\t\t\t\tthis.makeItemHighlight(itemElement)\n\t\t\t\tthis.on_selected_item_click(item);\n\t\t\t})\n\n\t\t\tselectedItemsContainer.appendChild(itemElement);\n\n\t\t})\n\n\t\tthis.calculateNetTotal();\n\t\tthis.calculateVAT();\n\t\tthis.calculateQnatity();\n\t\tthis.calculateGrandTotal();\n\t}\n\n\tcreateNewTab(){\n\t\t\tthis.counter += 1 ;\n\t\t\tthis.create_new_tab(this.counter);\n\t\t\t//update UI\n\t\t\tthis.refreshTabs()\n\t\t\tthis.refreshSelectedItem()\n\t}\n\n\tcreateTabForEditPOS(){\n\t\tthis.counter += 1 ;\n\t\treturn this.counter;\n\t}\n\n\tshowKeyboard(){\n\t\tthis.editSelectedItem.css('display','flex')\n\t}\n\n\thideKeyboard(){\n\t\tthis.editSelectedItem.css('display','none')\n\t}\n\n\tsetKeyboardOrientation( orientation ){\n\n\t\tconst discount   = this.cartDetails.find('#discount')\n\t\tconst quantity   = this.cartDetails.find('#totalQuantity')\n\t\tconst netTotal   = this.cartDetails.find('#netTotal')\n\t\tconst grandTotal = this.cartDetails.find('#grandTotal')\n\n\t\tif(orientation == \"landscape\"){\n\t\t\tthis.cartDetails.css('display' , 'flex')\n\t\t\tthis.cartDetails.addClass('rowBox align_center')\n\t\t\tthis.cartDetails.removeClass('columnBox')\n\t\t\tdiscount.css('display' , 'none')\n\t\t\tthis.vat.css('display' , 'none')\n\t\t\t//make the text smaller\n\t\t\tquantity.css('font-size' , 'smaller')\n\t\t\tnetTotal.css('font-size' , 'smaller')\n\t\t\tgrandTotal.css('font-size' , 'small')\n\t\t\tgrandTotal.css('font-weight' , '500')\n\t\t}\n\t\telse{\n\t\t\tthis.cartDetails.addClass('columnBox')\n\t\t\tthis.cartDetails.removeClass('rowBox')\n\t\t\tdiscount.css('display','flex')\n\t\t\tthis.vat.css('display' , 'flex')\n\n\t\t\t//reset\n\t\t\tquantity.css('font-size'   , 'small' )\n\t\t\tnetTotal.css('font-size'   , 'small' )\n\t\t\tgrandTotal.css('font-size' , 'larger')\n\t\t\tgrandTotal.css('font-weight' , '700' )\n\t\t}\n\t}\n\n\tmakeSelectedButtonHighlighted(){\n\t\tconst quantityButton = this.buttonsContainer.find('#key_quantity')\n\t\tconst rateButton     = this.buttonsContainer.find('#key_rate')\n\t\tconst discountButton = this.buttonsContainer.find('#key_discount')\n\n\t\tif(this.selected_field.field_name == \"quantity\"){\n\t\t\tquantityButton.addClass('selected')\n\t\t\trateButton.removeClass('selected')\n\t\t\tdiscountButton.removeClass('selected')\n\t\t}\n\t\telse if(this.selected_field.field_name == \"rate\"){\n\t\t\tquantityButton.removeClass('selected')\n\t\t\trateButton.addClass('selected')\n\t\t\tdiscountButton.removeClass('selected')\n\t\t}\n\t\telse if(this.selected_field.field_name == \"discount_percentage\"){\n\t\t\tquantityButton.removeClass('selected')\n\t\t\trateButton.removeClass('selected')\n\t\t\tdiscountButton.addClass('selected')\n\t\t}\n\t\telse{\n\t\t\tquantityButton.removeClass('selected')\n\t\t\trateButton.removeClass('selected')\n\t\t\tdiscountButton.removeClass('selected')\n\t\t}\n\n\t}\n\n\n\t//hide\n\thideCart(){\n\t\tthis.tabs_bar.css('display' , 'none');\n\t\tthis.cartBox.css('display' , 'none');\n\t}\n\t//hide\n\tshowCart(){\n\t\tthis.tabs_bar.css('display' , 'flex');\n\t\tthis.cartBox.css('display' , 'flex');\n\t}\n\t/************************  set listeners  ***************************/\n\n\tsetButtonsListeners(){\n\t\tconst key_0        = this.buttonsContainer.find('#key_0')\n\t\tconst key_1        = this.buttonsContainer.find('#key_1')\n\t\tconst key_2        = this.buttonsContainer.find('#key_2')\n\t\tconst key_3        = this.buttonsContainer.find('#key_3')\n\t\tconst key_4        = this.buttonsContainer.find('#key_4')\n\t\tconst key_5        = this.buttonsContainer.find('#key_5')\n\t\tconst key_6        = this.buttonsContainer.find('#key_6')\n\t\tconst key_7        = this.buttonsContainer.find('#key_7')\n\t\tconst key_8        = this.buttonsContainer.find('#key_8')\n\t\tconst key_9        = this.buttonsContainer.find('#key_9')\n\t\tconst key_quantity = this.buttonsContainer.find('#key_quantity')\n\t\tconst key_discount = this.buttonsContainer.find('#key_discount')\n\t\tconst key_rate     = this.buttonsContainer.find('#key_rate')\n\t\tconst key_remove   = this.buttonsContainer.find('#key_remove')\n\t\tconst key_delete   = this.buttonsContainer.find('#key_delete')\n\t\tconst key_point    = this.buttonsContainer.find('#key_point')\n\n\t\tlet keys = [key_0 , key_1 , key_2 , key_3 , key_4 , key_5 , key_6 , key_7 , key_8 , key_9 , key_quantity , key_discount , key_rate , key_remove , key_delete , key_point]\n\n\n\t\tkeys.forEach(key =>{\n\t\t\tkey.on('mousedown' , (event)=>{\n\t\t\t\tevent.preventDefault();\n\t\t\t\tconst keyContent = key.text();\n\n\t\t\t\tif(!isNaN(keyContent)){\n\t\t\t\t\tthis.on_key_pressed( \"addToField\" , key.text())\n\t\t\t\t}\n\t\t\t\telse if(keyContent == \".\"){\n\t\t\t\t\tthis.on_key_pressed( \"addToField\" , key.text())\n\t\t\t\t}\n\t\t\t\telse if(keyContent == \"Quantity\"){\n\t\t\t\t\tthis.on_key_pressed( \"quantity\" , null)\n\t\t\t\t}\n\t\t\t\telse if(keyContent == \"Rate\"){\n\t\t\t\t\tthis.on_key_pressed( \"rate\" , null)\n\t\t\t\t}\n\t\t\t\telse if(keyContent == \"Discount\"){\n\t\t\t\t\tthis.on_key_pressed( \"discount\" , null)\n\t\t\t\t}\n\t\t\t\telse if(keyContent == \"Remove\"){\n\t\t\t\t\tthis.on_key_pressed( \"remove\" , null)\n\t\t\t\t}\n\t\t\t\telse if(keyContent == \"Delete\"){\n\t\t\t\t\tthis.on_key_pressed( \"delete\" , null)\n\t\t\t\t}\n\n\t\t\t})\n\t\t})\n\n\t}\n\n\tsetListener(){\n\n\t\tthis.add_tab_button.on('mousedown' , (event)=>{\n\t\t\tthis.createNewTab()\n\t\t})\n\n\n\t\tthis.tabs_container.find(\".tabDeleteBtn\").on('click' , (event) => {\n\t\t\t//Stop the click event from propagating to the parent .tab\n\t\t        event.stopPropagation();\n\n\t\t\tconst clickedTab = $(event.target).closest('.tab').find('.tabName').text();\n\n\t\t\tthis.selected_item_maps.delete(clickedTab)\n\n\t\t\tif(this.selected_item_maps.size > 0  ){\n\t\t\t\tthis.selected_tab.tabName = Array.from(this.selected_item_maps.keys())[0]\n\t\t\t\tconsole.log(\"this.selected_tab.tabName : \" , this.selected_tab)\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.createNewTab()\n\t\t\t}\n\n\n\t\t\tthis.refreshTabs()\n\t\t\tthis.refreshSelectedItem()\n\n\t\t})\n\n\n\t\tthis.discountInput.on('input' , (event)=> {\n\t\t\tif(event.target.value == ''){\n\t\t\t\tthis.selected_item_maps.get(selected_tab.tabName).additional_discount_percentage = 0\n\t\t\t\tthis.invoice_data.discount = 0 ;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse if(event.target.value > 100){\n\t\t\t\tthis.selected_item_maps.get(selected_tab.tabName).additional_discount_percentage = 100\n\t\t\t\tthis.invoice_data.discount = 100 ;\n\t\t\t\treturn;\n\t\t\t}\n\n\n\t\t\tthis.selected_item_maps.get(selected_tab.tabName).additional_discount_percentage = parseFloat(event.target.value)\n\t\t\tthis.invoice_data.discount = parseFloat(event.target.value)\n\n\t\t\t//recalculation\n\t\t\tconsole.log(\"value ::: \" , this.invoice_data.discount)\n\t\t\tthis.calculateNetTotal()\n\t\t\tthis.calculateVAT()\n\t\t\tthis.calculateGrandTotal()\n\t\t})\n\t\tthis.discountInput.on('blur' , (event)=> {\n\t\t\tif(event.target.value == ''){\n\t\t\t\tevent.target.value = 0 ;\n\t\t\t}\n\t\t\telse if(event.target.value > 100){\n\t\t\t\tevent.target.value = 100 ;\n\t\t\t}\n\n\t\t\t//recalculation\n\t\t\tconsole.log(\"value ::: \" , this.invoice_data.discount)\n\t\t\tthis.calculateNetTotal()\n\t\t\tthis.calculateVAT()\n\t\t\tthis.calculateGrandTotal()\n\n\t\t})\n\n\t\t/*this.price_lists.on('input' , (event)=>{\n\t\t\tconsole.log(\"selected price list ==> \" , this.selected_price_list.name);\n\t\t\tconsole.log(\"selected price list ==> \" , event.target.value);\n\t\t\tthis.selected_price_list.name = event.target.value;\n\t\t\tconsole.log(\"selected price list ==> \" , this.selected_price_list.name);\n\n\t\t})*/\n\n\t}\n\n\t/*************************  tools  **********************************/\n\n\n\tcalculateNetTotal(){\n\t\tlet netTotal = 0;\n\t\tthis.selected_item_maps.get(this.selected_tab.tabName).items.forEach( item => {\n\t\t\tnetTotal += item.rate * item.qty\n\t\t})\n\n\t\tif(this.invoice_data.discount > 0){\n\t\t\tnetTotal -= (netTotal * (this.invoice_data.discount / 100))\n\t\t}\n\t\tconst netTotal_HTML = document.getElementById(\"netTotalValue\");\n\t\tnetTotal_HTML.textContent  = netTotal;\n\t\tthis.invoice_data.netTotal = netTotal;\n\t}\n\n\tcalculateVAT(){\n\n\t\tconsole.log(\"VAT ========> start \");\n\n\t\tthis.sales_taxes.forEach( tax =>{\n\t\t\tlet saleTaxAmount = 0 ;\n\t\t\tlet taxPercentage = (tax.rate / 100)\n\t\t\tconst calculatedTax = (this.invoice_data.netTotal * taxPercentage).toFixed(2)\n\t\t\tthis.taxes_map.set(tax.name , calculatedTax)\n\t\t\tconst tax_HTML = document.getElementById(`tax_${tax.name}_Value`);\n\t\t\ttax_HTML.textContent = this.taxes_map.get(tax.name);\n\n\t\t})\n\n\t}\n\n\tcalculateTotalTaxAmount(){\n\t\tlet result = 0 ;\n\t\tthis.taxes_map.forEach(tax => {\n\t\t\tresult += tax ;\n\t\t})\n\t\treturn result ;\n\t}\n\n\n\tcalculateQnatity(){\n\t\tlet quantity = 0;\n\n\t\tthis.selected_item_maps.get(this.selected_tab.tabName).items.forEach( item => {\n\t\t\tquantity += item.qty\n\t\t})\n\n\t\tconst totalQuantity_HTML = document.getElementById(\"totalQuantityValue\");\n\t\ttotalQuantity_HTML.textContent = quantity;\n\t}\n\n\tcalculateGrandTotal(){\n\t\tlet grandTotal = 0 ;\n\t\tlet netTotal   = this.invoice_data.netTotal ;\n\t\tlet taxAmount  = 0 ;\n\n\t\tthis.taxes_map.forEach(tax =>{\n\t\t\ttaxAmount += parseFloat(tax)\n\t\t})\n\n\t\tgrandTotal = (netTotal + taxAmount) ;\n\n\n\t\tconst grandTotal_HTML = document.getElementById(\"grandTotalValue\");\n\t\tgrandTotal_HTML.textContent = (grandTotal).toFixed(2);\n\n\t\tthis.invoice_data.grandTotal = grandTotal\n\n\t}\n\n\tmakeItemHighlight(itemElement){\n\t\tconst selectedItemsContainer = document.getElementById(\"selectedItemsContainer\");\n\t\tconst selectedItems = selectedItemsContainer.querySelectorAll(\".selected\")\n\t\tselectedItems.forEach(selectedItem=>{\n\t\t\tselectedItem.classList.remove(\"selected\");\n\t\t})\n\t\titemElement.classList.add(\"selected\")\n\t}\n\n\tcleanHeighlight(){\n\t\tconst selectedItemsContainer = document.getElementById(\"selectedItemsContainer\");\n\t\tconst selectedItems = selectedItemsContainer.querySelectorAll(\".selected\")\n\t\tselectedItems.forEach(selectedItem=>{\n\t\t\tselectedItem.classList.remove(\"selected\");\n\t\t})\n\n\t}\n\n\n\n}\n", "\npos_ar.PointOfSale.pos_item_details = class{\n\n\tconstructor(\n\t\twrapper,\n\t\twarehouse,\n\t\tpriceLists,\n\t\titemPrices,\n\t\tbinList,\n\t\tselectedItem,\n\t\tselectedField,\n\t\tonInput,\n\t\tonClose,\n\t){\n\t\tthis.wrapper        = wrapper   ;\n\t\tthis.warehouse      = warehouse ;\n\t\tthis.price_lists    = priceLists;\n\t\tthis.item_prices    = itemPrices;\n\t\tthis.selected_item  = selectedItem ;\n\t\tthis.selected_field = selectedField;\n\t\tthis.on_input       = onInput;\n\t\tthis.on_close_cart  = onClose;\n\t\tthis.bin_list       = binList;\n\n\t\tthis.start_the_work();\n\t}\n\n\n\t// start function\n\n\tstart_the_work(){\n\t\tthis.prepare_item_details_cart();\n\t\tthis.setDetailsFieldsListeners();\n\t}\n\n\n\t/****************************    ui functions   **********************************/\n\n        prepare_item_details_cart(){\n                this.wrapper.append('<div id=\"itemDetailsCart\" class=\"columnBox align_center\"><div>')\n\n                this.item_details_cart = this.wrapper.find(\"#itemDetailsCart\")\n                this.item_details_cart.append('<div id=\"itemDetailsCartHeader\" class=\"rowBox header align_center row_sbtw\"></div>')\n\n                this.cart_header = this.item_details_cart.find('#itemDetailsCartHeader')\n                this.cart_header.append('<h4 class=\"CartTitle\">Item Details</h4>')\n                this.cart_header.append('<img src=\"/assets/pos_ar/images/cancel.png\" alt=\"Cancel Button\" id=\"itemDetailsCartXBtn\" class=\"xBtn\">')\n\n                this.close_btn = this.cart_header.find(\"#itemDetailsCartXBtn\").on(\"click\", (event) =>{\n                        this.on_close_cart();\n                })\n\n\t\tthis.item_details_cart.append('<div id=\"itemDetailsHeader\" class=\"rowBox\"></div>')\n\n\t\tthis.header_details = this.item_details_cart.find('#itemDetailsHeader')\n\t\tthis.header_details.append('<div id=\"detailsItemImage\" class=\"rowBox centerItem\"></div>')\n\t\tthis.header_details.append('<div id=\"price_and_name\" class=\"columnBox\"></div>')\n\n\t\tthis.price_and_name_details = this.header_details.find('#price_and_name')\n\t\tthis.price_and_name_details.append('<div id=\"detailsItemName\" class=\"rowBox align_center\"></div>')\n\t\tthis.price_and_name_details.append('<div id=\"detailsItemGroupWarhouseContainer\" class=\"rowBox align_center row_sa\"></divr>')\n\n\t\tthis.item_group_warehouse_details = this.price_and_name_details.find('#detailsItemGroupWarhouseContainer')\n\t\tthis.item_group_warehouse_details.append('<div id=\"detailsItemGroup\" class=\"rowBox align_center\">Group : ...</div>')\n\t\tthis.item_group_warehouse_details.append('<div id=\"detailsItemWarehouse\" class=\"rowBox align_center\">Warehouse : ...</div>')\n\n\t\tthis.item_details_cart.append('<div id=\"itemDetailsAll\"  class=\"rowBox\"></div>')\n\n\t\tthis.details_all = this.item_details_cart.find('#itemDetailsAll')\n\t\tthis.details_all.append('<div id=\"itemDetails_C1\" class=\"columnBox\"></div>')\n\n\t\tthis.c1 = this.details_all.find('#itemDetails_C1')\n\t\tthis.c1.append('<div class=\"columnBox\"><label for=\"itemDetailsQuantityInput\">Quantity</label><input type=\"float\" id=\"itemDetailsQuantityInput\" class=\"pointerCursor\"></div>')\n\t\tthis.c1.append('<div class=\"columnBox\"><label for=\"itemDetailsRateInput\">Rate</label><input type=\"float\" id=\"itemDetailsRateInput\" class=\"pointerCursor\"></div>')\n\t\tthis.c1.append('<div class=\"columnBox\"><label for=\"itemDetailsDiscountInput\">Discount (%)</label><input type=\"float\" id=\"itemDetailsDiscountInput\" class=\"pointerCursor\"></div>')\n\t\tthis.c1.append('<div class=\"columnBox\"><label for=\"itemDetailsAvailableInput\">Available Qty at Warehouse</label><input type=\"float\" id=\"itemDetailsAvailableInput\" disabled></div>')\n\n\n\t\tthis.details_all.append('<div id=\"itemDetails_C2\" class=\"columnBox\"></div>')\n\n\t\tthis.c2 = this.details_all.find('#itemDetails_C2')\n\t\tthis.c2.append('<div class=\"columnBox\"><label for=\"itemDetailsUomInput\">UOM *</label><input type=\"text\" id=\"itemDetailsUomInput\"  disabled></div>')\n\t\tthis.c2.append('<div class=\"columnBox\"><label for=\"detailsRateWithDescount\">Discounted Rate</label>  <input type=\"text\" id=\"discountedRateInput\" disabled>  </div>')\n\t\tthis.c2.append('<div class=\"columnBox hideMe\"><label for=\"detailsPriceList\">Price List *</label><input list=\"detailsPriceList\" id=\"detailsItemPriceListInput\" class =\"rowBox align_center pointerCursor\"><datalist id=\"detailsPriceList\"><option>fetching Price Lists ...</option></datalist></div>')\n\t\tthis.c2.append('<div class=\"columnBox\"><label for=\"itemDetailsDiscountMontantInput\">Discount (montant)</label><input type=\"float\" id=\"itemDetailsDiscountMontantInput\" class=\"pointerCursor\"></div>')\n\t\tthis.c2.append('<div class=\"columnBox\"><label for=\"itemDetailsPriceListRateInput\">Price List Rate</label><input type=\"text\" id=\"itemDetailsPriceListRateInput\" disabled></div>')\n\n\n\n\t}\n\n\trefreshDate(item){\n\n\t\tconst imageContainer    = document.getElementById(\"detailsItemImage\") ;\n\t\tconst name              = document.getElementById(\"detailsItemName\");\n\t\tconst warehouse         = document.getElementById(\"detailsItemWarehouse\");\n\t\tconst itemGroup         = document.getElementById(\"detailsItemGroup\");\n\n\t\tconst quantity             = document.getElementById(\"itemDetailsQuantityInput\");\n\t\tconst rate                 = document.getElementById(\"itemDetailsRateInput\");\n\t\tconst discountedRate       = document.getElementById(\"discountedRateInput\");\n\t\tconst discount_percentage  = document.getElementById(\"itemDetailsDiscountInput\");\n\t\tconst discount_amount      = document.getElementById(\"itemDetailsDiscountMontantInput\");\n\t\tconst available            = document.getElementById(\"itemDetailsAvailableInput\");\n\n\t\tconst uom           = document.getElementById(\"itemDetailsUomInput\");\n\t\tconst priceList     = document.getElementById(\"detailsItemPriceListInput\");\n\t\tconst priceListRate = document.getElementById(\"itemDetailsPriceListRateInput\");\n\n\t\t//populate\n\t\tif(item.image){\n\t\t\tconst image = document.createElement(\"img\");\n\t\t\timage.src = item.image;\n\t\t\timageContainer.innerHTML = \"\";\n\t\t\timageContainer.appendChild(image);\n\t\t}\n\t\telse{\n\t\t\tconst image = document.createElement(\"div\");\n\t\t\timage.textContent = item.item_name[0];\n\t\t\timage.style.fontSize = \"xx-large\";\n\t\t\timage.style.fontWeight = \"700\";\n\t\t\timageContainer.innerHTML = \"\";\n\t\t\timageContainer.appendChild(image);\n\t\t}\n\n\t\t//name\n\t\tname.textContent  = item.item_name;\n\t\tname.classList.add(\"rowBox\" , \"align_center\");\n\n\n\t\t//quantity\n\t\tquantity.value = item.qty\n\n\t\t//rate\n\t\trate.value = item.rate\n\t\tdiscountedRate.value = item.rate - item.discount_amount\n\n\t\t//discount\n\t\tdiscount_amount.value     = item.discount_amount ?? 0.00;\n\t\tdiscount_percentage.value = item.discount_percentage ?? 0.00;\n\n\n\t\t//available\n\t\tavailable.value = this.getQtyInWarehouse(item.name ,  this.warehouse)\n\n\n\t\t//uom\n\t\tuom.value = item.stock_uom\n\n\n\t\t//priceList\n\t\tpriceList.value = this.price_lists[0].price_list_name\n\t\t//warehouse\n\t\twarehouse.textContent = \"Warehouse : \" + this.warehouse\n\t\t//item group\n\t\titemGroup.textContent = \"Item Group : \" + item.item_group\n\n\t\t//priceListRate\n\t\tpriceListRate.value = this.getItemPrice(item.name) + \"DA\"\n\n\n\t\tconsole.log(\"end ref\")\n\n\n\t\t//hightlited fields\n\t\tthis.makeSelectedFieldHighlighted()\n\t}\n\n\tshow_cart(){\n\t\tthis.item_details_cart.css(\"display\" , \"flex\");\n\t}\n\n\thide_cart(){\n\t\tthis.item_details_cart.css(\"display\" , \"none\");\n\t}\n\n\tmakeSelectedFieldHighlighted(){\n\n\n\t\tif(this.selected_field.field_name == \"quantity\"){\n\t\t\tthis.c1.find('#itemDetailsQuantityInput').addClass('selected')\n\t\t\tthis.c1.find('#itemDetailsRateInput').removeClass('selected')\n\t\t\tthis.c1.find('#itemDetailsDiscountInput').removeClass('selected')\n\t\t}\n\t\telse if(this.selected_field.field_name == \"rate\"){\n\t\t\tthis.c1.find('#itemDetailsQuantityInput').removeClass('selected')\n\t\t\tthis.c1.find('#itemDetailsRateInput').addClass('selected')\n\t\t\tthis.c1.find('#itemDetailsDiscountInput').removeClass('selected')\n\t\t}\n\t\telse if(this.selected_field.field_name == \"discount_percentage\"){\n\t\t\tthis.c1.find('#itemDetailsQuantityInput').removeClass('selected')\n\t\t\tthis.c1.find('#itemDetailsRateInput').removeClass('selected')\n\t\t\tthis.c1.find('#itemDetailsDiscountInput').addClass('selected')\n\t\t}\n\t\telse{\n\t\t\tthis.c1.find('#itemDetailsQuantityInput').removeClass('selected')\n\t\t\tthis.c1.find('#itemDetailsRateInput').removeClass('selected')\n\t\t\tthis.c1.find('#itemDetailsDiscountInput').removeClass('selected')\n\t\t}\n\n\t}\n\n\n\trequestFocus(field){\n\t\tif(field == \"quantity\"){\n\t\t\tthis.c1.find('#itemDetailsQuantityInput').focus();\n\t\t}\n\t\telse if(field == \"rate\"){\n\t\t\tthis.c1.find('#itemDetailsRateInput').focus();\n\t\t}\n\t\telse if(field == \"discount_percentage\"){\n\t\t\tthis.c1.find('#itemDetailsDiscountInput').focus();\n\t\t}\n\t\telse if(field == \"discount_amount\"){\n\t\t\tthis.c1.find('#itemDetailsDiscountMontantInput').focus();\n\t\t}\n\t}\n\n\n/*\n\nelse if(keyContent == \".\" && !selectedField.value.includes(\".\")){\n                                        this.on_key_pressed( \"addToField\" , key.text())\n                                }\n\n*/\n\taddToField(field , value){\n\n\t\tconsole.log('field : ' , field , 'value : ' , value )\n\n\t\tif(field == \"quantity\"){\n\t\t\tthis.c1.find('#itemDetailsQuantityInput').val( (index,currentValue) =>{\n\t\t\t\tif(value == \".\" && currentValue.includes(\".\"))\n\t\t\t\t\treturn currentValue\n\t\t\t\telse\n\t\t\t\t\treturn currentValue + value\n\t\t\t})\n\t\t}\n\t\telse if(field == \"rate\"){\n\t\t\tthis.c1.find('#itemDetailsRateInput').val( (index,currentValue) =>{\n\t\t\t\tif(value == \".\" && currentValue.includes(\".\"))\n\t\t\t\t\treturn currentValue\n\t\t\t\telse\n\t\t\t\t\treturn currentValue + value\n\t\t\t})\n\t\t}\n\t\telse if(field == \"discount_percentage\"){\n\t\t\tthis.c1.find('#itemDetailsDiscountInput').val( (index,currentValue) =>{\n\t\t\t\tif(value == \".\" && currentValue.includes(\".\"))\n\t\t\t\t\treturn currentValue\n\t\t\t\telse\n\t\t\t\t\treturn currentValue + value\n\t\t\t})\n\n\t\t}\n\t\telse if(field == \"discount_amount\"){\n\t\t\tthis.c1.find('#itemDetailsDiscountInput').val( (index,currentValue) =>{\n\t\t\t\tif(value == \".\" && currentValue.includes(\".\"))\n\t\t\t\t\treturn currentValue\n\t\t\t\telse\n\t\t\t\t\treturn currentValue + value\n\t\t\t})\n\n\t\t}\n\n\t}\n\n\tdeleteCharacter(){\n\n\t\tlet field = this.selected_field.field_name\n\n\t\tlet newValue = 0 ;\n\n\t\tif(field == \"quantity\"){\n\n\t\t\tlet field = this.c1.find(\"#itemDetailsQuantityInput\")\n\n\t\t\tlet cursor = field[0].selectionStart;\n\n\t\t\tconsole.log(field.val())\n\n\t\t\tfield.val( (index , currentValue) =>{\n\n\t\t\t\tconsole.log(\"length : \" , currentValue , \" cursor : \" , cursor);\n\n\t\t\t\tif( currentValue.length < 0 ){\n\t\t\t\t\tnewValue = 0 ;\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t\telse if( currentValue.length == 1){\n\t\t\t\t\tnewValue = 0 ;\n\t\t\t\t\treturn 0 ;\n\t\t\t\t}\n\t\t\t\telse if( cursor == 0 ){\n\t\t\t\t\tnewValue = currentValue;\n\t\t\t\t\treturn currentValue;\n\t\t\t\t}\n\t\t\t\telse if( cursor == currentValue.length){\n\t\t\t\t\tnewValue = currentValue.slice(0 , cursor-1)\n\t\t\t\t\treturn currentValue.slice(0 , cursor-1)\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tnewValue = currentValue.slice(0,cursor-1) + currentValue.slice(cursor)\n\t\t\t\t\treturn currentValue.slice(0,cursor-1) + currentValue.slice(cursor)\n\t\t\t\t}\n\t\t\t})\n\n\n\t\t\t// Use setTimeout to ensure the new value is set before adjusting cursor\n\t\t\tsetTimeout(() => {\n\t\t\t\tfield[0].setSelectionRange(cursor - 1, cursor - 1); // Move cursor back after deletion\n\t\t\t\tfield[0].focus(); // Ensure the input is focused\n\t\t\t}, 0);\n\n\t\t}\n\t\tif(field == \"rate\"){\n\n\t\t\tlet field = this.c1.find(\"#itemDetailsRateInput\")\n\n\t\t\tlet cursor = field[0].selectionStart;\n\n\t\t\tfield.val( (index , currentValue) =>{\n\n\t\t\t\tif( currentValue.length < 0 ){\n\t\t\t\t\tnewValue = 0 ;\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t\telse if( currentValue.length == 1){\n\t\t\t\t\tnewValue = 0 ;\n\t\t\t\t\treturn 0 ;\n\t\t\t\t}\n\t\t\t\telse if( cursor == 0 ){\n\t\t\t\t\tnewValue = currentValue ;\n\t\t\t\t\treturn currentValue;\n\t\t\t\t}\n\t\t\t\telse if( cursor == currentValue.length){\n\t\t\t\t\tnewValue = currentValue.slice(0 , cursor-1) ;\n\t\t\t\t\treturn currentValue.slice(0 , cursor-1)\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tnewValue = currentValue.slice(0,cursor-1) + currentValue.slice(cursor)\n\t\t\t\t\treturn currentValue.slice(0,cursor-1) + currentValue.slice(cursor)\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t// Use setTimeout to ensure the new value is set before adjusting cursor\n\t\t\tsetTimeout(() => {\n\t\t\t\tfield[0].setSelectionRange(cursor - 1, cursor - 1); // Move cursor back after deletion\n\t\t\t\tfield[0].focus(); // Ensure the input is focused\n\t\t\t}, 0);\n\n\n\t\t}\n\t\tif(field == \"discount_percentage\"){\n\n\t\t\tlet field = this.c1.find(\"#itemDetailsDiscountInput\")\n\n\t\t\tlet cursor = field[0].selectionStart;\n\n\t\t\tfield.val( (index , currentValue) =>{\n\n\t\t\t\tif( currentValue.length < 0 ){\n\t\t\t\t\tnewValue = 0 ;\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t\telse if( currentValue.length == 1){\n\t\t\t\t\tnewValue = 0 ;\n\t\t\t\t\treturn 0 ;\n\t\t\t\t}\n\t\t\t\telse if( cursor == 0 ){\n\t\t\t\t\tnewValue = currentValue;\n\t\t\t\t\treturn currentValue;\n\t\t\t\t}\n\t\t\t\telse if( cursor == currentValue.length){\n\t\t\t\t\tnewValue = currentValue.slice(0 , cursor-1);\n\t\t\t\t\treturn currentValue.slice(0 , cursor-1)\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tnewValue = currentValue.slice(0,cursor-1) + currentValue.slice(cursor)\n\t\t\t\t\treturn currentValue.slice(0,cursor-1) + currentValue.slice(cursor)\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t// Use setTimeout to ensure the new value is set before adjusting cursor\n\t\t\tsetTimeout(() => {\n\t\t\t\tfield[0].setSelectionRange(cursor - 1, cursor - 1); // Move cursor back after deletion\n\t\t\t\tfield[0].focus(); // Ensure the input is focused\n\t\t\t}, 0);\n\n\n\t\t}\n\n\t\tconsole.log(\"we reach to here \")\n\t\treturn newValue ;\n\n\t}\n\n\t/**************************  set listener  ****************************/\n\n\tsetDetailsFieldsListeners(){\n\n\t\tthis.quantityInput        = this.c1.find('#itemDetailsQuantityInput')\n\t\tthis.rateInput            = this.c1.find('#itemDetailsRateInput')\n\t\tthis.discountInput        = this.c1.find('#itemDetailsDiscountInput')\n\t\tthis.discountMontantInput = this.c2.find('#itemDetailsDiscountMontantInput')\n\n\t\t//quantity input\n\t\tthis.quantityInput.on('input' , (event)=>{\n\t\t\tconst value = event.target.value;\n\n\t\t\tif(value.length == 0){\n\t\t\t\tevent.target.value = 0\n\t\t\t}\n\t\t\telse if (!value.slice(0,-1).includes(\".\")  && value[value.length-1] == \".\"){\n\t\t\t\tevent.target.value = value\n\t\t\t}\n\t\t\telse if(value[value.length-1] == \".\"){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse if(value[value.length-1] == \" \"){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse if(isNaN(value[value.length-1])){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tevent.target.value = value\n\t\t\t}\n\n\t\t\t//new quantity\n\t\t\tlet newQuantity = parseFloat(this.quantityInput.val());\n\t\t\tif(isNaN(newQuantity)){\n\t\t\t\tconsole.warn(\"Invaide Quantity value =>\" , this.quantityInput.val())\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse if(newQuantity <= 0){\n\t\t\t\tnewQuantity = 0;\n\t\t\t}\n\n\t\t\tthis.on_input( \"input\" , \"quantity\" , newQuantity)\n\t\t})\n\n\t\tthis.quantityInput.on('focus' , (event)=>{\n\t\t\tthis.on_input( \"focus\" , \"quantity\" , null)\n\t\t})\n\n\t\tthis.quantityInput.on('blur' , (event)=>{\n\t\t\tthis.on_input( \"blur\" , \"quantity\" , null)\n\t\t})\n\n\t\t//rate field listeners\n\t\tthis.rateInput.on('input' , (event)=>{\n\t\t\tconst value = event.target.value ;\n\n\t\t\tif(value.length == 0){\n\t\t\t\tevent.target.value = 0\n\t\t\t}\n\t\t\telse if (!value.slice(0,-1).includes(\".\")  && value[value.length-1] == \".\"){\n\t\t\t\tevent.target.value = value\n\t\t\t}\n\t\t\telse if(value[value.length-1] == \".\"){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse if(isNaN(value[value.length-1])){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tevent.target.value = value;\n\t\t\t}\n\n\t\t\tlet newRate = parseFloat(this.rateInput.val());\n\n\t\t\tconsole.log(\"new rate : \" , newRate)\n\t\t\tif(isNaN(newRate)){\n\t\t\t\tconsole.warn(\"Invalide Rate value\")\n\t\t\t\treturn;\n\t\t\t}\n\n\n\t\t\tthis.on_input( \"input\" , \"rate\" , newRate)\n\t\t})\n\t\tthis.rateInput.on('focus' , (event)=>{\n\t\t\tthis.on_input( \"focus\" , \"rate\" , null)\n\t\t})\n\t\tthis.rateInput.on('blur' , (event)=>{\n\t\t\tthis.on_input( \"blur\" , \"rate\" , null)\n\t\t})\n\n\n\n\n\t\t//discount field listener\n\t\tthis.discountInput.on('input' , (event)=>{\n\t\t\tconst value = event.target.value ;\n\n\t\t\tif(value.length == 0){\n\t\t\t\tevent.target.value = 0;\n\t\t\t}\n\t\t\telse if(!value.slice(0,-1).includes(\".\")  && value[value.length-1] == \".\"){\n\t\t\t\tevent.target.value = value;\n\t\t\t}\n\t\t\telse if(value[value.length-1] == \".\"){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse if(isNaN(value[value.length-1])){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tevent.target.value = value ;\n\t\t\t}\n\n\t\t\tlet newDiscount = this.discountInput.val();\n\n\t\t\tconsole.log(\"the new value \" , newDiscount)\n\n\t\t\tif(isNaN(newDiscount)){\n\t\t\t\tconsole.warn(\"Invalide discount value\")\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t//console.log(\"condition ==> \" , newDiscount<100 )\n\t\t\tif(newDiscount < 100){\n\t\t\t\tthis.on_input( \"input\" , \"discount_percentage\" , newDiscount)\n\t\t\t}\n\t\t\telse{\n\t\t\t\tevent.target.value = 100;\n\t\t\t\tthis.on_input( \"input\" , \"discount_percentage\" , 100)\n\t\t\t}\n\n\t\t})\n\n\t\tthis.discountInput.on('focus' , (event)=>{\n\t\t\tthis.on_input( \"focus\" , \"discount_percentage\" , null)\n\t\t})\n\n\t\tthis.discountInput.on('blur' , (event)=>{\n\t\t\tthis.on_input( \"blur\" , \"discount_percentage\" , null)\n\t\t})\n\n\n\t\t//discount field listener\n\t\tthis.discountMontantInput.on('input' , (event)=>{\n\t\t\tconst value = event.target.value ;\n\n\t\t\tif(value.length == 0){\n\t\t\t\tevent.target.value = 0;\n\t\t\t}\n\t\t\telse if(!value.slice(0,-1).includes(\".\")  && value[value.length-1] == \".\"){\n\t\t\t\tevent.target.value = value;\n\t\t\t}\n\t\t\telse if(value[value.length-1] == \".\"){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse if(isNaN(value[value.length-1])){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tevent.target.value = value ;\n\t\t\t}\n\n\t\t\tlet newDiscount = this.discountMontantInput.val();\n\n\t\t\tif(isNaN(newDiscount)){\n\t\t\t\tconsole.warn(\"Invalide discount value\")\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t//console.log(\"condition ==> \" , newDiscount<100 )\n\t\t\tthis.on_input( \"input\" , \"discount_amount\" , newDiscount)\n\n\t\t})\n\n\t\tthis.discountMontantInput.on('focus' , (event)=>{\n\t\t\tconsole.log(\"we are here\")\n\t\t\tthis.on_input( \"focus\" , \"discount_amount\" , null)\n\t\t})\n\n\t\tthis.discountMontantInput.on('blur' , (event)=>{\n\t\t\tthis.on_input( \"blur\" , \"discount_amount\" , null)\n\t\t})\n\n\t}\n\n\n\t/*************************** funs  ************************************/\n\n\tgetItemPrice(itemId){\n\t\tconst price = this.item_prices.find(itemPrice => itemPrice.item_code == itemId)\n\t\treturn price ? price.price_list_rate  : 0\n\t}\n\n\n\tgetQtyInWarehouse(itemId , warehouseId){\n\t\tconst bin = this.bin_list.find(bin => bin.item_code == itemId && bin.warehouse == warehouseId)\n\t\treturn bin ? bin.actual_qty : 0\n\t}\n\n\n}\n", "\n\npos_ar.PointOfSale.pos_payment_cart = class{\n\n\tconstructor(\n\t\twrapper,\n\t\tselectedItemMap,\n\t\tselectedTab,\n\t\tselectedPaymentMythod,\n\t\tinvoiceData,\n\t\tonClose,\n\t\tonComplete,\n\t\tonInput\n\t){\n\n\n\t\tthis.wrapper                 = wrapper     ;\n\t\tthis.selected_item_map       = selectedItemMap;\n\t\tthis.selected_tab            = selectedTab ;\n\t\tthis.selected_payment_method = selectedPaymentMythod;\n\t\tthis.invoice_data            = invoiceData ;\n\t\tthis.on_close_cart           = onClose     ;\n\t\tthis.on_complete             = onComplete  ;\n\t\tthis.on_input                = onInput     ;\n\n\t\tconsole.log(\"starting with  ==> \" , this.invoice_data.grandTotal)\n\n\t\tthis.start_work();\n\t}\n\n\n\t/****************************************  UI ***********************************************/\n\n\tstart_work(){\n\t\tthis.prepare_payment_cart();\n\t\tthis.calculateGrandTotal()\n\t\tthis.setListeners()\n\n\t\tconsole.log(\"helloooooooooooooooooooooooooooo \")\n\n\t}\n\n\tprepare_payment_cart(){\n\t\tthis.wrapper.append('<div id=\"paymentMethodCart\" class=\"columnBox align_center\"></div>')\n\n\t\tthis.cart = this.wrapper.find('#paymentMethodCart')\n\t\tthis.cart.append('<div id=\"paymentMethodCartHeader\" class=\"rowBox header align_center row_sbtw\"></div>')\n\t\tthis.cart.append('<div id=\"paymentMethodContent\" class=\"columnBox align_center\"></div>')\n\t\tthis.cart.append('<div id=\"paymentMethodCartFooter\" class=\"columnBox align_center\"></div>')\n\n\t\tthis.cart_header  = this.cart.find('#paymentMethodCartHeader')\n\t\tthis.cart_content = this.cart.find('#paymentMethodContent')\n\t\tthis.cart_footer  = this.cart.find('#paymentMethodCartFooter')\n\n\t\tthis.cart_header.append('<h4 class=\"CartTitle\">Item Details</h4>')\n\t\tthis.cart_header.append('<img src=\"/assets/pos_ar/images/cancel.png\" alt=\"Cancel Button\" id=\"paymentMethodCartXBtn\" class=\"xBtn\">')\n\n\t\tthis.cart_header.find('#paymentMethodCartXBtn').on('click' , (event)=>{\n\t\t\tthis.on_close_cart();\n\t\t})\n\n\t\tthis.cart_content.append('<div id=\"paymentContentTopSection\" class=\"rowBox\"></div>')\n\t\tthis.cart_content.append('<div id=\"paymentContentBottomSection\" class=\"columnBox\"></div>')\n\n\t\tthis.cart_content_top_section    = this.cart_content.find('#paymentContentTopSection')\n\t\tthis.cart_content_bottom_section = this.cart_content.find('#paymentContentBottomSection')\n\n\t\tthis.cart_content_top_section.append('<div id=\"cashBox\" class=\"paymentMethodBox\"><div id=\"cashBoxTitle\" class=\"title\">Cash</div><input type=\"float\" id=\"cachInput\" value=\"0\"  ></div>')\n\t\tthis.cart_content_top_section.append('<div id=\"paymentOnTimeBox\" class=\"paymentMethodBox\"><div id=\"paymentOnTimeBoxTitle\" class=\"title\">On Time</div><input type=\"float\" id=\"paymentOnTimeInput\" value=\"0\" ></div>')\n\t\tthis.cart_content_top_section.append('<div id=\"redeemLoyaltyPoints\" class=\"paymentMethodBox\" style=\"display:none;\" ><div id=\"redeemLoyaltyPointsTitle\" class=\"title\"\">Redeem Loyalty Points</div><input type=\"float\" id=\"RedeemLayoutPointsInput\" value=\"0\" disabled></div>')\n\n\t\tthis.cashBox          = this.cart_content_top_section.find(\"#cashBox\")\n\t\tthis.onTimeBox        = this.cart_content_top_section.find(\"#paymentOnTimeBox\")\n\t\tthis.redeemLoyaltyBox = this.cart_content_top_section.find(\"#redeemLoyaltyPoints\")\n\n\t\tthis.cart_content_bottom_section.append('<h4>Additional Information</h4>')\n\n\t\tthis.cart_footer.append('<div id=\"paymentDetailsContainer\" class=\"rowBox align_center\"></div>');\n\t\tthis.cart_footer.append('<button type=\"button\" id=\"completeOrderBtn\">Complete Order</button>');\n\n\t\tthis.payment_details = this.cart_footer.find('#paymentDetailsContainer')\n\t\tthis.payment_details.append('<div class=\"columnBox\"><div id=\"paymentGrandTotalTitle\" class=\"rowBox centerItem\">Grand Total</div><div id=\"paymentGrandTotalValue\" class=\"rowBox centerItem\"></div></div>')\n\t\tthis.payment_details.append('<hr>')\n\t\tthis.payment_details.append(`<div id=\"paymentPaidAmount\" class=\"columnBox\"><div id=\"paymentPaidAmountTitle\" class=\"rowBox centerItem\">Paid Amount</div><div id=\"paimentPaidAmountValue\"  class=\"rowBox centerItem\"> 0 DA </div></div>`)\n\t\tthis.payment_details.append('<hr>')\n\t\tthis.payment_details.append(`<div id=\"paymentToChange\" class=\"columnBox\"><div id=\"paimentToChangeTitle\" class=\"rowBox centerItem\">To Change</div><div id=\"paimentToChangeValue\"  class=\"rowBox centerItem\"> ${this.toChange}DA </div></div>`)\n\n\t}\n\n\n\tshowCart(){\n\t\tthis.cart.css('display' , 'flex');\n\t\tthis.clearData();\n\t}\n\n\thideCart(){\n\t\tthis.cart.css('display' , 'none');\n\t}\n\n\n\tclearData(){\n\n\t\tthis.invoice_data.paidAmount = 0 ;\n\t\tthis.invoice_data.toChange = 0 ;\n\n\t\tthis.cashBox.find('#cachInput').val(0)\n\n\t\tthis.calculateGrandTotal();\n\t\tthis.calculateToChange();\n\t\tthis.refreshPaidAmount();\n\n\t}\n\n\n\trefreshData(){\n\t\tconsole.log(\"refreshing data\")\n\n\t\tthis.cashBox.find('#cachInput').val(this.invoice_data.paidAmount)\n\n\t\tthis.calculateGrandTotal();\n\t\tthis.calculateToChange();\n\t\tthis.refreshPaidAmount();\n\n\t}\n\n\t/****************************************  listeners  ***********************************************/\n\n\tsetListeners(){\n\n\t\tthis.cashBox.on('click' , (event)=>{\n\t\t\tthis.selected_payment_method.methodName = \"cash\"\n\t\t\tthis.cashBox.addClass('selected')\n\t\t\tthis.onTimeBox.removeClass('selected')\n\t\t\tthis.redeemLoyaltyBox.removeClass('selected')\n\n\t\t\t//refresh UI\n\t\t\tthis.invoice_data.paidAmount = this.cashBox.find('#cachInput').val()\n\t\t\tthis.refreshPaidAmount();\n\t\t})\n\n\t\tthis.onTimeBox.on('click' , (event)=>{\n\t\t\tthis.selected_payment_method.methodName = \"onTime\"\n\t\t\tthis.cashBox.removeClass('selected')\n\t\t\tthis.onTimeBox.addClass('selected')\n\t\t\tthis.redeemLoyaltyBox.removeClass('selected')\n\n\t\t\t//refresh UI\n\t\t\tthis.invoice_data.paidAmount = this.onTimeBox.find('#paymentOnTimeInput').val()\n\t\t\tthis.refreshPaidAmount();\n\n\t\t})\n\n\t\tthis.redeemLoyaltyBox.on('click' , (event)=>{\n\t\t\tthis.selected_payment_method.methodName = \"redeemLoyalty\"\n\t\t\tthis.cashBox.removeClass('selected')\n\t\t\tthis.onTimeBox.removeClass('selected')\n\t\t\tthis.redeemLoyaltyBox.addClass('selected')\n\n\t\t\t//refresh UI\n\t\t\tthis.invoice_data.paidAmount = 0 ;\n\t\t\tthis.refreshPaidAmount();\n\n\t\t})\n\n\t\t//inputs\n\t\tthis.cashBox.find('#cachInput').on('input' , (event)=>{\n\n\t\t\tconsole.log(\"we are here 1:)\");\n\n\t\t\tconst value = event.target.value;\n\t\t\tif(value.length == 0){\n\t\t\t\tevent.target.value = 0\n\t\t\t}\n\t\t\telse if (!value.slice(0,-1).includes(\".\")  && value[value.length-1] == \".\"){\n\t\t\t\tevent.target.value = value\n\t\t\t}\n\t\t\telse if(value[value.length-1] == \".\"){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse if(value[value.length-1] == \" \"){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse if(isNaN(value[value.length-1])){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tevent.target.value = value\n\t\t\t}\n\n\t\t\tthis.invoice_data.paidAmount = event.target.value;\n\t\t\tthis.refreshPaidAmount();\n\t\t\tthis.calculateToChange();\n\t\t\tconsole.log(\"input\" , event.target.value)\n\t\t})\n\n\t\tthis.cashBox.find('#cachInput').on('focus' , (event)=>{\n\t\t\tthis.on_input('focus' , 'cash' , null)\n\t\t})\n\n\t\tthis.onTimeBox.find('#paymentOnTimeInput').on('input' , (event)=>{\n\t\t\tconst value = event.target.value;\n\t\t\tif(value.length == 0){\n\t\t\t\tevent.target.value = 0\n\t\t\t}\n\t\t\telse if (!value.slice(0,-1).includes(\".\")  && value[value.length-1] == \".\"){\n\t\t\t\tevent.target.value = value\n\t\t\t}\n\t\t\telse if(value[value.length-1] == \".\"){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse if(value[value.length-1] == \" \"){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse if(isNaN(value[value.length-1])){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tevent.target.value = value\n\t\t\t}\n\n\t\t\tthis.invoice_data.paidAmount = event.target.value;\n\t\t\tthis.refreshPaidAmount();\n\t\t\tthis.calculateToChange();\n\t\t\tconsole.log(\"input\" , event.target.value)\n\t\t})\n\n\t\tthis.redeemLoyaltyBox.find('#RedeemLayoutPointsInput').on('input' , (event)=>{\n\t\t\tconst value = event.target.value;\n\t\t\tif(value.length == 0){\n\t\t\t\tevent.target.value = 0\n\t\t\t}\n\t\t\telse if (!value.slice(0,-1).includes(\".\")  && value[value.length-1] == \".\"){\n\t\t\t\tevent.target.value = value\n\t\t\t}\n\t\t\telse if(value[value.length-1] == \".\"){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse if(value[value.length-1] == \" \"){\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse if(isNaN(value[value.length-1])){\n\t\t\t\tconsole.log(\"===}> \" , value[value.length-1])\n\t\t\t\tevent.target.value = value.slice(0,-1);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tevent.target.value = value\n\t\t\t}\n\t\t\tconsole.log(\"input\" , event.target.value)\n\t\t})\n\n\n\t\tthis.cart_footer.find(\"#completeOrderBtn\").on('click' , (event)=>{\n\n\t\t\tfrappe.confirm('Submit the invoice ?',\n\t\t\t()=>{/*yes*/\n\t\t\t\tthis.on_complete()\n\t\t\t},()=>{\n\n\t\t\t})\n\t\t})\n\n\n\t}\n\n\n\t/************************************ tools  ***************************************/\n\n\n\thandleInput(key){\n\n\t\tlet previousValue = this.cashBox.find('#cachInput').val() ;\n\n\t\t// Check if the previous value contains a period (.)\n\t\tif( previousValue.includes('.') && key == \".\"){\n\t\t\treturn ;\n\t\t}\n\n\t\t// Append the key to the paidAmount if there is no period\n\t\tthis.invoice_data.paidAmount += key;\n\n\t\t// Refresh the payment cart\n\t\tthis.refreshData();\n\n\n\n\t}\n\n\tcalculateGrandTotal(){\n\t\tconsole.log(\"calculateGrandTotal called with ==> \" , this.invoice_data.grandTotal)\n\t\tthis.payment_details.find('#paymentGrandTotalValue').text(`${this.invoice_data.grandTotal} DA`)\n\t\tthis.generateProposedPaidAmount(this.invoice_data.grandTotal);\n\t}\n\n\tcalculateToChange(){\n\t\tthis.invoice_data.toChange = (this.invoice_data.paidAmount - this.invoice_data.grandTotal)\n\t\tthis.payment_details.find('#paimentToChangeValue').text(`${this.invoice_data.toChange} DA`)\n\t}\n\n\trefreshPaidAmount(){\n\t\tthis.payment_details.find('#paimentPaidAmountValue').text(`${this.invoice_data.paidAmount} DA`)\n\t\tconst paid_amount_DA         = this.payment_details.find('#paimentPaidAmountValue').text();\n\t\tconst paid_amount_txt        = paid_amount_DA.slice(0 , -2)\n\t\tconst paid_amount            = parseFloat(paid_amount_txt)\n\t\tthis.invoice_data.paidAmount = paid_amount;\n\t\tconsole.log(\"paid_amount : \" , paid_amount  , \"paid_amount_txt \" , paid_amount_txt , \"paid_amount_DA\" , paid_amount_DA)\n\t}\n\n\n\tgenerateProposedPaidAmount(total){\n\t\tconst money = [10,20,50,100,200,500,1000,2000];\n\t\tlet counter = 0;\n\t\tlet pointer = 7;\n\n\t\twhile( counter < total ){\n\t\t\tcounter += money[pointer]\n\t\t}\n\n\t\tconsole.log(\"counter : \" , counter)\n\t}\n\n}\n", "\n\npos_ar.PointOfSale.pos_history = class {\n\n\tconstructor(\n\t\twrapper,\n\t\tdb,\n\t\tsalesTaxesAndCharges,\n\t\tonClick\n\t){\n\t\tthis.wrapper   = wrapper;\n\t\tthis.db        = db;\n\t\tthis.sales_taxes_and_charges = salesTaxesAndCharges\n\t\tthis.on_click  = onClick;\n\t\t//local data\n\t\tthis.localPosInvoice   = { lastTime : null , pos_invoices : [] }\n\t\tthis.filter            = \"\" ;\n\t\tthis.filtered_pos_list = [] ;\n\t\tthis.selected_pos      = null ;\n\t\tthis.start_work();\n\t}\n\n\n\n\tstart_work(){\n\t\tthis.prepare_history_cart();\n\t\tthis.db.getAllPosInvoice(\n\t\t\t\t\t\t(result)=>{\n\t\t\t\t\t\t\tconsole.log(\"the db data \" , result)\n\t\t\t\t\t\t\tthis.localPosInvoice.pos_invoices = result ;\n\n\t\t\t\t\t\t\tthis.filtered_pos_list = this.localPosInvoice.pos_invoices.filter( pos => {\n\n\t\t\t\t\t\t\t\tconsole.log(\"pos : \" , pos , \"its status \" , pos.status)\n\n\t\t\t\t\t\t\t\tif(pos.status == 'Draft' ){\n\t\t\t\t\t\t\t\t\treturn true ;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\treturn false ;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\tconsole.log(\"log init data : \" , this.filtered_pos_list)\n\n\t\t\t\t\t\t\tif(this.filtered_pos_list.length == 0){\n\t\t\t\t\t\t\t\tthis.selected_pos = null\n\t\t\t\t\t\t\t\tconsole.log(\"first condition\")\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tthis.selected_pos = structuredClone(this.filtered_pos_list[0])\n\t\t\t\t\t\t\t\tconsole.log(\"second condition\")\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.refreshData()\n\t\t\t\t\t\t},\n\t\t\t\t\t\t(error) => {\n\t\t\t\t\t\t\tconsole.log(error)\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\tthis.setListener();\n\t}\n\n\n\t/*************************************    UI    *******************************************************/\n\n\tprepare_history_cart(){\n\t\tthis.wrapper.find('#LeftSection').append('<div id=\"historyLeftContainer\" class=\"columnBox\"></div>')\n\t\tthis.wrapper.find('#RightSection').append('<div id=\"historyRightContainer\" class=\"columnBox\"></div>')\n\n\t\tthis.left_container  = this.wrapper.find('#historyLeftContainer')\n\t\tthis.right_container = this.wrapper.find('#historyRightContainer')\n\n\n\t\t//pos details  the container of the pos details\n\t\tthis.left_container.append('<div id=\"PosContentHeader\" class=\"rowBox\" ><div class=\"c1 columnBox\"><div id=\"posCustomer\">Customer</div><div id=\"posSoldBy\">Sold by : User</div></div><div class=\"c2 columnBox\"><div id=\"posCost\">0,0000 DA</div><div id=\"posId\">ACC-PSINV-2024-ID</div><div id=\"posStatus\">POS Status</div></div></div>')\n\n\t\t//first this.selected_pos.taxes_and_charges = \"\"section is the header information\n\t\tthis.pos_header = this.left_container.find('#PosContentHeader');\n\n\t\tthis.left_container.append('<div id=\"posContent\" class=\"columnBox\"></div>')\n\n\t\t//second section is the data like items , cost and payments methods.\n\t\tthis.pos_content = this.left_container.find('#posContent')\n\t\tthis.pos_content.append('<div id=\"posItemContainer\"><div class=\"posSectionTitle\">Items</div><div id=\"posItemList\"></div></div>')\n\n\t\tthis.itemContainer = this.pos_content.find('#posItemContainer')\n\t\tthis.itemList      = this.itemContainer.find('#posItemList')\n\n\t\tthis.pos_content.append('<div id=\"posTotalsContainer\"><div class=\"posSectionTitle\">Totals</div><div id=\"posTotalList\"></div></div>')\n\n\t\tthis.totalsContainer = this.pos_content.find('#posTotalsContainer')\n\t\tthis.totalList       = this.pos_content.find('#posTotalList')\n\n\t\tthis.pos_content.append('<div id=\"posPaymentsContainer\"><div class=\"posSectionTitle\">Payments</div><div id=\"posMethodList\"></div></div>')\n\n\t\tthis.paymentsContainer = this.pos_content.find('#posPaymentsContainer')\n\t\tthis.methodList        = this.pos_content.find('#posMethodList')\n\n\t\tthis.left_container.append('<div id=\"posActionsContainer\" class=\"rowBox align_content\"  style=\"display = none ;\" > <div id=\"posPrintBtn\" class=\"actionBtn rowBox centerItem\"> Print Receipt </div>  <div id=\"posEmailBtn\" class=\"actionBtn rowBox centerItem\"> Email Receipt </div>   <div id=\"posReturnBtn\" class=\"actionBtn rowBox centerItem\"> Return </div>  </div>')\n\t\tthis.left_container.append('<div id=\"posDraftActionsContainer\" class=\"rowBox align_content\" style=\"display = none ;\"> <div id=\"posEditBtn\" class=\"actionBtn rowBox centerItem\"> Edit Invoice </div>  <div id=\"posDeleteBtn\" class=\"actionBtn rowBox centerItem\"> Delete Invoice </div>  </div>')\n\n\t\t//third and last section is the action buttons\n\t\tthis.actionButtonsContainer = this.left_container.find('#posActionsContainer')\n\t\tthis.printBtn  = this.actionButtonsContainer.find('#posPrintBtn')\n\t\tthis.emailBtn  = this.actionButtonsContainer.find('#posEmailBtn')\n\t\tthis.returnBtn = this.actionButtonsContainer.find('#posReturnBtn')\n\n\t\tthis.draftActionButtonsContainer = this.left_container.find('#posDraftActionsContainer')\n\t\tthis.deleteBtn  = this.draftActionButtonsContainer.find('#posDeleteBtn')\n\t\tthis.editBtn    = this.draftActionButtonsContainer.find('#posEditBtn')\n\n\n\t\tthis.right_container.append('<div id=\"historyRightContainerHeader\" class=\"rowBox align_center\" ><h4 class=\"CartTitle\">Recent Orders</h4></div>')\n\t\tthis.right_container.append('<div id=\"historyRightSearchContainer\" class=\"rowBox align_center\" ></div>');\n\n\t\tthis.search_container = this.right_container.find('#historyRightSearchContainer');\n\t\tthis.search_container.append('<select  id=\"PosInvoiceTypeInput\" placeholder=\"POS Invoice Type\">');\n\n\t\tthis.filter_input = this.search_container.find(\"#PosInvoiceTypeInput\")\n\t\tthis.filter_input.append('<option value=\"Draft\">Draft</option><option value=\"Paid\">Paid</option> <option value=\"Unpaid\">Unpaid</option>')\n\n\t\tthis.search_container.append('<input type=\"text\" id=\"historyInput\" placeholder=\"Search by invoice id or custumer name\">');\n\n\t\tthis.right_container.append('<div id=\"historyRecentInvoicesContainer\" ></div>');\n\n\n\n\t\tthis.right_data_container = this.right_container.find('#historyRecentInvoicesContainer')\n\n\n\t}\n\n\n\n\n\trefreshData(){\n\t\tthis.right_data_container.html('');\n\n\t\tconsole.log(\"looke at here now : \" , this.filtered_pos_list)\n\n\t\tthis.filtered_pos_list.forEach( record => {\n\n\t\t\tconst posContainer = document.createElement('div');\n\t\t\tposContainer.classList.add('posInvoiceContainer')\n\t\t\tposContainer.classList.add('columnBox')\n\t\t\tposContainer.classList.add('align_content')\n\n\n\n\t\t\t//line 1\n\t\t\tconst l1           = document.createElement('div')\n\t\t\tl1.classList.add('l1')\n\t\t\tl1.classList.add('rowBox')\n\t\t\tl1.classList.add('align_content')\n\n\n\t\t\tconst posName      = document.createElement('div')\n\t\t\tposName.classList.add('posName')\n\t\t\tposName.textContent = record.name\n\t\t\tconst posCost      = document.createElement('div')\n\t\t\tposCost.classList.add('posCost')\n\t\t\tposCost.textContent = record.paid_amount ?? 0 + \" DA\"\n\n\t\t\tl1.appendChild(posName)\n\t\t\tl1.appendChild(posCost)\n\n\n\t\t\t///////////// line 2\n\t\t\tconst l2           = document.createElement('div')\n\t\t\tl2.classList.add('l2')\n\t\t\tl2.classList.add('rowBox')\n\t\t\tl2.classList.add('align_content')\n\n\t\t\t//l2 customer\n\t\t\tconst customer = document.createElement('div')\n\t\t\tcustomer.classList.add('customer')\n\t\t\tcustomer.classList.add('rowBox')\n\t\t\tcustomer.classList.add('align_content')\n\n\t\t\tconst customerLogo  = document.createElement('img')\n\t\t\tcustomerLogo.src    = '/assets/pos_ar/images/customer.png' ;\n\t\t\tcustomerLogo.width  = 16 ;\n\t\t\tcustomerLogo.height = 16 ;\n\t\t\tcustomerLogo.classList.add('customerLogo');\n\n\t\t\tconst customerName       = document.createElement('div')\n\t\t\tcustomerName.textContent = record.customer\n\t\t\tcustomerName.classList.add('customerName');\n\n\t\t\tcustomer.appendChild(customerLogo);\n\t\t\tcustomer.appendChild(customerName);\n\n\t\t\tl2.appendChild(customer);\n\n\t\t\t//l2 creation time\n\t\t\tconst creationTime  = document.createElement('div')\n\t\t\tcreationTime.textContent = record.creation_time\n\t\t\tl2.appendChild(creationTime);\n\n\t\t\t//add all to container\n\t\t\tposContainer.appendChild(l1)\n\t\t\tposContainer.appendChild(l2)\n\n\t\t\tposContainer.addEventListener('click' , () => {\n\t\t\t\tthis.selected_pos = record\n\t\t\t\tthis.refreshPosDetailsData();\n\t\t\t})\n\n\t\t\tthis.right_data_container.append(posContainer);\n\t\t})\n\n\n\t\t//dont forget to refresh the details cart view because the selected pos may change\n\t\tthis.refreshPosDetailsData();\n\n\t}\n\n\n\n\trefreshPosDetailsData(){\n\n\t\t/******************  check if there is a selected one *********************/\n\t\t// render the empty page or the selected pos details.\n\t\tif(this.selected_pos == null ){\n\t\t\tthis.setEmpty();\n\t\t\treturn;\n\t\t}else{\n\t\t\tthis.setData();\n\t\t}\n\n\n\t\tthis.pos_header.find('#posCustomer').text(this.selected_pos.customer?? \"CustomerName\")\n\t\t//it is not the paid amount it should be the total invoice amount\n\t\tthis.pos_header.find('#posCost').text(this.selected_pos.paid_amount??0 + \"DA\")\n\t\tthis.pos_header.find('#posId').text(this.selected_pos.name?? \"POS Invoice Name\")\n\t\tthis.pos_header.find('#posStatus').text(this.selected_pos.status)\n\t\tthis.pos_header.find('#posStatus').removeClass().addClass(`${this.selected_pos.status}`)\n\n\t\tif(this.selected_pos.status == \"Draft\"){\n\t\t\tthis.draftActionButtonsContainer.css('display' , 'flex')\n\t\t\tthis.actionButtonsContainer.css('display' , 'none')\n\t\t}else{\n\t\t\tthis.draftActionButtonsContainer.css('display' , 'none')\n\t\t\tthis.actionButtonsContainer.css('display' , 'flex')\n\t\t}\n\n\n\t\t/**********************  items list ***************************/\n\t\tthis.itemList.html('');\n\t\tthis.selected_pos.items.forEach(item => {\n\t\t\tthis.itemList.append(`<div class=\"rowBox align_item\">    <div class=\"itemName rowBox align_center\">${item.item_name}</div>   <div class=\"itemQuantity rowBox align_center\">${item.qty}</div>   <div class=\"itemCost rowBox align_center\">${item.qty * item.rate} DA</div>  </div>`)\n\t\t})\n\n\n\t\t/*********************  net ,  VAT  , Discount , Grand Total *******************/\n\n\t\tthis.totalList.html('');\n\n\t\t/////net total\n\t\tlet netTotal = 0 ;\n\t\tthis.selected_pos.items.forEach(item => {\n\t\t\tnetTotal += item.rate * item.qty\n\t\t})\n\t\tthis.totalList.append(`<div class=\"rowBox align_item\"> <div class=\"name rowBox align_center\">Net Total</div> <div class=\"price rowBox align_center\">${netTotal} DA</div> </div>`)\n\n\n\t\t/////////taxes\n\t\tconst salesTaxes = this.getSalesTaxes(this.selected_pos);\n\n\t\tlet allTax = 0\n\t\tif(this.selected_pos.taxes_and_charges != \"\" && this.selected_pos.taxes_and_charges != null){\n\t\t\tsalesTaxes.forEach( tax =>{\n\t\t\t\tallTax += (tax.rate/100) * netTotal\n\t\t\t\tthis.totalList.append(`<div class=\"rowBox align_item\"> <div class=\"name rowBox align_center\">${tax.description}</div> <div class=\"price rowBox align_center\">${(tax.rate/100) * netTotal} DA</div> </div>`)\n\t\t\t})\n\t\t}\n\n\t\t// grand otal\n\t\tthis.totalList.append(`<div class=\"rowBox align_item\"> <div class=\"grandTotalName rowBox align_center\">Grand Total</div> <div class=\"grandTotalPrice rowBox align_center\">${netTotal + allTax} DA</div> </div>`)\n\n\n\n\t\t/***************************** payment methode list *********************************/\n\t\tthis.methodList.html('')\n\t\tconst payments = this.selected_pos.payments ;\n\n\t\tif(payments != null && payments != \"\"){\n\t\t\tpayments.forEach( method => {\n\t\t\t\tthis.methodList.append(`<div class=\"rowBox align_item\"> <div class=\"name rowBox align_center\">${method.mode_of_payment}</div> <div class=\"price rowBox align_center\">${method.amount} DA</div> </div>`)\n\t\t\t})\n\t\t}\n\n\t}\n\n\n\n\t//show and hide\n\tshow_cart(){\n\t\tthis.left_container.css('display' , 'flex');\n\t\tthis.right_container.css('display' , 'flex');\n\n\t\tconst filter = this.filter_input.val();\n\t\tconsole.log(\"filter : \" , filter);\n\n\t\t//refrenshing data\n\t\tthis.db.getAllPosInvoice(\n\t\t\t\t\t\t(result)=>{\n\t\t\t\t\t\t\tconsole.log(\"look at the result : \" , result)\n\t\t\t\t\t\t\tthis.localPosInvoice.pos_invoices = result ;\n\t\t\t\t\t\t\tthis.filtered_pos_list = this.localPosInvoice.pos_invoices.filter( pos => {\n\n\t\t\t\t\t\t\t\tif(pos.status == filter ){\n\t\t\t\t\t\t\t\t\treturn true ;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\treturn false ;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\tif(this.filtered_pos_list.length == 0){\n\t\t\t\t\t\t\t\tthis.selected_pos = null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tthis.selected_pos = structuredClone(this.filtered_pos_list[0])\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.refreshData()\n\t\t\t\t\t\t},(error) => {\n\t\t\t\t\t\t\tconsole.log(error)\n\t\t\t\t\t\t}\n\t\t)\n\n\t}\n\n\t//hide and hide\n\thide_cart(){\n\t\tthis.left_container.css('display' , 'none');\n\t\tthis.right_container.css('display' , 'none');\n\t}\n\n\n\t//set empty\n\tsetEmpty(){\n\t\tthis.pos_header.css('display' , 'none')\n\t\tthis.pos_content.css('display' , 'none')\n\t\tthis.actionButtonsContainer.css('display' , 'none')\n\t\tthis.draftActionButtonsContainer.css('display' , 'none')\n\t}\n\n\t//set data\n\tsetData(){\n\t\tthis.pos_header.css('display' , 'flex')\n\t\tthis.pos_content.css('display' , 'flex')\n\t}\n\n\n\n\n\t/************************************* set listeners  ***********************************************/\n\t//set listeners\n\tsetListener(){\n\n\t\tthis.filter_input.on('input' , (event) => {\n\t\t\tconst filter = event.target.value;\n\n\t\t\tconsole.log(\"filter : \" , filter)\n\n\n\t\t\tthis.filtered_pos_list = this.localPosInvoice.pos_invoices.filter( pos => {\n\t\t\t\tif(filter == \"\"){\n\t\t\t\t\treturn true ;\n\t\t\t\t}\n\t\t\t\telse if(filter == pos.status ){\n\t\t\t\t\treturn true ;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\treturn false ;\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tif(this.filtered_pos_list.length == 0){\n\t\t\t\tthis.selected_pos = null;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.selected_pos = this.filtered_pos_list[0]\n\t\t\t}\n\t\t\tthis.refreshData();\n\t\t});\n\n\n\t\tthis.deleteBtn.on('click' , (event)=>{\n\t\t\tthis.db.deletePosInvoice(\n\t\t\t\tthis.selected_pos.name,\n\t\t\t\t(event)=>{\n\t\t\t\t\t//remove the deleted one from the filtred list\n\t\t\t\t\tthis.filtered_pos_list = this.filtered_pos_list.filter(pos => pos.name != this.selected_pos.name)\n\t\t\t\t\t//selected new pos\n\t\t\t\t\tif(this.filtered_pos_list.length > 0){\n\t\t\t\t\t\tthis.selected_pos = this.filtered_pos_list[0]\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tthis.selected_pos = null ;\n\t\t\t\t\t}\n\t\t\t\t\tthis.refreshData()\n\t\t\t\t},\n\t\t\t\t(error)=>{\n\t\t\t\t\t//error callback\n\t\t\t\t\tconsole.log(\"error on deleting the pos : \" , error);\n\t\t\t\t}\n\t\t\t)\n\t\t})\n\n\t\tthis.editBtn.on('click' , (event)=>{\n\t\t\tthis.on_click('edit' , this.selected_pos );\n\t\t})\n\n\t\tthis.returnBtn.on('click' , (event)=>{\n\t\t\tthis.on_click('return' , null );\n\t\t})\n\n\t}\n\n\t/******************************************** functions  ********************************************************/\n\tgetSalesTaxes(pos){\n\n\t\tconst taxTemplateId = pos.taxes_and_charges\n                let   salesTax      = []\n\n                this.sales_taxes_and_charges.forEach( tax => {\n                        if(tax.parent == taxTemplateId){\n                                console.log(\"debuging ==> parent : \" , tax.parent , \" taxTemplateId : \" , taxTemplateId)\n                                salesTax.push(tax)\n                        }\n                })\n                console.log(\"sales tax :=:=> \" , salesTax);\n                return salesTax;\n\t}\n\n}\n", "pos_ar.PointOfSale.pos_db  = class POSDatabase {\n\n\tconstructor() {\n\t\tthis.dbName = 'POSDB_test12';\n\t\tthis.dbVersion = 14;\n\t\tthis.db = null;\n\n\t\tthis.openDatabase()\n\t}\n\n\n\topenDatabase(){\n\n\t\t// Let us open our database\n\t\tconst request = window.indexedDB.open( this.dbName , this.dbVersion);\n\n\t\trequest.onerror = (event) => {\n\t\t\t// Do something with request.error!\n\t\t\tconsole.log(\" there is an error : \" , request.error)\n\t\t};\n\n\t\trequest.onsuccess = (event) => {\n\t\t\t// Do something with request.result!\n\t\t\tthis.db = event.target.result;\n\t\t\tthis.setupDatabase()\n\t\t\tconsole.log(\" the db is opend successefully : \" , event.target.result)\n\t\t};\n\n \t\trequest.onupgradeneeded = (event) => {\n\t\t \tconst db = event.target.result;\n\n\t\t\t// Create object stores (tables)\n\t\t\tif (!db.objectStoreNames.contains('Customer')) {\n\t\t\t\tdb.createObjectStore('Customer', { keyPath: 'name' });\n\t\t\t}\n\t\t\tif (!db.objectStoreNames.contains('Item Group')) {\n\t\t\t\tdb.createObjectStore('Item Group', { keyPath: 'name' });\n\t\t\t}\n\t\t\tif (!db.objectStoreNames.contains('Item')) {\n\t\t\t\tdb.createObjectStore('Item', { keyPath: 'name' });\n\t\t\t}\n\t\t\tif (!db.objectStoreNames.contains('Item Price')) {\n\t\t\t\tdb.createObjectStore('Item Price', { keyPath: 'name' });\n\t\t\t}\n\t\t\tif (!db.objectStoreNames.contains('Price List')) {\n\t\t\t\tdb.createObjectStore('Price List', { keyPath: 'name' });\n\t\t\t}\n\t\t\tif (!db.objectStoreNames.contains('Warehouse')) {\n\t\t\t\tdb.createObjectStore('Warehouse', { keyPath: 'name' });\n\t\t\t}\n\t\t\tif (!db.objectStoreNames.contains('POS Profile')) {\n\t\t\t\tdb.createObjectStore('POS Profile', { keyPath: 'name' });\n\t\t\t}\n\t\t\tif (!db.objectStoreNames.contains('Bin')) {\n\t\t\t\tdb.createObjectStore('Bin', { keyPath: 'name' });\n\t\t\t}\n\t\t\tif (!db.objectStoreNames.contains('POS Invoice')) {\n\t\t\t\tconst posInvoiceStore = db.createObjectStore('POS Invoice', { keyPath : 'name' });\n\t\t\t\tposInvoiceStore.createIndex('docstatus' , 'docstatus' , {unique : false})\n\t\t\t}\n\t\t};\n\t}\n\n\n\n\tsetupDatabase(){\n\t\tthis.db.onerror = (event) => {\n\t\t\t// Generic error handler for all errors targeted at this database's\n\t\t\t// requests!\n\t\t\tconsole.error(`Database error: ${event.target.error?.message}`);\n\t\t};\n\t}\n\n\n\n\tsavePosInvoice(posInvoice , onSuccess , onFailure){\n\n\t\tconst transaction = this.db.transaction(['POS Invoice'] , \"readwrite\");\n\t\tconst store       = transaction.objectStore('POS Invoice')\n\t\tconst request     = store.put(posInvoice)\n\n\t\trequest.onsuccess = (event) => {\n\t\t\tonSuccess(event);\n\t\t};\n\n\t\trequest.onerror = (event) => {\n\t\t\tonFailure(event);\n\t\t};\n\n\t}\n\n\n\tupdatePosInvoice(posInvoice, onSuccess, onFailure) {\n\t\tconst transaction = this.db.transaction(['POS Invoice'], \"readwrite\");\n\t\tconst store = transaction.objectStore('POS Invoice');\n\n\t\t// add if not exists or update if it exists.\n\t\tconst request = store.put(posInvoice);\n\n\t\trequest.onsuccess = (event) => {\n\t\t\tonSuccess(event);\n\t\t};\n\n\t\trequest.onerror = (event) => {\n\t\t\tonFailure(event);\n    \t\t};\n\t}\n\n\tgetAllPosInvoice(onSuccess , onFailure){\n\t\tconst transaction = this.db.transaction(['POS Invoice'] , \"readwrite\");\n\t\tconst store       = transaction.objectStore('POS Invoice');\n\t\tconst result      = store.getAll().onsuccess = (event) => {\n\t\t\tconst value = event.target.result\n\t\t\tonSuccess(value);\n\t\t}\n\t}\n\n\tgetDraftPosInvoice(onSuccess , onFailure){\n\t\tconst transaction_posInvoice     = this.db.transaction(['POS Invoice'] , \"readwrite\");\n\t\tconst store_posInvoice           = transaction_posInvoice.objectStore('POS Invoice');\n\t\tconst index_docstatus_posInvoice = store_posInvoice.index('docstatus');\n\n\t\tconst request = index_docstatus_posInvoice.getAll(0);\n\n\t\trequest.onsuccess = (event) => {\n\t\t\tonSuccess(event.target.result);\n\t\t};\n\n\t\trequest.onerror = (event) => {\n\t\t\tonFailure(event);\n\t\t};\n\n\t}\n\n\n\n\t// New delete function to remove a POS Invoice\n\tdeletePosInvoice(invoiceName, onSuccess, onFailure) {\n\t\tconst transaction = this.db.transaction(['POS Invoice'], \"readwrite\");\n\t\tconst store = transaction.objectStore('POS Invoice');\n\t\tconst request = store.delete(invoiceName);  // Deletes the record with the key 'invoiceName', (i set the name as keypath , in erpnext name is the id.)\n\n\t\trequest.onsuccess = (event) => {\n\t\t\tonSuccess(event);  // Call success callback if the deletion is successful\n\t\t};\n\n\t\trequest.onerror = (event) => {\n\t\t\tonFailure(event);  // Call failure callback if there is an error\n\t\t};\n\t}\n\n\n\n}\n", "pos_ar.PointOfSale.pos_settings = class{\n\n\tconstructor(\n\t\twrapper,\n\t){\n\t\tthis.wrapper = wrapper\n\t\tthis.start_work()\n\t}\n\n\tstart_work(){\n\t\tconsole.log(\"setting class start work !\")\n\t\tthis.prepareSettingsCart();\n\t}\n\n\n\tprepareSettingsCart(){\n\t\tthis.wrapper.find('#RightSection').append('<div id=\"settingsLeftContainer\"></div>')\n\t\tthis.wrapper.find('#LeftSection').append('<div id=\"settingsRightContainer\"></div>')\n\n\t\tthis.rightContainer = this.wrapper.find('#RightSection')\n\t\tthis.leftContainer  = this.wrapper.find('#LeftSection')\n\n\t}\n\n\tshowCart(){\n\t\tthis.rightContainer.css('display' , 'flex')\n\t\tthis.leftContainer.css('display' , 'flex')\n\t}\n\thideCart(){\n\t\tthis.rightContainer.css('display' , 'none')\n\t\tthis.leftContainer.css('display' , 'none')\n\t}\n\n\n}\n"],
  "mappings": "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",
  "names": ["event", "event", "event", "event", "event", "field", "bin", "event", "event", "event"]
}
